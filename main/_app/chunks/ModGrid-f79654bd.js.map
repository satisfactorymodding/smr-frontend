{"version":3,"file":"ModGrid-f79654bd.js","sources":["../../../../../src/lib/components/mods/ModGrid.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import {operationStore, query} from '@urql/svelte';\n  import {GetModsDocument} from '$lib/generated';\n  import ModCard from \"./ModCard.svelte\";\n  import PageControls from \"$lib/components/utils/PageControls.svelte\";\n  import {writable} from \"svelte/store\";\n  import FakeCard from \"../general/FakeCard.svelte\";\n\n  export let colCount: 4 | 5 = 4;\n\n  // TODO Selectable\n  const perPage = 40;\n\n  const mods = operationStore(\n    GetModsDocument,\n    {offset: 0, limit: perPage}\n  );\n\n  const page = writable(1);\n  let totalMods: number;\n\n  page.subscribe(p => {\n    $mods.variables.offset = (p - 1) * perPage;\n    $mods.reexecute();\n  });\n\n  $: totalMods = $mods?.data?.getMods?.count || 0;\n\n  query(mods);\n\n  $: gridClasses = colCount == 4 ?\n    '2xl:grid-cols-4 xl:grid-cols-3 lg:grid-cols-2 grid-cols-1' :\n    '2xl:grid-cols-5 xl:grid-cols-4 lg:grid-cols-3 grid-cols-1';\n</script>\n\n<div class=\"mb-5 ml-auto flex justify-end\">\n  <PageControls totalPages={Math.ceil(totalMods / perPage)} currentPage={page}/>\n</div>\n\n{#if $mods.fetching}\n  <div class=\"grid {gridClasses} gap-4\">\n    {#each Array(perPage) as _}\n      <FakeCard/>\n    {/each}\n  </div>\n{:else if $mods.error}\n  <p>Oh no... {$mods.error.message}</p>\n{:else}\n  <div class=\"grid {gridClasses} gap-4\">\n    {#each $mods.data.getMods.mods as mod}\n      <ModCard mod=\"{mod}\"/>\n    {/each}\n  </div>\n{/if}\n\n<div class=\"mt-5 ml-auto flex justify-end\">\n  <PageControls totalPages={Math.ceil(totalMods / perPage)} currentPage={page}/>\n</div>\n"],"names":["ctx","data","getMods","mods","length","ctx2","error","message","Array","perPage","Math","ceil","fetching","_a","_b","colCount","operationStore","GetModsDocument","offset","limit","page","writable","totalMods","subscribe","$mods","variables","reexecute","count","gridClasses"],"mappings":"yhBAiDWA,KAAMC,KAAKC,QAAQC,0BAAxBC,0QADcJ,4GACTK,KAAMJ,KAAKC,QAAQC,aAAxBC,qHAAAA,yDADcC,6DACdD,8IAHSJ,KAAMM,MAAMC,mCAAtB,yDAAA,sFAAUF,KAAMC,MAAMC,sEALhBC,MAAMC,wBAAXL,iOADcJ,iHAAAK,6DACdD,qKASeJ,6GAAAK,8VAdOK,KAAKC,KAAKX,KAAYS,eAAuBT,oDAGpEK,KAAMO,WAMDP,KAAMC,kEAWYI,KAAKC,KAAKX,KAAYS,eAAuBT,seApB7CU,KAAKC,KAAKN,KAAYI,yLAoBtBC,KAAKC,KAAKN,KAAYI,iMA7C1CA,EAAU,iCAXDI,EAAAC,eAQJC,EAAkB,WAKvBZ,EAAOa,EACXC,GACCC,OAAQ,EAAGC,MAAOV,+BAGfW,EAAOC,EAAS,OAClBC,WAECC,mBACHC,EAAMC,UAAUP,UAAc,GAAKT,OAC7BiB,iBAKFvB,uFAFHmB,GAAgC,WAApBR,EAAW,WAAXD,EAAAW,MAAAA,SAAAA,EAAOvB,gBAAIY,SAAAA,EAAEX,mBAAOY,SAAAA,EAAEa,QAAS,sBAI3CC,EAA0B,GAAZb,EACf,4DACA"}