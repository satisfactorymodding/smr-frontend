import{S as ne,i as re,s as se,az as ae,w as T,x as M,y as O,q as h,o as w,B as S,aC as oe,e as v,t as A,k as H,c as b,a as D,h as N,d as u,m as L,b as V,g as I,X as _,j as Z,R as ve,l as K,ab as be,p as y,P as le,aA as ke,Q as we,n as x,Z as C,D as De,O as ie,M as ue,N as fe,Y as ee,L as Ee,aO as ce,aP as Ge,V as Ie,W as je}from"../../../chunks/vendor-2ce7ccec.js";import{l as Ve}from"../../../chunks/gql-c9d2d060.js";import{s as Ce,t as Ae}from"../../../chunks/graphql-a19cc583.js";import{p as Ne}from"../../../chunks/routing-689f9c1f.js";import{a as de}from"../../../chunks/formatting-24701f16.js";import{b as te}from"../../../chunks/paths-396f020f.js";import{a as Pe}from"../../../chunks/user-ad7271b9.js";import{g as $e}from"../../../chunks/navigation-ca50617e.js";import{T as Te}from"../../../chunks/Toast-cfd5b391.js";import{m as ge}from"../../../chunks/markdown-b4f4b87c.js";import{M as Me}from"../../../chunks/MetaDescriptors-36bd2d25.js";import"../../../chunks/global-8916fa42.js";import"../../../chunks/singletons-4fc5a6de.js";import"../../../chunks/stores-3b01ec45.js";function Oe(a){let e,n,t,s,r,o,l,m,f=de(a[0].created_at)+"",d,i;return{c(){e=v("div"),n=v("h3"),t=A("Info"),s=H(),r=v("span"),o=v("strong"),l=A("Created:"),m=H(),d=A(f),i=v("br"),this.h()},l($){e=b($,"DIV",{class:!0});var p=D(e);n=b(p,"H3",{class:!0});var P=D(n);t=N(P,"Info"),P.forEach(u),s=L(p),r=b(p,"SPAN",{});var j=D(r);o=b(j,"STRONG",{});var B=D(o);l=N(B,"Created:"),B.forEach(u),m=L(j),d=N(j,f),j.forEach(u),i=b(p,"BR",{}),p.forEach(u),this.h()},h(){V(n,"class","text-2xl my-4 font-bold"),V(e,"class","text-lg")},m($,p){I($,e,p),_(e,n),_(n,t),_(e,s),_(e,r),_(r,o),_(o,l),_(r,m),_(r,d),_(e,i)},p($,p){p&1&&f!==(f=de($[0].created_at)+"")&&Z(d,f)},d($){$&&u(e)}}}function Se(a){let e,n;return e=new oe({props:{$$slots:{default:[Oe]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){O(e,t,s),n=!0},p(t,s){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function qe(a){let e,n;return e=new ae({props:{$$slots:{default:[Se]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){O(e,t,s),n=!0},p(t,[s]){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function He(a,e,n){let{guide:t}=e;return a.$$set=s=>{"guide"in s&&n(0,t=s.guide)},[t]}class Le extends ne{constructor(e){super();re(this,e,He,qe,se,{guide:0})}}function Be(a){let e,n,t,s,r,o,l,m,f,d,i,$=a[0].username+"",p,P,j,B,W;return{c(){e=v("div"),n=v("h3"),t=A("Author"),s=H(),r=v("div"),o=v("div"),l=v("div"),f=H(),d=v("div"),i=v("a"),p=A($),j=H(),B=v("div"),W=A("Writer"),this.h()},l(G){e=b(G,"DIV",{class:!0});var q=D(e);n=b(q,"H3",{class:!0});var F=D(n);t=N(F,"Author"),F.forEach(u),s=L(q),r=b(q,"DIV",{class:!0});var k=D(r);o=b(k,"DIV",{class:!0});var g=D(o);l=b(g,"DIV",{class:!0,style:!0}),D(l).forEach(u),f=L(g),d=b(g,"DIV",{class:!0});var U=D(d);i=b(U,"A",{href:!0,class:!0});var z=D(i);p=N(z,$),z.forEach(u),j=L(U),B=b(U,"DIV",{});var c=D(B);W=N(c,"Writer"),c.forEach(u),U.forEach(u),g.forEach(u),k.forEach(u),q.forEach(u),this.h()},h(){V(n,"class","text-2xl my-4 font-bold"),V(l,"class","rounded-full bg-cover w-14 h-14"),V(l,"style",m=`background-image: url("${a[0].avatar}")`),V(i,"href",P=""+(te+"/user/"+a[0].id+"/")),V(i,"class","text-yellow-500 underline"),V(d,"class","grid grid-flow-row"),V(o,"class","grid grid-flow-col auto-cols-min gap-x-4"),V(r,"class","grid auto-rows-min text-lg gap-y-4"),V(e,"class","grid grid-flow-row gap-y-2")},m(G,q){I(G,e,q),_(e,n),_(n,t),_(e,s),_(e,r),_(r,o),_(o,l),_(o,f),_(o,d),_(d,i),_(i,p),_(d,j),_(d,B),_(B,W)},p(G,q){q&1&&m!==(m=`background-image: url("${G[0].avatar}")`)&&V(l,"style",m),q&1&&$!==($=G[0].username+"")&&Z(p,$),q&1&&P!==(P=""+(te+"/user/"+G[0].id+"/"))&&V(i,"href",P)},d(G){G&&u(e)}}}function We(a){let e,n;return e=new oe({props:{$$slots:{default:[Be]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){O(e,t,s),n=!0},p(t,s){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Fe(a){let e,n;return e=new ae({props:{$$slots:{default:[We]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){O(e,t,s),n=!0},p(t,[s]){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Re(a,e,n){let{author:t}=e;return a.$$set=s=>{"author"in s&&n(0,t=s.author)},[t]}class Qe extends ne{constructor(e){super();re(this,e,Re,Fe,se,{author:0})}}function _e(a){let e,n;return e=new Me({props:{description:a[3].data.getGuide.short_description,title:a[3].data.getGuide.name}}),{c(){T(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){O(e,t,s),n=!0},p(t,s){const r={};s&8&&(r.description=t[3].data.getGuide.short_description),s&8&&(r.title=t[3].data.getGuide.name),e.$set(r)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Ue(a){let e;return{c(){e=A("404")},l(n){e=N(n,"404")},m(n,t){I(n,e,t)},p:C,i:C,o:C,d(n){n&&u(e)}}}function ze(a){let e,n,t,s=a[3].data.getGuide.name+"",r,o,l,m,f,d,i,$,p,P,j,B,W,G,q,F,k=a[5]&&me(a);d=new ae({props:{class:"h-fit",$$slots:{default:[tt]},$$scope:{ctx:a}}}),p=new Le({props:{guide:a[3].data.getGuide}}),j=new Qe({props:{author:a[3].data.getGuide.user}});let g=a[5]&&pe(a);function U(c){a[15](c)}let z={$$slots:{default:[lt]},$$scope:{ctx:a}};return a[2]!==void 0&&(z.running=a[2]),G=new Te({props:z}),ue.push(()=>fe(G,"running",U)),{c(){e=v("div"),n=v("div"),t=v("h1"),r=A(s),o=H(),l=v("div"),k&&k.c(),m=H(),f=v("div"),T(d.$$.fragment),i=H(),$=v("div"),T(p.$$.fragment),P=H(),T(j.$$.fragment),B=H(),g&&g.c(),W=H(),T(G.$$.fragment),this.h()},l(c){e=b(c,"DIV",{class:!0});var E=D(e);n=b(E,"DIV",{class:!0});var Q=D(n);t=b(Q,"H1",{class:!0});var X=D(t);r=N(X,s),X.forEach(u),o=L(Q),l=b(Q,"DIV",{});var Y=D(l);k&&k.l(Y),Y.forEach(u),Q.forEach(u),m=L(E),f=b(E,"DIV",{class:!0});var R=D(f);M(d.$$.fragment,R),i=L(R),$=b(R,"DIV",{class:!0});var J=D($);M(p.$$.fragment,J),P=L(J),M(j.$$.fragment,J),J.forEach(u),R.forEach(u),E.forEach(u),B=L(c),g&&g.l(c),W=L(c),M(G.$$.fragment,c),this.h()},h(){V(t,"class","text-4xl font-bold"),V(n,"class","flex flex-wrap h-auto justify-between items-center"),V($,"class","grid grid-cols-1 auto-rows-min gap-8"),V(f,"class","grid grid-auto-max auto-rows-min gap-4"),V(e,"class","grid gap-6 xlx:grid-flow-row")},m(c,E){I(c,e,E),_(e,n),_(n,t),_(t,r),_(n,o),_(n,l),k&&k.m(l,null),_(e,m),_(e,f),O(d,f,null),_(f,i),_(f,$),O(p,$,null),_($,P),O(j,$,null),I(c,B,E),g&&g.m(c,E),I(c,W,E),O(G,c,E),F=!0},p(c,E){(!F||E&8)&&s!==(s=c[3].data.getGuide.name+"")&&Z(r,s),c[5]?k?(k.p(c,E),E&32&&h(k,1)):(k=me(c),k.c(),h(k,1),k.m(l,null)):k&&(x(),w(k,1,1,()=>{k=null}),y());const Q={};E&262152&&(Q.$$scope={dirty:E,ctx:c}),d.$set(Q);const X={};E&8&&(X.guide=c[3].data.getGuide),p.$set(X);const Y={};E&8&&(Y.author=c[3].data.getGuide.user),j.$set(Y),c[5]?g?(g.p(c,E),E&32&&h(g,1)):(g=pe(c),g.c(),h(g,1),g.m(W.parentNode,W)):g&&(x(),w(g,1,1,()=>{g=null}),y());const R={};E&262160&&(R.$$scope={dirty:E,ctx:c}),!q&&E&4&&(q=!0,R.running=c[2],ie(()=>q=!1)),G.$set(R)},i(c){F||(h(k),h(d.$$.fragment,c),h(p.$$.fragment,c),h(j.$$.fragment,c),h(g),h(G.$$.fragment,c),F=!0)},o(c){w(k),w(d.$$.fragment,c),w(p.$$.fragment,c),w(j.$$.fragment,c),w(g),w(G.$$.fragment,c),F=!1},d(c){c&&u(e),k&&k.d(),S(d),S(p),S(j),c&&u(B),g&&g.d(c),c&&u(W),S(G,c)}}}function Xe(a){let e,n,t=a[3].error.message+"",s;return{c(){e=v("p"),n=A("Oh no... "),s=A(t)},l(r){e=b(r,"P",{});var o=D(e);n=N(o,"Oh no... "),s=N(o,t),o.forEach(u)},m(r,o){I(r,e,o),_(e,n),_(e,s)},p(r,o){o&8&&t!==(t=r[3].error.message+"")&&Z(s,t)},i:C,o:C,d(r){r&&u(e)}}}function Ye(a){let e,n;return{c(){e=v("p"),n=A("Loading...")},l(t){e=b(t,"P",{});var s=D(e);n=N(s,"Loading..."),s.forEach(u)},m(t,s){I(t,e,s),_(e,n)},p:C,i:C,o:C,d(t){t&&u(e)}}}function me(a){let e,n,t,s;return e=new ee({props:{variant:"outlined",$$slots:{default:[Ze]},$$scope:{ctx:a}}}),e.$on("click",a[10]),t=new ee({props:{variant:"outlined",$$slots:{default:[Je]},$$scope:{ctx:a}}}),t.$on("click",a[11]),{c(){T(e.$$.fragment),n=H(),T(t.$$.fragment)},l(r){M(e.$$.fragment,r),n=L(r),M(t.$$.fragment,r)},m(r,o){O(e,r,o),I(r,n,o),O(t,r,o),s=!0},p(r,o){const l={};o&262144&&(l.$$scope={dirty:o,ctx:r}),e.$set(l);const m={};o&262144&&(m.$$scope={dirty:o,ctx:r}),t.$set(m)},i(r){s||(h(e.$$.fragment,r),h(t.$$.fragment,r),s=!0)},o(r){w(e.$$.fragment,r),w(t.$$.fragment,r),s=!1},d(r){S(e,r),r&&u(n),S(t,r)}}}function Ze(a){let e;return{c(){e=A("Edit")},l(n){e=N(n,"Edit")},m(n,t){I(n,e,t)},d(n){n&&u(e)}}}function Je(a){let e;return{c(){e=A("Delete")},l(n){e=N(n,"Delete")},m(n,t){I(n,e,t)},d(n){n&&u(e)}}}function Ke(a){return{c:C,l:C,m:C,p:C,d:C}}function ye(a){let e,n=a[17]+"";return{c(){e=v("p")},l(t){e=b(t,"P",{});var s=D(e);s.forEach(u)},m(t,s){I(t,e,s),e.innerHTML=n},p(t,s){s&8&&n!==(n=t[17]+"")&&(e.innerHTML=n)},d(t){t&&u(e)}}}function xe(a){return{c:C,l:C,m:C,p:C,d:C}}function et(a){let e,n,t={ctx:a,current:null,token:null,hasCatch:!1,pending:xe,then:ye,catch:Ke,value:17};return ce(n=ge(a[3].data.getGuide.guide),t),{c(){e=v("div"),t.block.c(),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=D(e);t.block.l(r),r.forEach(u),this.h()},h(){V(e,"class","markdown-content break-words")},m(s,r){I(s,e,r),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null},p(s,r){a=s,t.ctx=a,r&8&&n!==(n=ge(a[3].data.getGuide.guide))&&ce(n,t)||Ge(t,a,r)},d(s){s&&u(e),t.block.d(),t.token=null,t=null}}}function tt(a){let e,n;return e=new oe({props:{$$slots:{default:[et]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment)},l(t){M(e.$$.fragment,t)},m(t,s){O(e,t,s),n=!0},p(t,s){const r={};s&262152&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function pe(a){let e,n,t;function s(o){a[14](o)}let r={$$slots:{default:[ot]},$$scope:{ctx:a}};return a[6]!==void 0&&(r.open=a[6]),e=new Ee({props:r}),ue.push(()=>fe(e,"open",s)),{c(){T(e.$$.fragment)},l(o){M(e.$$.fragment,o)},m(o,l){O(e,o,l),t=!0},p(o,l){const m={};l&262144&&(m.$$scope={dirty:l,ctx:o}),!n&&l&64&&(n=!0,m.open=o[6],ie(()=>n=!1)),e.$set(m)},i(o){t||(h(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){S(e,o)}}}function nt(a){let e;return{c(){e=A("Delete Guide?")},l(n){e=N(n,"Delete Guide?")},m(n,t){I(n,e,t)},d(n){n&&u(e)}}}function rt(a){let e;return{c(){e=A("Cancel")},l(n){e=N(n,"Cancel")},m(n,t){I(n,e,t)},d(n){n&&u(e)}}}function st(a){let e;return{c(){e=A("Delete")},l(n){e=N(n,"Delete")},m(n,t){I(n,e,t)},d(n){n&&u(e)}}}function at(a){let e,n,t,s,r,o,l,m;return r=new ee({props:{variant:"outlined",$$slots:{default:[rt]},$$scope:{ctx:a}}}),r.$on("click",a[12]),l=new ee({props:{variant:"outlined",$$slots:{default:[st]},$$scope:{ctx:a}}}),l.$on("click",a[13]),{c(){e=v("div"),n=v("span"),t=A("Are you sure you wish to delete this guide"),s=H(),T(r.$$.fragment),o=H(),T(l.$$.fragment),this.h()},l(f){e=b(f,"DIV",{class:!0});var d=D(e);n=b(d,"SPAN",{});var i=D(n);t=N(i,"Are you sure you wish to delete this guide"),i.forEach(u),s=L(d),M(r.$$.fragment,d),o=L(d),M(l.$$.fragment,d),d.forEach(u),this.h()},h(){V(e,"class","grid grid-flow-row gap-4")},m(f,d){I(f,e,d),_(e,n),_(n,t),_(e,s),O(r,e,null),_(e,o),O(l,e,null),m=!0},p(f,d){const i={};d&262144&&(i.$$scope={dirty:d,ctx:f}),r.$set(i);const $={};d&262144&&($.$$scope={dirty:d,ctx:f}),l.$set($)},i(f){m||(h(r.$$.fragment,f),h(l.$$.fragment,f),m=!0)},o(f){w(r.$$.fragment,f),w(l.$$.fragment,f),m=!1},d(f){f&&u(e),S(r),S(l)}}}function ot(a){let e,n,t,s;return e=new Ie({props:{$$slots:{default:[nt]},$$scope:{ctx:a}}}),t=new je({props:{$$slots:{default:[at]},$$scope:{ctx:a}}}),{c(){T(e.$$.fragment),n=H(),T(t.$$.fragment)},l(r){M(e.$$.fragment,r),n=L(r),M(t.$$.fragment,r)},m(r,o){O(e,r,o),I(r,n,o),O(t,r,o),s=!0},p(r,o){const l={};o&262144&&(l.$$scope={dirty:o,ctx:r}),e.$set(l);const m={};o&262144&&(m.$$scope={dirty:o,ctx:r}),t.$set(m)},i(r){s||(h(e.$$.fragment,r),h(t.$$.fragment,r),s=!0)},o(r){w(e.$$.fragment,r),w(t.$$.fragment,r),s=!1},d(r){S(e,r),r&&u(n),S(t,r)}}}function lt(a){let e,n;return{c(){e=v("span"),n=A(a[4])},l(t){e=b(t,"SPAN",{});var s=D(e);n=N(s,a[4]),s.forEach(u)},m(t,s){I(t,e,s),_(e,n)},p(t,s){s&16&&Z(n,t[4])},d(t){t&&u(e)}}}function it(a){let e,n,t,s,r,o,l=!a[3].fetching&&!a[3].error&&a[3].data.getGuide&&_e(a);const m=[Ye,Xe,ze,Ue],f=[];function d(i,$){return i[3].fetching?0:i[3].error?1:i[3].data.getGuide?2:3}return t=d(a),s=f[t]=m[t](a),{c(){l&&l.c(),e=K(),n=H(),s.c(),r=K()},l(i){const $=be('[data-svelte="svelte-bhfvpi"]',document.head);l&&l.l($),e=K(),$.forEach(u),n=L(i),s.l(i),r=K()},m(i,$){l&&l.m(document.head,null),_(document.head,e),I(i,n,$),f[t].m(i,$),I(i,r,$),o=!0},p(i,[$]){!i[3].fetching&&!i[3].error&&i[3].data.getGuide?l?(l.p(i,$),$&8&&h(l,1)):(l=_e(i),l.c(),h(l,1),l.m(e.parentNode,e)):l&&(x(),w(l,1,1,()=>{l=null}),y());let p=t;t=d(i),t===p?f[t].p(i,$):(x(),w(f[p],1,1,()=>{f[p]=null}),y(),s=f[t],s?s.p(i,$):(s=f[t]=m[t](i),s.c()),h(s,1),s.m(r.parentNode,r))},i(i){o||(h(l),h(s),o=!0)},o(i){w(l),w(s),o=!1},d(i){l&&l.d(i),u(e),i&&u(n),f[t].d(i),i&&u(r)}}}const he=ve(Ce,{guide:void 0}),Et=Ne(async a=>(he.variables.guide=a.params.guideId,Ve({guide:he})(a)));function ut(a,e,n){let t,s,r=C,o=()=>(r(),r=ke(d,g=>n(3,s=g)),d),l,m;le(a,Pe,g=>n(9,l=g)),a.$$.on_destroy.push(()=>r());let{guideId:f}=e,{guide:d}=e;o();let i="",$=!1;const p=we({query:Ae}),P=De(!1);le(a,P,g=>n(6,m=g));const j=()=>{p({guideId:f}).then(g=>{g.error?(console.error(g.error.message),n(4,i="Error deleting guide: "+g.error.message),n(2,$=!0)):$e(te+"/guides")})},B=()=>$e(te+"/guide/"+f+"/edit"),W=()=>P.set(!0),G=()=>P.set(!1),q=()=>j();function F(g){m=g,P.set(m)}function k(g){$=g,n(2,$)}return a.$$set=g=>{"guideId"in g&&n(0,f=g.guideId),"guide"in g&&o(n(1,d=g.guide))},a.$$.update=()=>{a.$$.dirty&520&&n(5,t=l?.roles?.deleteContent||l?.id===s?.data?.getGuide?.user?.id),a.$$.dirty&4&&($||n(4,i=""))},[f,d,$,s,i,t,m,P,j,l,B,W,G,q,F,k]}class Gt extends ne{constructor(e){super();re(this,e,ut,it,se,{guideId:0,guide:1})}}export{Gt as default,Et as load};
//# sourceMappingURL=index.svelte-a6d73c00.js.map
