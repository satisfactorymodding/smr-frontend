{"version":3,"file":"index.svelte-c43cc0e2.js","sources":["../../../../../../src/routes/new-mod/index.svelte"],"sourcesContent":["<svelte:head>\n  <title>New Mod - SMR</title>\n</svelte:head>\n\n<script lang=\"ts\">\n  import {mutation} from '@urql/svelte';\n  import {NewModDocument} from \"$lib/generated\";\n  import Toast from \"$lib/components/general/Toast.svelte\";\n  import {goto} from '$app/navigation';\n  import ModForm from \"$lib/components/mods/ModForm.svelte\";\n  import type {ModData} from \"$lib/models/mods\";\n  import {base} from \"$app/paths\";\n\n  let errorMessage = '';\n  let errorToast = false;\n\n  const newMod = mutation({\n    query: NewModDocument\n  });\n\n  const onSubmit = (data: ModData) => {\n    newMod({\n      mod: data\n    }).then(value => {\n      if (value.error) {\n        console.error(value.error.message);\n        errorMessage = 'Error creating mod: ' + value.error.message;\n        errorToast = true;\n      } else {\n        // TODO Toast or something\n        goto(base + '/mod/' + value.data.createMod.id);\n      }\n    });\n  }\n\n  $: if (!errorToast) errorMessage = '';\n</script>\n\n<h1 class=\"text-4xl my-4 font-bold\">New Mod</h1>\n\n<ModForm onSubmit={onSubmit}/>\n\n<Toast bind:running={errorToast}>\n  <span>{errorMessage}</span>\n</Toast>\n"],"names":["ctx","ctx2","errorMessage","errorToast","newMod","mutation","query","NewModDocument","mod","data","then","value","error","message","base","createMod","id"],"mappings":"opBA2CSA,8CAAAA,4DAAAC,yGAHUD,sEAEEA,iBAAAA,iFAJe,mLAAA,0TAIfC,iNA7BfC,EAAe,GACfC,GAAa,QAEXC,EAASC,GACbC,MAAOC,2CAkBDJ,OAAYD,EAAe,kBAb/BM,IAAKC,IACJC,UACGC,EAAMC,eACAA,MAAMD,EAAMC,MAAMC,aAC1BX,EAAe,uBAAyBS,EAAMC,MAAMC,aACpDV,GAAa,MAGRW,EAAO,QAAUH,EAAMF,KAAKM,UAAUC"}