{"version":3,"file":"index.svelte-bf3880eb.js","sources":["../../../../../src/routes/index.svelte"],"sourcesContent":["<svelte:head>\n  <title>Home - SMR</title>\n</svelte:head>\n\n<script lang=\"ts\" context=\"module\">\n  import {operationStore, query} from \"@urql/svelte\";\n  import {GetModCountDocument, GetModsDocument} from \"$lib/generated\";\n  import {loadWaitForNoFetch} from \"$lib/utils/gql\";\n  import {browser} from \"$app/env\";\n\n  const featuredModsQ = operationStore(\n    GetModsDocument,\n    {offset: 0, limit: 5}\n  );\n\n  const modsQ = operationStore(\n    GetModCountDocument\n  );\n\n  export const load = loadWaitForNoFetch({\n    featuredMods: featuredModsQ,\n    mods: modsQ,\n  });\n</script>\n\n<script lang=\"ts\">\n  import alertIcon from '@iconify/icons-mdi/alert.js';\n  import Icon from \"@iconify/svelte\";\n  import ModCard from \"$lib/components/mods/ModCard.svelte\";\n  import {assets, base} from '$app/paths';\n  import MenuBar from \"$lib/components/general/MenuBar.svelte\";\n  import SearchBox from \"$lib/components/general/SearchBox.svelte\";\n  import LinksBox from \"$lib/components/general/LinksBox.svelte\";\n  import ModGrid from \"$lib/components/mods/ModGrid.svelte\";\n  import Footer from \"$lib/components/general/Footer.svelte\";\n  import {goto} from '$app/navigation';\n\n  export let featuredMods!: typeof featuredModsQ;\n  export let mods!: typeof modsQ;\n\n  // TODO Fetch from backend\n  let alertMessage = '';\n\n  if (browser) {\n    query(featuredMods);\n    query(mods);\n  }\n</script>\n\n<div class=\"h-screen bg-center bg-cover fold grid\"\n     style={'background-image: url(\"' + assets + '/assets/header_bg_image.png\")'}>\n  <MenuBar/>\n  <div class=\"text-center self-center\">\n    <div class=\"header text-6xl\">\n      <span class=\"text-lime-500\">SMR</span>\n      <span>Satisfactory Mod Repository</span>\n    </div>\n    <div class=\"under-header text-3xl\">\n      <span>The unofficially official source for Satisfactory mods</span>\n    </div>\n    {#if alertMessage !== ''}\n      <div class=\"alert mt-10 bg-red-700 inline-block mx-auto p-4 shadow-md\">\n        <span><Icon icon={alertIcon} inline={true} class=\"inline-block\"/></span>\n        <span>{ alertMessage }</span>\n      </div>\n    {/if}\n  </div>\n  <div class=\"w-5/6 justify-self-center\">\n    <LinksBox/>\n    <SearchBox/>\n  </div>\n  <div class=\"grid\">\n    <div class=\"py-8 bg-black bg-opacity-70\">\n      <div class=\"w-5/6 mx-auto grid grid-flow-col mb-3\">\n        <div>\n          <span>Featured mods:</span>\n          <span class=\"text-lime-500\">Newest</span>\n        </div>\n        <div class=\"text-right\">\n          <span class=\"cursor-pointer\" on:click={() => goto(base + '/mods')}>\n            <span>Browse all</span>\n            {#if $mods.fetching}\n              <span class=\"text-lime-500\">...</span>\n            {:else if $mods.error}\n              <span class=\"text-lime-500\">Oh no... {$mods.error.message}</span>\n            {:else}\n              <span class=\"text-lime-500\">{ $mods.data.getMods.count }</span>\n            {/if}\n            <span>mods</span>\n          </span>\n        </div>\n      </div>\n      <div class=\"featured-mods w-5/6 mx-auto grid grid-flow-col gap-4\">\n        {#if $featuredMods.fetching}\n          <!-- TODO Placeholders -->\n          <p>Loading...</p>\n        {:else if $featuredMods.error}\n          <p>Oh no... {$featuredMods.error.message}</p>\n        {:else}\n          {#each $featuredMods.data.getMods.mods as mod}\n            <ModCard mod=\"{mod}\" expanded={true}/>\n          {/each}\n        {/if}\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"w-full text-center py-6 bg-lime-600 mb-8 cursor-pointer\" on:click={() => goto(base + '/mods')}>\n  {#if $mods.fetching}\n    <span class=\"text-3xl\">Browse all ... mods</span>\n  {:else if $mods.error}\n    <span class=\"text-3xl\">Oh no... {$mods.error.message}</span>\n  {:else}\n    <span class=\"text-3xl\">Browse all { $mods.data.getMods.count } mods</span>\n  {/if}\n</div>\n\n<div class=\"grid\">\n  <div class=\"w-5/6 mx-auto\">\n    <ModGrid colCount={5}/>\n  </div>\n</div>\n\n<style lang=\"postcss\">\n  .fold {\n    grid-template-rows: 50px auto 150px min-content;\n  }\n</style>\n\n<Footer/>\n"],"names":["ctx","data","getMods","count","ctx2","error","message","mods","length","alertMessage","fetching","assets","load","loadWaitForNoFetch","featuredMods","operationStore","GetModsDocument","offset","limit","GetModCountDocument","goto","base"],"mappings":"q7BAsF4CA,KAAMC,KAAKC,QAAQC,uMAAnBC,KAAMH,KAAKC,QAAQC,4DAFXH,KAAMK,MAAMC,sCAAtB,6EAAA,iIAAUF,KAAMC,MAAMC,qFAFtB,gEAAA,mIAiBzBN,KAAcC,KAAKC,QAAQK,0BAAhCC,wQAAKJ,KAAcH,KAAKC,QAAQK,aAAhCC,6HAAAA,8DAAAA,8IAFWR,KAAcK,MAAMC,mCAA9B,yDAAA,sFAAUF,KAAcC,MAAMC,0FAF9B,mDAAA,gIAKcN,eAAgB,yGAAhBI,4HAcaJ,KAAMC,KAAKC,QAAQC,oCAAhC,0BAAuC,kEAAvC,8BAAuC,sHAA1BC,KAAMH,KAAKC,QAAQC,4DAFtBH,KAAMK,MAAMC,sCAAtB,6EAAA,4HAAUF,KAAMC,MAAMC,sFAFtB,gFAAA,gTAlDD,KAAjBG,2BAqBQL,KAAMM,WAEDN,KAAMC,yGAUfD,KAAcM,WAGTN,KAAcC,kCAazBD,KAAMM,YAEDN,KAAMC,8FASK,qGAlEW,6BACtB,gEAGA,sMAiBI,2CACsB,4DAIpB,qDAQA,8YAlCgB,6DACtB,qIAGA,0YAiBI,oFACsB,4JAIpB,wFAQA,k8BAtCN,0BAA4BM,EAAS,g5CA/BlCC,GAAOC,GAClBC,aAVoBC,EACpBC,GACCC,OAAQ,EAAGC,MAAO,IASnBX,KANYQ,EACZI,SAyBEV,GAAe,6LAJRK,kBACAP,WAMHO,KACAP,8GAkC6Ca,EAAKC,EAAO,aA6BkBD,EAAKC,EAAO"}