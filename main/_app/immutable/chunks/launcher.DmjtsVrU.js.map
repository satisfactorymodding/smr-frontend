{"version":3,"file":"launcher.DmjtsVrU.js","sources":["../../../../../../src/lib/stores/launcher.ts"],"sourcesContent":["import { get, writable } from 'svelte/store';\nimport { browser } from '$app/environment';\nimport { io } from 'socket.io-client';\n\nexport const customProtocolCheck = writable<unknown | null>(null);\nexport const hasLauncher = writable<boolean>(false);\nexport const launcherOpen = writable<boolean>(false);\n\nconst connectToLauncher = () => {\n  new Promise(() => {\n    const ws = io('http://localhost:33642', {\n      transports: ['websocket']\n    });\n\n    ws.on('connect', () => {\n      hasLauncher.set(true);\n      launcherOpen.set(true);\n    });\n\n    ws.on('disconnect', () => {\n      launcherOpen.set(false);\n    });\n  }).catch(console.error);\n};\n\nconst open = (link: string, fallback?: () => void) => {\n  if (browser) {\n    new Promise(() => {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      get(customProtocolCheck).protocolCheck(link, () => {\n        hasLauncher.set(false);\n        if (fallback) {\n          fallback();\n        }\n      });\n    }).catch(console.error);\n  }\n};\n\nconst modLoaderLink = 'https://smm.ficsit.app/';\n\nexport const pingLauncher = () => {\n  open('smmanager://ping', () => {\n    window.open(modLoaderLink, '_blank');\n  });\n};\n\nexport const installMod = (modReference: string) => {\n  open('smmanager://install?modID=' + modReference, () => {\n    window.open(modLoaderLink, '_blank');\n  });\n};\n\nif (browser) {\n  connectToLauncher();\n}\n"],"names":["customProtocolCheck","writable","hasLauncher","launcherOpen","connectToLauncher","Promise","ws","io","transports","on","set","catch","console","error","open","link","fallback","get","protocolCheck","modLoaderLink","pingLauncher","window","installMod","modReference"],"mappings":"yDAIa,MAAAA,EAAsBC,EAAyB,IAC/C,EAAAC,EAAcD,EAAkB,EAChC,EAAAE,EAAeF,EAAkB,EAAA,EAExCG,EAAoB,IACxB,CAAA,IAAIC,QAAQ,IAAA,CACJ,MAAAC,EAAKC,EAAG,yBAA0B,CACtCC,WAAY,CAAC,WAGZF,CAAAA,CAAAA,EAAAA,EAAAG,GAAG,UAAW,IACfP,CAAAA,EAAYQ,IAAI,EAChBP,EAAAA,EAAaO,IAAI,EAAA,CAAI,CAGpBJ,EAAAA,EAAAG,GAAG,aAAc,IAAA,CAClBN,EAAaO,IAAI,EAAK,CAAA,CAAA,CACvB,CACAC,EAAAA,MAAMC,QAAQC,KAAAA,CAAK,EAGlBC,EAAO,CAACC,EAAcC,IACb,CACX,IAAIX,QAAQ,IAGVY,CAAAA,EAAIjB,GAAqBkB,cAAcH,EAAM,IAC3Cb,CAAAA,EAAYQ,IAAI,EAAA,EACZM,GACOA,EACX,CAAA,CAAA,CACD,CACAL,EAAAA,MAAMC,QAAQC,KAAAA,CAIrB,EAAMM,EAAgB,0BAETC,EAAe,KAC1BN,EAAK,mBAAoB,IAChBO,CAAAA,OAAAP,KAAKK,EAAe,QAAQ,CAAA,CAAA,CACpC,EAGUG,EAAcC,GAAAA,CACpBT,EAAA,6BAA+BS,EAAc,IACzCF,CAAAA,OAAAP,KAAKK,EAAe,QAAQ,CAAA,CAAA,CACpC,EAIiBf,EACpB"}