{"version":3,"file":"FicsitCard.AuM2GtIK.js","sources":["../../../../../../src/lib/components/general/FicsitCard.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { assets } from '$app/paths';\n  import { goto, preloadData } from '$app/navigation';\n  import { thumbHashToDataURL } from 'thumbhash';\n  import { fade } from 'svelte/transition';\n\n  export let name = '';\n  export let logo = assets + '/images/no_image.webp';\n  export let description = '';\n  export let link = '/';\n  export let fake = false;\n  export let thumbhash = '';\n\n  $: renderedLogo = logo || assets + '/images/no_image.webp';\n  $: renderedName = name || (fake && 'Card Name');\n  $: renderedDescription = description || (fake && 'Short card description');\n  $: renderedThumbhash = thumbhash || '2/eFDQIsFmh9h4BreKeAeQqYBxd3d3J4Jw';\n  $: thumbHashData = (() => {\n    try {\n      return thumbHashToDataURL(\n        new Uint8Array(\n          atob(renderedThumbhash)\n            .split('')\n            .map((x) => x.charCodeAt(0))\n        )\n      );\n    } catch (e) {\n      console.error(e);\n    }\n  })();\n\n  let preloaded = false;\n  let timeoutHandle: number;\n  const onOver = () => {\n    if (preloaded) {\n      return;\n    }\n\n    timeoutHandle = setTimeout(() => {\n      preloaded = true;\n      preloadData(link);\n    }, 250) as unknown as number;\n  };\n\n  const onOut = () => {\n    if (preloaded) {\n      return;\n    }\n\n    clearTimeout(timeoutHandle);\n  };\n\n  let actionButtons: HTMLElement;\n\n  let imageLoaded = false;\n  let thumbnailLoaded = false;\n\n  $: {\n    renderedLogo;\n    imageLoaded = false;\n  }\n\n  $: {\n    renderedThumbhash;\n    thumbnailLoaded = false;\n  }\n</script>\n\n<div\n  class=\"card relative h-full overflow-hidden\"\n  on:mouseover={onOver}\n  on:mouseout={onOut}\n  on:focus={onOver}\n  on:blur={onOut}\n  role=\"none\">\n  <div\n    class:text-neutral-500={fake}\n    class:font-flow={fake}\n    class=\"grid-max-auto grid grid-cols-1 justify-items-center sm:grid-cols-2\">\n    <div class=\"card-image-container cursor-pointer\">\n      <a\n        href={link}\n        on:keypress={() => goto(link)}\n        tabindex=\"0\"\n        class=\"relative block max-h-full min-h-full min-w-full max-w-full\">\n        {#if fake}\n          <div class=\"logo max-h-full min-h-full min-w-full max-w-full bg-neutral-500\" />\n        {:else}\n          <img\n            class=\"logo absolute max-h-full min-h-full min-w-full max-w-full object-contain transition-opacity delay-100 duration-200 ease-linear\"\n            class:invisible={!imageLoaded}\n            class:opacity-0={!imageLoaded}\n            src={renderedLogo}\n            alt=\"{renderedName} Logo\"\n            on:load={() => (imageLoaded = true)} />\n          {#if !imageLoaded && thumbHashData}\n            <img\n              class=\"logo absolute max-h-full min-h-full min-w-full max-w-full\"\n              class:invisible={!thumbnailLoaded}\n              src={thumbHashData}\n              alt=\"{renderedName} Logo\"\n              on:load={() => (thumbnailLoaded = true)}\n              in:fade={{ duration: 200 }}\n              out:fade={{ duration: 200, delay: 100 }} />\n          {/if}\n        {/if}\n      </a>\n    </div>\n    <div class=\"relative flex w-full flex-col justify-between\">\n      <div class=\"flex flex-col px-3 py-2 pb-0\">\n        <div class=\"mb-1.5\">\n          <a href={link} class=\"text-white\">\n            <span class=\"break-words text-xl\">{renderedName}</span>\n          </a>\n\n          <h5 class=\"m-0 text-sm\">\n            <slot name=\"stats\">\n              {#if fake}\n                <span class=\"font-flow\">Card stats</span>\n              {/if}\n            </slot>\n          </h5>\n\n          <slot name=\"tags\" />\n        </div>\n\n        <div class:font-flow={fake} style=\"word-wrap: anywhere\">\n          {renderedDescription}\n\n          <div\n            class=\"float-right\"\n            style=\"width: {(actionButtons?.clientWidth || 0) - 8}px; height: {(actionButtons?.clientHeight || 0) -\n              8}px\">\n            <!-- Placeholder for action buttons -->\n          </div>\n        </div>\n      </div>\n\n      <div\n        class=\"absolute bottom-0 right-0 flex flex-row items-center gap-1 self-end px-2 py-2 text-lg\"\n        bind:this={actionButtons}>\n        {#if !fake}\n          <a\n            href={link}\n            class=\"variant-soft-surface btn btn-sm\"\n            aria-label=\"View {renderedName}\"\n            title=\"View {renderedName}\">\n            <span class=\"material-icons\">info</span>\n          </a>\n          <slot name=\"actions\" />\n        {/if}\n      </div>\n    </div>\n  </div>\n\n  <slot name=\"outer\" />\n</div>\n\n<style lang=\"postcss\">\n  .logo {\n    border-top-left-radius: 4px;\n    border-bottom-left-radius: 4px;\n  }\n\n  @media (min-width: 1024px) {\n    .grid-max-auto {\n      grid-template-columns: max-content auto;\n    }\n  }\n</style>\n"],"names":["if_block","ctx","create_if_block_3","attr","img","img_src_value","insert_hydration","target","anchor","div","img_intro","create_in_transition","fade","duration","img_outro","create_out_transition","delay","span","create_if_block_1","a","append_hydration","create_if_block_2","create_if_block","set_style","div2","clientWidth","clientHeight","div8","div7","div0","a0","div6","div4","div1","a1","h5","div3","div5","name","$$props","logo","assets","description","link","fake","thumbhash","preloaded","timeoutHandle","onOver","setTimeout","preloadData","onOut","clearTimeout","actionButtons","imageLoaded","thumbnailLoaded","load_handler","$$invalidate","load_handler_1","keypress_handler","goto","$$value","renderedLogo","renderedName","renderedDescription","renderedThumbhash","thumbHashData","thumbHashToDataURL","Uint8Array","atob","split","map","x","charCodeAt","e","console","error"],"mappings":"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"}