import{S as ne,i as ie,s as re,e as y,V as L,a as S,c as I,d as D,G as ue,W as U,f as v,g as _,H as $,au as Q,af as R,h as pe,j as b,J as q,a4 as oe,av as ce,L as de,Y as G,aw as ge,q as J,O as me,ax as ve,k as K,t as B,l as M,m as k,Z as he,_ as $e,aa as xe,a3 as Ee,p as Te,r as be,ay as ke,u as j,U as z,az as we,C as W,F as X,I as Y,X as P,N as Z,b as ee,R as te,T as ye}from"./vendor.CjqjvYE3.js";import{g as Ie}from"./graphql.DCCO4iQ1.js";function Ve(i){let t,a,e,l="#",o=i[0].name+"",s,u,n,c,m,p,E,x=i[0].description+"",w,T,V,N;return{c(){t=y("button"),a=y("div"),e=y("span"),e.textContent=l,s=L(o),m=S(),p=y("div"),E=y("p"),w=L(x),this.h()},l(d){t=I(d,"BUTTON",{class:!0});var g=D(t);a=I(g,"DIV",{class:!0,title:!0});var C=D(a);e=I(C,"SPAN",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-sdcp3o"&&(e.textContent=l),s=U(C,o),C.forEach(v),g.forEach(v),m=_(d),p=I(d,"DIV",{class:!0,"data-popup":!0,style:!0});var r=D(p);E=I(r,"P",{class:!0});var h=D(E);w=U(h,x),h.forEach(v),r.forEach(v),this.h()},h(){$(e,"class","text-orange-500 svelte-1c06ml2"),$(a,"class","lowercase text-neutral-300 [&>*]:pointer-events-none svelte-1c06ml2"),$(a,"title",u=i[3]==="click"?"Click for tag information":""),$(t,"class",n=Q(i[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" svelte-1c06ml2"),R(t,"selected",i[2]),$(E,"class","svelte-1c06ml2"),$(p,"class","card variant-filled-surface p-4 svelte-1c06ml2"),$(p,"data-popup",T=`popupHoverFor${i[0].id}`),pe(p,"z-index","1000")},m(d,g){b(d,t,g),q(t,a),q(a,e),q(a,s),b(d,m,g),b(d,p,g),q(p,E),q(E,w),V||(N=[oe(c=ce.call(null,t,i[4])),de(t,"click",i[5])],V=!0)},p(d,[g]){g&1&&o!==(o=d[0].name+"")&&G(s,o),g&8&&u!==(u=d[3]==="click"?"Click for tag information":"")&&$(a,"title",u),g&2&&n!==(n=Q(d[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" svelte-1c06ml2")&&$(t,"class",n),c&&ge(c.update)&&g&16&&c.update.call(null,d[4]),g&6&&R(t,"selected",d[2]),g&1&&x!==(x=d[0].description+"")&&G(w,x),g&1&&T!==(T=`popupHoverFor${d[0].id}`)&&$(p,"data-popup",T)},i:J,o:J,d(d){d&&(v(t),v(m),v(p)),V=!1,me(N)}}}function De(i,t,a){let e,{tag:l}=t,{asButton:o=!1}=t,{selected:s=!1}=t,{popupTriggerEvent:u="click"}=t;function n(c){ve.call(this,i,c)}return i.$$set=c=>{"tag"in c&&a(0,l=c.tag),"asButton"in c&&a(1,o=c.asButton),"selected"in c&&a(2,s=c.selected),"popupTriggerEvent"in c&&a(3,u=c.popupTriggerEvent)},i.$$.update=()=>{i.$$.dirty&9&&a(4,e={event:u,target:`popupHoverFor${l.id}`,placement:"bottom-start"})},[l,o,s,u,e,n]}class Be extends ne{constructor(t){super(),ie(this,t,De,Ve,re,{tag:0,asButton:1,selected:2,popupTriggerEvent:3})}}function le(i,t,a){const e=i.slice();return e[21]=t[a],e}function Ce(i){let t,a=i[7]("mod.tags.title")+"",e,l,o,s,u,n,c,m,p,E,x,w,T;function V(r){i[13](r)}function N(r){i[14](r)}let d={name:"tags",chips:"variant-filled-primary"};i[5]!==void 0&&(d.input=i[5]),i[4]!==void 0&&(d.value=i[4]),s=new ke({props:d}),j.push(()=>z(s,"input",V)),j.push(()=>z(s,"value",N)),s.$on("remove",i[15]);function g(r){i[17](r)}let C={options:i[6].filter(i[16])};return i[5]!==void 0&&(C.input=i[5]),p=new we({props:C}),j.push(()=>z(p,"input",g)),p.$on("selection",i[18]),{c(){t=y("div"),e=L(a),l=S(),o=y("div"),W(s.$$.fragment),c=S(),m=y("div"),W(p.$$.fragment),this.h()},l(r){t=I(r,"DIV",{class:!0});var h=D(t);e=U(h,a),h.forEach(v),l=_(r),o=I(r,"DIV",{});var F=D(o);X(s.$$.fragment,F),F.forEach(v),c=_(r),m=I(r,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var H=D(m);X(p.$$.fragment,H),H.forEach(v),this.h()},h(){$(t,"class","mb-2"),$(m,"class","card max-h-48 w-max max-w-full overflow-y-auto p-4"),$(m,"tabindex","-1"),$(m,"data-popup","popupAutocomplete")},m(r,h){b(r,t,h),q(t,e),b(r,l,h),b(r,o,h),Y(s,o,null),b(r,c,h),b(r,m,h),Y(p,m,null),x=!0,w||(T=oe(ce.call(null,o,i[9])),w=!0)},p(r,h){(!x||h&128)&&a!==(a=r[7]("mod.tags.title")+"")&&G(e,a);const F={};!u&&h&32&&(u=!0,F.input=r[5],P(()=>u=!1)),!n&&h&16&&(n=!0,F.value=r[4],P(()=>n=!1)),s.$set(F);const H={};h&80&&(H.options=r[6].filter(r[16])),!E&&h&32&&(E=!0,H.input=r[5],P(()=>E=!1)),p.$set(H)},i(r){x||(k(s.$$.fragment,r),k(p.$$.fragment,r),x=!0)},o(r){B(s.$$.fragment,r),B(p.$$.fragment,r),x=!1},d(r){r&&(v(t),v(l),v(o),v(c),v(m)),Z(s),Z(p),w=!1,T()}}}function Fe(i){let t,a,e=i[0]&&i[0].length>0&&ae(i);return{c(){e&&e.c(),t=ee()},l(l){e&&e.l(l),t=ee()},m(l,o){e&&e.m(l,o),b(l,t,o),a=!0},p(l,o){l[0]&&l[0].length>0?e?(e.p(l,o),o&1&&k(e,1)):(e=ae(l),e.c(),k(e,1),e.m(t.parentNode,t)):e&&(K(),B(e,1,1,()=>{e=null}),M())},i(l){a||(k(e),a=!0)},o(l){B(e),a=!1},d(l){l&&v(t),e&&e.d(l)}}}function ae(i){let t,a,e=te(i[0]),l=[];for(let s=0;s<e.length;s+=1)l[s]=se(le(i,e,s));const o=s=>B(l[s],1,1,()=>{l[s]=null});return{c(){t=y("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){t=I(s,"DIV",{class:!0});var u=D(t);for(let n=0;n<l.length;n+=1)l[n].l(u);u.forEach(v),this.h()},h(){$(t,"class","text-md flex flex-row flex-wrap gap-1")},m(s,u){b(s,t,u);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,null);a=!0},p(s,u){if(u&9){e=te(s[0]);let n;for(n=0;n<e.length;n+=1){const c=le(s,e,n);l[n]?(l[n].p(c,u),k(l[n],1)):(l[n]=se(c),l[n].c(),k(l[n],1),l[n].m(t,null))}for(K(),n=e.length;n<l.length;n+=1)o(n);M()}},i(s){if(!a){for(let u=0;u<e.length;u+=1)k(l[u]);a=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)B(l[u]);a=!1},d(s){s&&v(t),ye(l,s)}}}function se(i){let t,a;return t=new Be({props:{tag:i[21],popupTriggerEvent:i[3]}}),{c(){W(t.$$.fragment)},l(e){X(t.$$.fragment,e)},m(e,l){Y(t,e,l),a=!0},p(e,l){const o={};l&1&&(o.tag=e[21]),l&8&&(o.popupTriggerEvent=e[3]),t.$set(o)},i(e){a||(k(t.$$.fragment,e),a=!0)},o(e){B(t.$$.fragment,e),a=!1},d(e){Z(t,e)}}}function He(i){let t,a,e,l;const o=[Fe,Ce],s=[];function u(n,c){return n[2]?1:0}return a=u(i),e=s[a]=o[a](i),{c(){t=y("div"),e.c(),this.h()},l(n){t=I(n,"DIV",{class:!0});var c=D(t);e.l(c),c.forEach(v),this.h()},h(){$(t,"class","tags")},m(n,c){b(n,t,c),s[a].m(t,null),l=!0},p(n,[c]){let m=a;a=u(n),a===m?s[a].p(n,c):(K(),B(s[m],1,1,()=>{s[m]=null}),M(),e=s[a],e?e.p(n,c):(e=s[a]=o[a](n),e.c()),k(e,1),e.m(t,null))},i(n){l||(k(e),l=!0)},o(n){B(e),l=!1},d(n){n&&v(t),s[a].d()}}}function Ne(i,t,a){let e,l,o,s=J,u=()=>(s(),s=be(n,f=>a(7,o=f)),n);i.$$.on_destroy.push(()=>s());const{t:n}=he();u();const c=$e(),m=xe({query:Ie,client:c,variables:{limit:100}});Ee(i,m,f=>a(12,l=f));let{tags:p=[]}=t,{editable:E=!1}=t,{popupTriggerEvent:x="click"}=t;const w={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let T=[];const V=()=>a(4,T=p.map(f=>f.name));Te(V);const N=f=>{const A=l.data?.getTags?.find(O=>O.id==f.value);a(0,p=[...p,{id:f.value,name:A?.name,description:A?.description}]),V()},d=f=>{const A=p.findIndex(O=>O.name===f);a(0,p=[...p.slice(0,A),...p.slice(A+1)]),V()};let g="";function C(f){g=f,a(5,g)}function r(f){T=f,a(4,T)}const h=f=>d(f.detail.chipValue),F=f=>T.indexOf(f.name)<0;function H(f){g=f,a(5,g)}const fe=f=>N(f.detail);return i.$$set=f=>{"tags"in f&&a(0,p=f.tags),"editable"in f&&a(2,E=f.editable),"popupTriggerEvent"in f&&a(3,x=f.popupTriggerEvent)},i.$$.update=()=>{i.$$.dirty&4096&&a(6,e=l.data?.getTags?.map(f=>({label:`${f.name} - ${f.description}`,value:f.id,name:f.name}))||[])},[p,n,E,x,T,g,e,o,m,w,N,d,l,C,r,h,F,H,fe]}class Oe extends ne{constructor(t){super(),ie(this,t,Ne,He,re,{t:1,tags:0,editable:2,popupTriggerEvent:3})}get t(){return this.$$.ctx[1]}}export{Oe as T,Be as a};
//# sourceMappingURL=TagList.RD14bl_C.js.map
