import{S as Z,i as tt,s as et,b as H,a as P,e as b,Y as at,f,g as V,c as y,d as S,K as q,A as M,M as G,j as I,N as st,m as T,t as _,l as z,C as rt,G as it,ae as nt,D as ot,I as U,J as Y,L as W,O as X,k as A,q as w,r as lt,a7 as K,a0 as J,P as Q,Q as F,R as ut}from"../chunks/vendor.C9t1ZX-H.js";import{l as dt,m as ct}from"../chunks/graphql.CfvMSMJ1.js";import{G as ft}from"../chunks/GuideForm.CIfc6Z2D.js";import{M as gt}from"../chunks/MetaDescriptors.DhabOU7J.js";const mt=async({params:i})=>({...i}),kt=Object.freeze(Object.defineProperty({__proto__:null,load:mt},Symbol.toStringTag,{value:"Module"}));function R(i){let e,r;return e=new gt({props:{description:"Editing guide '"+i[1].data.getGuide.short_description+"'",title:"Edit guide '"+i[1].data.getGuide.name+"'"}}),{c(){U(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){W(e,t,a),r=!0},p(t,a){const n={};a&2&&(n.description="Editing guide '"+t[1].data.getGuide.short_description+"'"),a&2&&(n.title="Edit guide '"+t[1].data.getGuide.name+"'"),e.$set(n)},i(t){r||(T(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){X(e,t)}}}function pt(i){let e,r;return e=new ft({props:{onSubmit:i[2],initialValues:i[1].data.getGuide,submitText:"Save",submitIcon:"save"}}),{c(){U(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,a){W(e,t,a),r=!0},p(t,a){const n={};a&2&&(n.initialValues=t[1].data.getGuide),e.$set(n)},i(t){r||(T(e.$$.fragment,t),r=!0)},o(t){_(e.$$.fragment,t),r=!1},d(t){X(e,t)}}}function ht(i){let e,r,t=i[1].error.message+"",a;return{c(){e=b("p"),r=Q("Oh no... "),a=Q(t)},l(n){e=y(n,"P",{});var l=S(e);r=F(l,"Oh no... "),a=F(l,t),l.forEach(f)},m(n,l){I(n,e,l),G(e,r),G(e,a)},p(n,l){l&2&&t!==(t=n[1].error.message+"")&&ut(a,t)},i:w,o:w,d(n){n&&f(e)}}}function $t(i){let e,r="Loading...";return{c(){e=b("p"),e.textContent=r},l(t){e=y(t,"P",{"data-svelte-h":!0}),q(e)!=="svelte-qdsr2u"&&(e.textContent=r)},m(t,a){I(t,e,a)},p:w,i:w,o:w,d(t){t&&f(e)}}}function vt(i){let e,r,t,a,n="Edit Guide",l,E,g,O=`<span class="material-icons pr-2">arrow_back</span>
      Back to Guide`,x,p,h,u,d,C,m,k,o=!i[1].fetching&&!i[1].error&&i[1].data.getGuide&&R(i);const D=[$t,ht,pt],$=[];function L(s,c){return s[1].fetching?0:s[1].error?1:2}return u=L(i),d=$[u]=D[u](i),{c(){o&&o.c(),e=H(),r=P(),t=b("div"),a=b("h1"),a.textContent=n,l=P(),E=b("div"),g=b("button"),g.innerHTML=O,x=P(),p=b("div"),h=b("section"),d.c(),this.h()},l(s){const c=at("svelte-2z35li",document.head);o&&o.l(c),e=H(),c.forEach(f),r=V(s),t=y(s,"DIV",{class:!0});var v=S(t);a=y(v,"H1",{class:!0,"data-svelte-h":!0}),q(a)!=="svelte-1alq187"&&(a.textContent=n),l=V(v),E=y(v,"DIV",{});var j=S(E);g=y(j,"BUTTON",{class:!0,"data-svelte-h":!0}),q(g)!=="svelte-s0syem"&&(g.innerHTML=O),j.forEach(f),v.forEach(f),x=V(s),p=y(s,"DIV",{class:!0});var B=S(p);h=y(B,"SECTION",{});var N=S(h);d.l(N),N.forEach(f),B.forEach(f),this.h()},h(){M(a,"class","my-4 text-4xl font-bold"),M(g,"class","variant-ghost-primary btn"),M(t,"class","flex h-auto flex-wrap items-center justify-between"),M(p,"class","card p-4")},m(s,c){o&&o.m(document.head,null),G(document.head,e),I(s,r,c),I(s,t,c),G(t,a),G(t,l),G(t,E),G(E,g),I(s,x,c),I(s,p,c),G(p,h),$[u].m(h,null),C=!0,m||(k=st(g,"click",i[7]),m=!0)},p(s,[c]){!s[1].fetching&&!s[1].error&&s[1].data.getGuide?o?(o.p(s,c),c&2&&T(o,1)):(o=R(s),o.c(),T(o,1),o.m(e.parentNode,e)):o&&(A(),_(o,1,1,()=>{o=null}),z());let v=u;u=L(s),u===v?$[u].p(s,c):(A(),_($[v],1,1,()=>{$[v]=null}),z(),d=$[u],d?d.p(s,c):(d=$[u]=D[u](s),d.c()),T(d,1),d.m(h,null))},i(s){C||(T(o),T(d),C=!0)},o(s){_(o),_(d),C=!1},d(s){s&&(f(r),f(t),f(x),f(p)),o&&o.d(s),f(e),$[u].d(),m=!1,k()}}}function bt(i,e,r){let t,a,n,l=w,E=()=>(l(),l=lt(a,m=>r(1,n=m)),a);i.$$.on_destroy.push(()=>l());let{data:g}=e;const O=rt(),x=it(),p=m=>{O.mutation(ct,{guideId:t,guide:m}).toPromise().then(k=>{k.error?(console.error(k.error.message),x.trigger({message:"Error editing guide: "+k.error.message,background:"variant-filled-error",autohide:!1})):(x.trigger({message:"Guide updated",background:"variant-filled-success",timeout:5e3}),K(J+"/guide/"+k.data.updateGuide.id))})},h=()=>{K(J+"/guide/"+t)},u={type:"confirm",title:"Go Back?",buttonTextCancel:"Keep Editing",buttonTextConfirm:"Go Back",body:"Going back will discard any unsaved changes. Are you sure you wish to continue?",response:m=>{m&&h()}},d=nt(),C=()=>d.trigger(u);return i.$$set=m=>{"data"in m&&r(5,g=m.data)},i.$$.update=()=>{i.$$.dirty&32&&r(6,{guideId:t}=g,t),i.$$.dirty&64&&E(r(0,a=ot({query:dt,client:O,variables:{guide:t}})))},[a,n,p,u,d,g,t,C]}class Tt extends Z{constructor(e){super(),tt(this,e,bt,vt,et,{data:5})}}export{Tt as component,kt as universal};
//# sourceMappingURL=12.DVwb_d8k.js.map
