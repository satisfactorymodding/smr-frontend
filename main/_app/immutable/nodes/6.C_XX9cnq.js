import{S as re,i as ie,s as oe,e as y,a as I,c as b,G as D,g as w,d as A,f as p,H as x,j as $,t as F,l as _,m as H,_ as ce,aa as ue,a3 as fe,a0 as de,k as Q,u as G,ab as ge,C as X,F as Z,I as ee,J as C,L as E,N as te,V as R,W as z,Y as ae,q as M,R as J,b as K,T as me,ac as he,K as S,O as pe}from"../chunks/vendor.CjqjvYE3.js";import{g as ve,h as $e,i as Te,j as xe}from"../chunks/graphql.DCCO4iQ1.js";function W(r,e,l){const n=r.slice();return n[19]=e[l],n[20]=e,n[21]=l,n}function ye(r){let e,l,n,t,s='<span>Add new tag</span> <span class="material-icons">add</span>',a,i,c;return e=new ge({props:{$$slots:{default:[Ie]},$$scope:{ctx:r}}}),{c(){X(e.$$.fragment),l=I(),n=y("section"),t=y("button"),t.innerHTML=s,this.h()},l(u){Z(e.$$.fragment,u),l=w(u),n=b(u,"SECTION",{class:!0});var g=A(n);t=b(g,"BUTTON",{class:!0,"data-svelte-h":!0}),D(t)!=="svelte-rv47m0"&&(t.innerHTML=s),g.forEach(p),this.h()},h(){x(t,"class","variant-ghost-primary btn"),x(n,"class","p-4")},m(u,g){ee(e,u,g),$(u,l,g),$(u,n,g),C(n,t),a=!0,i||(c=E(t,"click",r[5]),i=!0)},p(u,g){const f={};g&4194318&&(f.$$scope={dirty:g,ctx:u}),e.$set(f)},i(u){a||(H(e.$$.fragment,u),a=!0)},o(u){F(e.$$.fragment,u),a=!1},d(u){u&&(p(l),p(n)),te(e,u),i=!1,c()}}}function be(r){let e,l,n=r[0].error.message+"",t;return{c(){e=y("h1"),l=R("Failed to load tags: "),t=R(n),this.h()},l(s){e=b(s,"H1",{class:!0});var a=A(e);l=z(a,"Failed to load tags: "),t=z(a,n),a.forEach(p),this.h()},h(){x(e,"class","svelte-1egakhm")},m(s,a){$(s,e,a),C(e,l),C(e,t)},p(s,a){a&1&&n!==(n=s[0].error.message+"")&&ae(t,n)},i:M,o:M,d(s){s&&p(e)}}}function ke(r){let e,l="Loading tags...";return{c(){e=y("h1"),e.textContent=l,this.h()},l(n){e=b(n,"H1",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-ud4eq5"&&(e.textContent=l),this.h()},h(){x(e,"class","svelte-1egakhm")},m(n,t){$(n,e,t)},p:M,i:M,o:M,d(n){n&&p(e)}}}function Ce(r){let e=r[19].name+"",l;return{c(){l=R(e)},l(n){l=z(n,e)},m(n,t){$(n,l,t)},p(n,t){t&2&&e!==(e=n[19].name+"")&&ae(l,e)},d(n){n&&p(l)}}}function Ne(r){let e,l,n="Tag name",t,s,a=r[19],i,c,u="Tag description",g,f,m,T,L="Human-Readable name and description of the tag that is shown in UI",O,k,U="<span>Delete</span>",P,q,V;function B(){r[8].call(s,r[20],r[21])}const o=()=>r[9](s,a),d=()=>r[9](null,a);function N(){return r[10](r[19])}function ne(){r[11].call(f,r[20],r[21])}function se(){return r[12](r[19])}function le(...h){return r[13](r[19],...h)}return{c(){e=y("div"),l=y("div"),l.textContent=n,t=I(),s=y("input"),i=I(),c=y("div"),c.textContent=u,g=I(),f=y("input"),m=I(),T=y("span"),T.textContent=L,O=I(),k=y("button"),k.innerHTML=U,P=I(),this.h()},l(h){e=b(h,"DIV",{});var v=A(e);l=b(v,"DIV",{"data-svelte-h":!0}),D(l)!=="svelte-xcwwft"&&(l.textContent=n),t=w(v),s=b(v,"INPUT",{type:!0,class:!0,placeholder:!0}),i=w(v),c=b(v,"DIV",{"data-svelte-h":!0}),D(c)!=="svelte-1256uzk"&&(c.textContent=u),g=w(v),f=b(v,"INPUT",{type:!0,class:!0,placeholder:!0}),v.forEach(p),m=w(h),T=b(h,"SPAN",{slot:!0,"data-svelte-h":!0}),D(T)!=="svelte-2kgxo4"&&(T.textContent=L),O=w(h),k=b(h,"BUTTON",{class:!0,"data-svelte-h":!0}),D(k)!=="svelte-47guuq"&&(k.innerHTML=U),P=w(h),this.h()},h(){x(s,"type","text"),x(s,"class","input p-2"),x(s,"placeholder","Name"),x(f,"type","text"),x(f,"class","input p-2"),x(f,"placeholder","Description"),x(T,"slot","helper"),x(k,"class","variant-ghost-error btn")},m(h,v){$(h,e,v),C(e,l),C(e,t),C(e,s),S(s,r[19].name),o(),C(e,i),C(e,c),C(e,g),C(e,f),S(f,r[19].description),$(h,m,v),$(h,T,v),$(h,O,v),$(h,k,v),$(h,P,v),q||(V=[E(s,"input",B),E(s,"change",N),E(f,"input",ne),E(f,"change",se),E(k,"click",le)],q=!0)},p(h,v){r=h,v&2&&s.value!==r[19].name&&S(s,r[19].name),a!==r[19]&&(d(),a=r[19],o()),v&2&&f.value!==r[19].description&&S(f,r[19].description)},d(h){h&&(p(e),p(m),p(T),p(O),p(k),p(P)),d(),q=!1,pe(V)}}}function Y(r){let e,l=r[19],n;const t=()=>r[14](e,l),s=()=>r[14](null,l);let a={$$slots:{content:[Ne],summary:[Ce]},$$scope:{ctx:r}};return e=new he({props:a}),t(),{c(){X(e.$$.fragment)},l(i){Z(e.$$.fragment,i)},m(i,c){ee(e,i,c),n=!0},p(i,c){l!==i[19]&&(s(),l=i[19],t());const u={};c&4194314&&(u.$$scope={dirty:c,ctx:i}),e.$set(u)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){s(),te(e,i)}}}function Ie(r){let e,l,n=J(r[1]),t=[];for(let a=0;a<n.length;a+=1)t[a]=Y(W(r,n,a));const s=a=>F(t[a],1,1,()=>{t[a]=null});return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=K()},l(a){for(let i=0;i<t.length;i+=1)t[i].l(a);e=K()},m(a,i){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(a,i);$(a,e,i),l=!0},p(a,i){if(i&206){n=J(a[1]);let c;for(c=0;c<n.length;c+=1){const u=W(a,n,c);t[c]?(t[c].p(u,i),H(t[c],1)):(t[c]=Y(u),t[c].c(),H(t[c],1),t[c].m(e.parentNode,e))}for(Q(),c=n.length;c<t.length;c+=1)s(c);_()}},i(a){if(!l){for(let i=0;i<n.length;i+=1)H(t[i]);l=!0}},o(a){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)F(t[i]);l=!1},d(a){a&&p(e),me(t,a)}}}function we(r){let e,l="Mod Tag Manager",n,t,s,a,i;const c=[ke,be,ye],u=[];function g(f,m){return f[0].fetching?0:f[0].error?1:2}return s=g(r),a=u[s]=c[s](r),{c(){e=y("h1"),e.textContent=l,n=I(),t=y("div"),a.c(),this.h()},l(f){e=b(f,"H1",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-eejrrv"&&(e.textContent=l),n=w(f),t=b(f,"DIV",{class:!0});var m=A(t);a.l(m),m.forEach(p),this.h()},h(){x(e,"class","svelte-1egakhm"),x(t,"class","card")},m(f,m){$(f,e,m),$(f,n,m),$(f,t,m),u[s].m(t,null),i=!0},p(f,[m]){let T=s;s=g(f),s===T?u[s].p(f,m):(Q(),F(u[T],1,1,()=>{u[T]=null}),_(),a=u[s],a?a.p(f,m):(a=u[s]=c[s](f),a.c()),H(a,1),a.m(t,null))},i(f){i||(H(a),i=!0)},o(f){F(a),i=!1},d(f){f&&(p(e),p(n),p(t)),u[s].d()}}}const j="New Tag";function De(r,e,l){let n;const t=ce();let s=[];const a={},i={};let c=-1;const u=ue({query:ve,client:t,variables:{limit:100}});fe(r,u,o=>l(0,n=o));const g=de();function f(){if(s.find(o=>o.name==j))a[s[s.length-1].id].setOpen(!0),i[s[s.length-1].id].focus();else{const o={id:c--,name:j,description:"Description"};s.push(o),l(1,s),l(0,n),setTimeout(()=>{a[o.id].setOpen(!0);const d=i[o.id];d.focus(),d.getElement().querySelectorAll("input")[0].select()},0)}}async function m(o){if(o.name==j)return;let d=!1;if(o.id<0){try{const N=await t.mutation($e,{tagName:o.name,description:o.description}).toPromise();N.data&&(o.id=N.data.createTag.id,d=!0)}catch(N){console.log(N)}if(!d){g.trigger({message:`Failed to create Tag '${o.name}'!`,background:"variant-filled-error",timeout:2e3});return}}else{try{d=(await t.mutation(Te,{tagID:o.id,tagName:o.name,description:o.description}).toPromise()).data.updateTag!=null}catch{}if(!d){g.trigger({message:`Failed to update Tag '${o.name}'!`,background:"variant-filled-error",timeout:2e3});return}}g.trigger({message:`Tag '${o.name}' saved!`,background:"variant-filled-success",timeout:2e3})}async function T(o){if(o.name!=j){let d=!1;try{d=(await t.mutation(xe,{tagID:o.id}).toPromise()).data.deleteTag}catch{d=!1}if(!d){g.trigger({message:`Failed to remove Tag '${o.name}'!`,background:"variant-filled-error",timeout:2e3});return}}else s.splice(s.indexOf(o),1);g.trigger({message:`Tag '${o.name}' removed!`,background:"variant-filled-success",timeout:2e3})}function L(o,d){o.stopPropagation(),T(d)}function O(o,d){o[d].name=this.value,l(1,s),l(0,n)}function k(o,d){G[o?"unshift":"push"](()=>{i[d.id]=o,l(3,i)})}const U=o=>m(o);function P(o,d){o[d].description=this.value,l(1,s),l(0,n)}const q=o=>m(o),V=(o,d)=>L(d,o);function B(o,d){G[o?"unshift":"push"](()=>{a[d.id]=o,l(2,a)})}return r.$$.update=()=>{r.$$.dirty&1&&l(1,s=n.data?.getTags||[])},[n,s,a,i,u,f,m,L,O,k,U,P,q,V,B]}class Pe extends re{constructor(e){super(),ie(this,e,De,we,oe,{})}}export{Pe as component};
//# sourceMappingURL=6.C_XX9cnq.js.map
