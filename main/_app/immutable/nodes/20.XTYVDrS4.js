import{S as Z,i as ee,s as te,b as P,a as D,e as b,C as re,f as u,g as G,c as y,d as O,F as M,G as B,I as E,j as C,W as se,m as k,t as I,l as N,K as ne,X as ae,ae as oe,L as ie,A as W,D as X,H as Y,J as Q,k as A,q as _,r as le,Y as K,O as R,T as U,U as F,V as de}from"../chunks/vendor.SWZNLjM7.js";import{t as ce,u as fe}from"../chunks/graphql.XSrPrpK2.js";import{V as ue}from"../chunks/VersionForm.PuJVxDG8.js";import{M as me}from"../chunks/MetaDescriptors.pGERfFUb.js";const ge=async({params:s})=>({...s}),ke=Object.freeze(Object.defineProperty({__proto__:null,load:ge},Symbol.toStringTag,{value:"Module"}));function J(s){let t,a;return t=new me({props:{description:"Editing mod version "+s[0].data.getVersion.mod.name+" "+s[0].data.getVersion.version,title:"Edit mod version "+s[0].data.getVersion.mod.name+" "+s[0].data.getVersion.version}}),{c(){W(t.$$.fragment)},l(e){X(t.$$.fragment,e)},m(e,r){Y(t,e,r),a=!0},p(e,r){const i={};r&1&&(i.description="Editing mod version "+e[0].data.getVersion.mod.name+" "+e[0].data.getVersion.version),r&1&&(i.title="Edit mod version "+e[0].data.getVersion.mod.name+" "+e[0].data.getVersion.version),t.$set(i)},i(e){a||(k(t.$$.fragment,e),a=!0)},o(e){I(t.$$.fragment,e),a=!1},d(e){Q(t,e)}}}function pe(s){let t,a;return t=new ue({props:{onSubmit:s[3],initialValues:s[1],modReference:s[0].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save",submitIcon:"save"}}),{c(){W(t.$$.fragment)},l(e){X(t.$$.fragment,e)},m(e,r){Y(t,e,r),a=!0},p(e,r){const i={};r&2&&(i.initialValues=e[1]),r&1&&(i.modReference=e[0].data.getVersion.mod.mod_reference),t.$set(i)},i(e){a||(k(t.$$.fragment,e),a=!0)},o(e){I(t.$$.fragment,e),a=!1},d(e){Q(t,e)}}}function ve(s){let t,a,e=s[0].error.message+"",r;return{c(){t=b("p"),a=U("Oh no... "),r=U(e)},l(i){t=y(i,"P",{});var l=O(t);a=F(l,"Oh no... "),r=F(l,e),l.forEach(u)},m(i,l){C(i,t,l),E(t,a),E(t,r)},p(i,l){l&1&&e!==(e=i[0].error.message+"")&&de(r,e)},i:_,o:_,d(i){i&&u(t)}}}function he(s){let t,a="Loading...";return{c(){t=b("p"),t.textContent=a},l(e){t=y(e,"P",{"data-svelte-h":!0}),M(t)!=="svelte-qdsr2u"&&(t.textContent=a)},m(e,r){C(e,t,r)},p:_,i:_,o:_,d(e){e&&u(t)}}}function $e(s){let t,a,e,r,i="Edit Version",l,g,m,S=`<span class="material-icons pr-2">arrow_back</span>
      Back to Versions`,h,p,v,d,c,x,w,j,n=!s[0].fetching&&!s[0].error&&s[0].data.getVersion&&J(s);const T=[he,ve,pe],$=[];function q(o,f){return o[0].fetching?0:o[0].error?1:2}return d=q(s),c=$[d]=T[d](s),{c(){n&&n.c(),t=P(),a=D(),e=b("div"),r=b("h1"),r.textContent=i,l=D(),g=b("div"),m=b("button"),m.innerHTML=S,h=D(),p=b("div"),v=b("section"),c.c(),this.h()},l(o){const f=re("svelte-wzsk0g",document.head);n&&n.l(f),t=P(),f.forEach(u),a=G(o),e=y(o,"DIV",{class:!0});var V=O(e);r=y(V,"H1",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-142h57n"&&(r.textContent=i),l=G(V),g=y(V,"DIV",{});var z=O(g);m=y(z,"BUTTON",{class:!0,"data-svelte-h":!0}),M(m)!=="svelte-1wwz687"&&(m.innerHTML=S),z.forEach(u),V.forEach(u),h=G(o),p=y(o,"DIV",{class:!0});var H=O(p);v=y(H,"SECTION",{});var L=O(v);c.l(L),L.forEach(u),H.forEach(u),this.h()},h(){B(r,"class","my-4 text-4xl font-bold"),B(m,"class","variant-ghost-primary btn"),B(e,"class","flex h-auto flex-wrap items-center justify-between"),B(p,"class","card p-4")},m(o,f){n&&n.m(document.head,null),E(document.head,t),C(o,a,f),C(o,e,f),E(e,r),E(e,l),E(e,g),E(g,m),C(o,h,f),C(o,p,f),E(p,v),$[d].m(v,null),x=!0,w||(j=se(m,"click",s[8]),w=!0)},p(o,[f]){!o[0].fetching&&!o[0].error&&o[0].data.getVersion?n?(n.p(o,f),f&1&&k(n,1)):(n=J(o),n.c(),k(n,1),n.m(t.parentNode,t)):n&&(A(),I(n,1,1,()=>{n=null}),N());let V=d;d=q(o),d===V?$[d].p(o,f):(A(),I($[V],1,1,()=>{$[V]=null}),N(),c=$[d],c?c.p(o,f):(c=$[d]=T[d](o),c.c()),k(c,1),c.m(v,null))},i(o){x||(k(n),k(c),x=!0)},o(o){I(n),I(c),x=!1},d(o){o&&(u(a),u(e),u(h),u(p)),n&&n.d(o),u(t),$[d].d(),w=!1,j()}}}function Ve(s,t,a){let e,r,i,l,g,m=_,S=()=>(m(),m=le(i,n=>a(0,g=n)),i);s.$$.on_destroy.push(()=>m());let{data:h}=t;const p=ne(),v=ae(),d=async n=>p.mutation(fe,{versionId:r,version:n}).toPromise().then(T=>{if(T.error)console.error(T.error.message),v.trigger({message:"Error editing version: "+T.error.message,background:"variant-filled-error",autohide:!1});else return v.trigger({message:"Version updated",background:"variant-filled-success",timeout:5e3}),K(R+"/mod/"+e+"/version/"+r)}),c=()=>{K(R+"/mod/"+e+"/version/"+r)},x={type:"confirm",title:"Go Back?",buttonTextCancel:"Keep Editing",buttonTextConfirm:"Go Back",body:"Going back will discard any unsaved changes. Are you sure you wish to continue?",response:n=>{n&&c()}},w=oe(),j=()=>w.trigger(x);return s.$$set=n=>{"data"in n&&a(6,h=n.data)},s.$$.update=()=>{s.$$.dirty&64&&a(7,{modId:e,versionId:r}=h,r),s.$$.dirty&128&&S(a(2,i=ie({query:ce,client:p,variables:{version:r}}))),s.$$.dirty&1&&a(1,l=g.data?{...g.data.getVersion,logo:void 0}:void 0)},[g,l,i,d,x,w,h,r,j]}class we extends Z{constructor(t){super(),ee(this,t,Ve,$e,te,{data:6})}}export{we as component,ke as universal};
//# sourceMappingURL=20.XTYVDrS4.js.map
