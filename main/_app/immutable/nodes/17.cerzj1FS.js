import{S as F,i as G,s as J,b as k,a as q,e as x,C as K,f as c,g as j,c as y,F as H,d as O,G as P,I as M,j as b,m as $,t as E,l as T,K as U,X,L as Y,Z,A as L,D as N,H as z,J as A,k as V,aa as B,Y as Q,O as R,T as _,U as w,V as W,q as C}from"../chunks/vendor.SWZNLjM7.js";import{q as tt,r as et}from"../chunks/graphql.XSrPrpK2.js";import{M as at}from"../chunks/ModForm.9dVllqc0.js";import{M as rt}from"../chunks/MetaDescriptors.pGERfFUb.js";const ot=async({params:s})=>({...s}),gt=Object.freeze(Object.defineProperty({__proto__:null,load:ot},Symbol.toStringTag,{value:"Module"}));function D(s){let e,o;return e=new rt({props:{description:"Editing mod "+s[0].data.mod.name,title:"Edit mod "+s[0].data.mod.name,image:s[0].data.mod.logo}}),{c(){L(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,n){z(e,t,n),o=!0},p(t,n){const i={};n&1&&(i.description="Editing mod "+t[0].data.mod.name),n&1&&(i.title="Edit mod "+t[0].data.mod.name),n&1&&(i.image=t[0].data.mod.logo),e.$set(i)},i(t){o||($(e.$$.fragment,t),o=!0)},o(t){E(e.$$.fragment,t),o=!1},d(t){A(e,t)}}}function st(s){let e,o;return e=new at({props:{onSubmit:s[3],initialValues:s[1],editing:!0,submitText:"Save"}}),{c(){L(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,n){z(e,t,n),o=!0},p(t,n){const i={};n&2&&(i.initialValues=t[1]),e.$set(i)},i(t){o||($(e.$$.fragment,t),o=!0)},o(t){E(e.$$.fragment,t),o=!1},d(t){A(e,t)}}}function nt(s){let e,o,t=s[0].error.message+"",n;return{c(){e=x("p"),o=_("Oh no... "),n=_(t)},l(i){e=y(i,"P",{});var d=O(e);o=w(d,"Oh no... "),n=w(d,t),d.forEach(c)},m(i,d){b(i,e,d),M(e,o),M(e,n)},p(i,d){d&1&&t!==(t=i[0].error.message+"")&&W(n,t)},i:C,o:C,d(i){i&&c(e)}}}function it(s){let e,o="Loading...";return{c(){e=x("p"),e.textContent=o},l(t){e=y(t,"P",{"data-svelte-h":!0}),H(e)!=="svelte-qdsr2u"&&(e.textContent=o)},m(t,n){b(t,e,n)},p:C,i:C,o:C,d(t){t&&c(e)}}}function dt(s){let e,o,t,n="Edit Mod",i,d,u,m,l,h,a=!s[0].fetching&&!s[0].error&&s[0].data.mod&&D(s);const p=[it,nt,st],g=[];function S(r,f){return r[0].fetching?0:r[0].error?1:2}return m=S(s),l=g[m]=p[m](s),{c(){a&&a.c(),e=k(),o=q(),t=x("h1"),t.textContent=n,i=q(),d=x("div"),u=x("section"),l.c(),this.h()},l(r){const f=K("svelte-q8g25b",document.head);a&&a.l(f),e=k(),f.forEach(c),o=j(r),t=y(r,"H1",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1bmvkg7"&&(t.textContent=n),i=j(r),d=y(r,"DIV",{class:!0});var v=O(d);u=y(v,"SECTION",{});var I=O(u);l.l(I),I.forEach(c),v.forEach(c),this.h()},h(){P(t,"class","my-4 text-4xl font-bold"),P(d,"class","card p-4")},m(r,f){a&&a.m(document.head,null),M(document.head,e),b(r,o,f),b(r,t,f),b(r,i,f),b(r,d,f),M(d,u),g[m].m(u,null),h=!0},p(r,[f]){!r[0].fetching&&!r[0].error&&r[0].data.mod?a?(a.p(r,f),f&1&&$(a,1)):(a=D(r),a.c(),$(a,1),a.m(e.parentNode,e)):a&&(V(),E(a,1,1,()=>{a=null}),T());let v=m;m=S(r),m===v?g[m].p(r,f):(V(),E(g[v],1,1,()=>{g[v]=null}),T(),l=g[m],l?l.p(r,f):(l=g[m]=p[m](r),l.c()),$(l,1),l.m(u,null))},i(r){h||($(a),$(l),h=!0)},o(r){E(a),E(l),h=!1},d(r){r&&(c(o),c(t),c(i),c(d)),a&&a.d(r),c(e),g[m].d()}}}function lt(s,e,o){let t,n,{data:i}=e;const{modId:d}=i,u=U(),m=X(),l=Y({query:tt,client:u,variables:{mod:d}});Z(s,l,a=>o(0,n=a));const h=a=>{u.mutation(et,{modId:B(l).data.mod.id,mod:a}).toPromise().then(p=>{p.error?(console.error(p.error.message),m.trigger({message:"Error editing mod: "+p.error.message,background:"variant-filled-error",autohide:!1})):(m.trigger({message:"Mod updated",background:"variant-filled-success",timeout:5e3}),Q(R+"/mod/"+p.data.updateMod.id))})};return s.$$set=a=>{"data"in a&&o(4,i=a.data)},s.$$.update=()=>{s.$$.dirty&1&&o(1,t=n.data?{...n.data.mod,logo:void 0}:void 0)},[n,t,l,h,i]}class pt extends F{constructor(e){super(),G(this,e,lt,dt,J,{data:4})}}export{pt as component,gt as universal};
//# sourceMappingURL=17.cerzj1FS.js.map
