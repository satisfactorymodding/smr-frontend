import{S as Q,i as tt,s as et,A as B,a as A,e as x,C as at,D as F,f as h,g as P,c as b,F as T,d as w,G as v,H as J,j as D,I as g,t as U,l as st,m as j,J as G,Z as rt,X as lt,K as nt,k as it,q as O,Y as ot,O as ut,a0 as W,W as ct,a8 as ft,a1 as mt,T as Y,U as Z,V as _,r as dt}from"../chunks/vendor.SWZNLjM7.js";import{j as pt}from"../chunks/graphql.XSrPrpK2.js";import{o as gt,a as ht,b as $t,s as vt,c as xt,v as bt,r as yt,V as X}from"../chunks/forms.mUJlNuDs.js";import{t as Et}from"../chunks/forms.OiWbSg5S.js";import{u as Ct}from"../chunks/user.IVAx7DdA.js";import{M as St}from"../chunks/MetaDescriptors.pGERfFUb.js";function It(c){let t,a,e,s,l="Avatar:",y,f,d,n,E,p,m,o,r="Username",u,$,L,V,q,N,K='<button class="variant-ghost-primary btn" type="submit">Save</button>',k,z,R;return n=new X({props:{for:"avatar",$$slots:{default:[Vt,({messages:i})=>({8:i}),({messages:i})=>i?256:0]},$$scope:{ctx:c}}}),V=new X({props:{for:"username",$$slots:{default:[At,({messages:i})=>({8:i}),({messages:i})=>i?256:0]},$$scope:{ctx:c}}}),{c(){t=x("form"),a=x("div"),e=x("div"),s=x("label"),s.textContent=l,y=A(),f=x("input"),d=A(),B(n.$$.fragment),E=A(),p=x("div"),m=x("label"),o=x("span"),o.textContent=r,u=A(),$=x("input"),L=A(),B(V.$$.fragment),q=A(),N=x("div"),N.innerHTML=K,this.h()},l(i){t=b(i,"FORM",{});var C=w(t);a=b(C,"DIV",{class:!0});var S=w(a);e=b(S,"DIV",{class:!0});var I=w(e);s=b(I,"LABEL",{for:!0,"data-svelte-h":!0}),T(s)!=="svelte-1a2u3bg"&&(s.textContent=l),y=P(I),f=b(I,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),d=P(I),F(n.$$.fragment,I),I.forEach(h),E=P(S),p=b(S,"DIV",{class:!0});var H=w(p);m=b(H,"LABEL",{class:!0});var M=w(m);o=b(M,"SPAN",{"data-svelte-h":!0}),T(o)!=="svelte-9difb2"&&(o.textContent=r),u=P(M),$=b(M,"INPUT",{type:!0,class:!0}),M.forEach(h),L=P(H),F(V.$$.fragment,H),H.forEach(h),q=P(S),N=b(S,"DIV",{"data-svelte-h":!0}),T(N)!=="svelte-1001f6s"&&(N.innerHTML=K),S.forEach(h),C.forEach(h),this.h()},h(){v(s,"for","avatar"),v(f,"id","avatar"),v(f,"class","base-input"),v(f,"name","avatar"),v(f,"type","file"),v(f,"accept","image/png,image/jpeg,image/gif"),v(f,"placeholder","Avatar"),v(e,"class","grid grid-flow-row gap-2"),v($,"type","text"),$.required=!0,v($,"class","input p-2"),v(m,"class","label"),v(p,"class","grid grid-flow-row gap-2"),v(a,"class","grid grid-flow-row gap-6")},m(i,C){D(i,t,C),g(t,a),g(a,e),g(e,s),g(e,y),g(e,f),g(e,d),J(n,e,null),g(a,E),g(a,p),g(p,m),g(m,o),g(m,u),g(m,$),W($,c[3].username),g(p,L),J(V,p,null),g(a,q),g(a,N),k=!0,z||(R=[ct($,"input",c[5]),ft(c[2].call(null,t))],z=!0)},p(i,C){const S={};C&768&&(S.$$scope={dirty:C,ctx:i}),n.$set(S),C&8&&$.value!==i[3].username&&W($,i[3].username);const I={};C&768&&(I.$$scope={dirty:C,ctx:i}),V.$set(I)},i(i){k||(j(n.$$.fragment,i),j(V.$$.fragment,i),k=!0)},o(i){U(n.$$.fragment,i),U(V.$$.fragment,i),k=!1},d(i){i&&h(t),G(n),G(V),z=!1,mt(R)}}}function wt(c){let t,a="Please log in";return{c(){t=x("p"),t.textContent=a},l(e){t=b(e,"P",{"data-svelte-h":!0}),T(t)!=="svelte-1njyisr"&&(t.textContent=a)},m(e,s){D(e,t,s)},p:O,i:O,o:O,d(e){e&&h(t)}}}function Vt(c){let t,a=(c[8]||"")+"",e;return{c(){t=x("span"),e=Y(a),this.h()},l(s){t=b(s,"SPAN",{class:!0});var l=w(t);e=Z(l,a),l.forEach(h),this.h()},h(){v(t,"class","validation-message")},m(s,l){D(s,t,l),g(t,e)},p(s,l){l&256&&a!==(a=(s[8]||"")+"")&&_(e,a)},d(s){s&&h(t)}}}function At(c){let t,a=(c[8]||"")+"",e;return{c(){t=x("span"),e=Y(a),this.h()},l(s){t=b(s,"SPAN",{class:!0});var l=w(t);e=Z(l,a),l.forEach(h),this.h()},h(){v(t,"class","validation-message")},m(s,l){D(s,t,l),g(t,e)},p(s,l){l&256&&a!==(a=(s[8]||"")+"")&&_(e,a)},d(s){s&&h(t)}}}function Pt(c){let t,a,e,s="Settings",l,y,f,d,n,E;t=new St({props:{description:"Change your user settings",title:"Settings"}});const p=[wt,It],m=[];function o(r,u){return r[1]===null?0:1}return d=o(c),n=m[d]=p[d](c),{c(){B(t.$$.fragment),a=A(),e=x("h1"),e.textContent=s,l=A(),y=x("div"),f=x("section"),n.c(),this.h()},l(r){const u=at("svelte-1ae5i2c",document.head);F(t.$$.fragment,u),u.forEach(h),a=P(r),e=b(r,"H1",{class:!0,"data-svelte-h":!0}),T(e)!=="svelte-1pzybri"&&(e.textContent=s),l=P(r),y=b(r,"DIV",{class:!0});var $=w(y);f=b($,"SECTION",{});var L=w(f);n.l(L),L.forEach(h),$.forEach(h),this.h()},h(){v(e,"class","my-4 text-4xl font-bold"),v(y,"class","card p-4")},m(r,u){J(t,document.head,null),D(r,a,u),D(r,e,u),D(r,l,u),D(r,y,u),g(y,f),m[d].m(f,null),E=!0},p(r,[u]){let $=d;d=o(r),d===$?m[d].p(r,u):(it(),U(m[$],1,1,()=>{m[$]=null}),st(),n=m[d],n?n.p(r,u):(n=m[d]=p[d](r),n.c()),j(n,1),n.m(f,null))},i(r){E||(j(t.$$.fragment,r),j(n),E=!0)},o(r){U(t.$$.fragment,r),U(n),E=!1},d(r){r&&(h(a),h(e),h(l),h(y)),G(t),m[d].d()}}}function Dt(c,t,a){let e,s,l=O,y=()=>(l(),l=dt(p,o=>a(3,s=o)),p);rt(c,Ct,o=>a(1,e=o)),c.$$.on_destroy.push(()=>l());const f=lt(),d=nt(),n=gt({avatar:ht($t().refine(o=>"name"in o&&"size"in o&&"type"in o)),username:vt().min(3).max(32)});let E,p;function m(){s.username=this.value,p.set(s)}return c.$$.update=()=>{if(c.$$.dirty&3&&e&&!p){const o=xt({initialValues:{username:e.username},extend:[bt({schema:n}),yt],onSubmit:r=>{console.log("submitted",r),d.mutation(pt,{user:Et(r,n),userId:e.id}).toPromise().then(u=>{u.error?(console.error(u.error.message),f.trigger({message:"Error editing user: "+u.error.message,background:"variant-filled-error",autohide:!1})):(f.trigger({message:"User updated",background:"variant-filled-success",timeout:5e3}),ot(ut+"/user/"+u.data.updateUser.id))})}});a(2,E=o.form),y(a(0,p=o.data))}},[p,e,E,s,n,m]}class Ht extends Q{constructor(t){super(),tt(this,t,Dt,Pt,et,{userSchema:4})}get userSchema(){return this.$$.ctx[4]}}export{Ht as component};
//# sourceMappingURL=26.LXswjCI4.js.map
