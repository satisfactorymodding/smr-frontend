import{S as et,i as st,s as nt,e as V,a as b,c as S,G as E,g as C,d as M,f as g,H as y,j as x,t as H,l as R,m as _,_ as rt,aa as it,a3 as at,a0 as ot,k as W,u as lt,ab as ct,C as Y,F as z,I as Q,J as k,L as w,N as X,V as B,W as A,Y as Z,q as N,R as G,b as j,T as ft,ac as ut,K as P,O as dt}from"../chunks/vendor.Cud4K2yl.js";import{c as vt,d as ht,e as gt,f as pt}from"../chunks/graphql.DCCO4iQ1.js";function J(i,t,r){const e=i.slice();return e[17]=t[r],e[18]=t,e[19]=r,e}function mt(i){let t,r,e,s,a='<span>Add new Satisfactory version</span> <span class="material-icons">add</span>',n,f,u;return t=new ct({props:{$$slots:{default:[St]},$$scope:{ctx:i}}}),{c(){Y(t.$$.fragment),r=b(),e=V("section"),s=V("button"),s.innerHTML=a,this.h()},l(c){z(t.$$.fragment,c),r=C(c),e=S(c,"SECTION",{class:!0});var v=M(e);s=S(v,"BUTTON",{class:!0,"data-svelte-h":!0}),E(s)!=="svelte-1lvgdo4"&&(s.innerHTML=a),v.forEach(g),this.h()},h(){y(s,"class","variant-ghost-primary btn"),y(e,"class","p-4")},m(c,v){Q(t,c,v),x(c,r,v),x(c,e,v),k(e,s),n=!0,f||(u=w(s,"click",i[4]),f=!0)},p(c,v){const l={};v&1048582&&(l.$$scope={dirty:v,ctx:c}),t.$set(l)},i(c){n||(_(t.$$.fragment,c),n=!0)},o(c){H(t.$$.fragment,c),n=!1},d(c){c&&(g(r),g(e)),X(t,c),f=!1,u()}}}function $t(i){let t,r,e=i[0].error.message+"",s;return{c(){t=V("h1"),r=B("Failed to load satisfactory versions: "),s=B(e),this.h()},l(a){t=S(a,"H1",{class:!0});var n=M(t);r=A(n,"Failed to load satisfactory versions: "),s=A(n,e),n.forEach(g),this.h()},h(){y(t,"class","svelte-1egakhm")},m(a,n){x(a,t,n),k(t,r),k(t,s)},p(a,n){n&1&&e!==(e=a[0].error.message+"")&&Z(s,e)},i:N,o:N,d(a){a&&g(t)}}}function yt(i){let t,r="Loading satisfactory versions...";return{c(){t=V("h1"),t.textContent=r,this.h()},l(e){t=S(e,"H1",{class:!0,"data-svelte-h":!0}),E(t)!=="svelte-kaw34n"&&(t.textContent=r),this.h()},h(){y(t,"class","svelte-1egakhm")},m(e,s){x(e,t,s)},p:N,i:N,o:N,d(e){e&&g(t)}}}function xt(i){let t=i[17].version+"",r;return{c(){r=B(t)},l(e){r=A(e,t)},m(e,s){x(e,r,s)},p(e,s){s&4&&t!==(t=e[17].version+"")&&Z(r,t)},d(e){e&&g(r)}}}function Vt(i){let t,r,e="Game CL#",s,a,n=i[17],f,u,c="Engine Version",v,l,h,p,D="<span>Delete</span>",I,L,F;function U(){i[7].call(a,i[18],i[19])}const O=()=>i[8](a,n),o=()=>i[8](null,n);function d(){return i[9](i[17])}function T(){i[10].call(l,i[18],i[19])}function q(){return i[11](i[17])}function tt(...$){return i[12](i[17],...$)}return{c(){t=V("div"),r=V("div"),r.textContent=e,s=b(),a=V("input"),f=b(),u=V("div"),u.textContent=c,v=b(),l=V("input"),h=b(),p=V("button"),p.innerHTML=D,I=b(),this.h()},l($){t=S($,"DIV",{});var m=M(t);r=S(m,"DIV",{"data-svelte-h":!0}),E(r)!=="svelte-159nkk2"&&(r.textContent=e),s=C(m),a=S(m,"INPUT",{type:!0,class:!0,placeholder:!0}),f=C(m),u=S(m,"DIV",{"data-svelte-h":!0}),E(u)!=="svelte-167e69y"&&(u.textContent=c),v=C(m),l=S(m,"INPUT",{type:!0,class:!0,placeholder:!0}),m.forEach(g),h=C($),p=S($,"BUTTON",{class:!0,"data-svelte-h":!0}),E(p)!=="svelte-15tmc7w"&&(p.innerHTML=D),I=C($),this.h()},h(){y(a,"type","text"),y(a,"class","input p-2"),y(a,"placeholder","Version"),y(l,"type","text"),y(l,"class","input p-2"),y(l,"placeholder","Engine version"),y(p,"class","variant-ghost-error btn")},m($,m){x($,t,m),k(t,r),k(t,s),k(t,a),P(a,i[17].version),O(),k(t,f),k(t,u),k(t,v),k(t,l),P(l,i[17].engine_version),x($,h,m),x($,p,m),x($,I,m),L||(F=[w(a,"input",U),w(a,"change",d),w(l,"input",T),w(l,"change",q),w(p,"click",tt)],L=!0)},p($,m){i=$,m&4&&a.value!==i[17].version&&P(a,i[17].version),n!==i[17]&&(o(),n=i[17],O()),m&4&&l.value!==i[17].engine_version&&P(l,i[17].engine_version)},d($){$&&(g(t),g(h),g(p),g(I)),o(),L=!1,dt(F)}}}function K(i){let t,r;return t=new ut({props:{$$slots:{content:[Vt],summary:[xt]},$$scope:{ctx:i}}}),{c(){Y(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,s){Q(t,e,s),r=!0},p(e,s){const a={};s&1048582&&(a.$$scope={dirty:s,ctx:e}),t.$set(a)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){H(t.$$.fragment,e),r=!1},d(e){X(t,e)}}}function St(i){let t,r,e=G(i[2]),s=[];for(let n=0;n<e.length;n+=1)s[n]=K(J(i,e,n));const a=n=>H(s[n],1,1,()=>{s[n]=null});return{c(){for(let n=0;n<s.length;n+=1)s[n].c();t=j()},l(n){for(let f=0;f<s.length;f+=1)s[f].l(n);t=j()},m(n,f){for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(n,f);x(n,t,f),r=!0},p(n,f){if(f&102){e=G(n[2]);let u;for(u=0;u<e.length;u+=1){const c=J(n,e,u);s[u]?(s[u].p(c,f),_(s[u],1)):(s[u]=K(c),s[u].c(),_(s[u],1),s[u].m(t.parentNode,t))}for(W(),u=e.length;u<s.length;u+=1)a(u);R()}},i(n){if(!r){for(let f=0;f<e.length;f+=1)_(s[f]);r=!0}},o(n){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)H(s[f]);r=!1},d(n){n&&g(t),ft(s,n)}}}function kt(i){let t,r="Satisfactory Versions",e,s,a,n,f;const u=[yt,$t,mt],c=[];function v(l,h){return l[0].fetching?0:l[0].error?1:2}return a=v(i),n=c[a]=u[a](i),{c(){t=V("h1"),t.textContent=r,e=b(),s=V("div"),n.c(),this.h()},l(l){t=S(l,"H1",{class:!0,"data-svelte-h":!0}),E(t)!=="svelte-scghcv"&&(t.textContent=r),e=C(l),s=S(l,"DIV",{class:!0});var h=M(s);n.l(h),h.forEach(g),this.h()},h(){y(t,"class","svelte-1egakhm"),y(s,"class","card")},m(l,h){x(l,t,h),x(l,e,h),x(l,s,h),c[a].m(s,null),f=!0},p(l,[h]){let p=a;a=v(l),a===p?c[a].p(l,h):(W(),H(c[p],1,1,()=>{c[p]=null}),R(),n=c[a],n?n.p(l,h):(n=c[a]=u[a](l),n.c()),_(n,1),n.m(s,null))},i(l){f||(_(n),f=!0)},o(l){H(n),f=!1},d(l){l&&(g(t),g(e),g(s)),c[a].d()}}}function Tt(i,t,r){let e,s;const a=rt(),n={},f={},u=it({query:vt,client:a});at(i,u,o=>r(0,s=o));const c=ot();function v(){if(e.find(o=>o.id<0))n[e[e.length-1].id].setOpen(!0),f[e[e.length-1].id].focus();else{const o={id:-1,version:0,engine_version:"4.26"};e.push(o),r(2,e),r(0,s),setTimeout(()=>{n[o.id].setOpen(!0);const d=f[o.id];d.focus(),d.getElement().querySelectorAll("input")[0].select()},0)}}async function l(o){if(o.version===0)return;console.log(o);let d=!1;if(o.id<0){try{const T=await a.mutation(ht,{satisfactoryVersion:{version:o.version,engine_version:o.engine_version}}).toPromise();T.data&&(o.id=T.data.createSatisfactoryVersion.id,d=!0)}catch(T){console.log(T)}if(!d){c.trigger({message:`Failed to create Satisfactory version '${o.version}'!`,background:"variant-filled-error",timeout:2e3});return}}else{try{d=(await a.mutation(gt,{id:o.id,satisfactoryVersion:{version:o.version,engine_version:o.engine_version}}).toPromise()).data.updateSatisfactoryVersion!=null}catch{}if(!d){c.trigger({message:`Failed to update Satisfactory version '${o.version}'!`,background:"variant-filled-error",timeout:2e3});return}}c.trigger({message:`Satisfactory version '${o.version}' saved!`,background:"variant-filled-success",timeout:2e3})}async function h(o){if(!(o.id<0)){let d=!1;try{d=(await a.mutation(pt,{satisfactoryVersionID:o.id}).toPromise()).data.deleteSatisfactoryVersion,d&&r(2,e=e.filter(q=>q.id!==o.id))}catch{d=!1}if(!d){c.trigger({message:`Failed to remove Satisfactory version '${o.version}'!`,background:"variant-filled-error",timeout:2e3});return}}c.trigger({message:`Satisfactory version '${o.version}' removed!`,background:"variant-filled-success",timeout:2e3})}function p(o,d){o.stopPropagation(),h(d)}function D(o,d){o[d].version=this.value,r(2,e),r(0,s)}function I(o,d){lt[o?"unshift":"push"](()=>{f[d.id]=o,r(1,f)})}const L=o=>l(o);function F(o,d){o[d].engine_version=this.value,r(2,e),r(0,s)}const U=o=>l(o),O=(o,d)=>p(d,o);return i.$$.update=()=>{i.$$.dirty&1&&r(2,e=s.data?.getSatisfactoryVersions||[])},[s,f,e,u,v,l,p,D,I,L,F,U,O]}class _t extends et{constructor(t){super(),st(this,t,Tt,kt,nt,{})}}export{_t as component};
//# sourceMappingURL=5.Cl1EJKVs.js.map
