import{o as H,p as J}from"../chunks/graphql.sMbDXPDh.js";import{l as K}from"../chunks/gql.DGDorg1Q.js";import{D as Q,S as B,i as F,s as R,b as I,a as S,e as x,Y,f as c,g as k,c as C,K as L,d as P,A as w,M as O,j as b,m as p,t as y,l as _,C as U,G as W,I as N,J as z,L as A,O as G,k as j,q as E,r as X,ab as Z,a7 as tt,a0 as et,P as T,Q as V,R as at}from"../chunks/vendor.DBwCcoHF.js";import{M as rt}from"../chunks/ModForm.ed-T37rN.js";import{M as ot}from"../chunks/MetaDescriptors.BnMuLQUR.js";const st=async({params:r,parent:e})=>({...r,...await K({mod:Q({query:H,client:(await e()).client,variables:{mod:r.modId},requestPolicy:"network-only"})})}),$t=Object.freeze(Object.defineProperty({__proto__:null,load:st},Symbol.toStringTag,{value:"Module"}));function D(r){let e,o;return e=new ot({props:{description:"Editing mod "+r[0].data.mod.name,title:"Edit mod "+r[0].data.mod.name,image:r[0].data.mod.logo}}),{c(){N(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){A(e,t,s),o=!0},p(t,s){const n={};s&1&&(n.description="Editing mod "+t[0].data.mod.name),s&1&&(n.title="Edit mod "+t[0].data.mod.name),s&1&&(n.image=t[0].data.mod.logo),e.$set(n)},i(t){o||(p(e.$$.fragment,t),o=!0)},o(t){y(e.$$.fragment,t),o=!1},d(t){G(e,t)}}}function nt(r){let e,o;return e=new rt({props:{onSubmit:r[3],initialValues:r[1],editing:!0,submitText:"Save"}}),{c(){N(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){A(e,t,s),o=!0},p(t,s){const n={};s&2&&(n.initialValues=t[1]),e.$set(n)},i(t){o||(p(e.$$.fragment,t),o=!0)},o(t){y(e.$$.fragment,t),o=!1},d(t){G(e,t)}}}function it(r){let e,o,t=r[0].error.message+"",s;return{c(){e=x("p"),o=T("Oh no... "),s=T(t)},l(n){e=C(n,"P",{});var d=P(e);o=V(d,"Oh no... "),s=V(d,t),d.forEach(c)},m(n,d){b(n,e,d),O(e,o),O(e,s)},p(n,d){d&1&&t!==(t=n[0].error.message+"")&&at(s,t)},i:E,o:E,d(n){n&&c(e)}}}function dt(r){let e,o="Loading...";return{c(){e=x("p"),e.textContent=o},l(t){e=C(t,"P",{"data-svelte-h":!0}),L(e)!=="svelte-qdsr2u"&&(e.textContent=o)},m(t,s){b(t,e,s)},p:E,i:E,o:E,d(t){t&&c(e)}}}function lt(r){let e,o,t,s="Edit Mod",n,d,g,f,l,$,i=!r[0].fetching&&!r[0].error&&r[0].data.mod&&D(r);const M=[dt,it,nt],m=[];function h(a,u){return a[0].fetching?0:a[0].error?1:2}return f=h(r),l=m[f]=M[f](r),{c(){i&&i.c(),e=I(),o=S(),t=x("h1"),t.textContent=s,n=S(),d=x("div"),g=x("section"),l.c(),this.h()},l(a){const u=Y("svelte-q8g25b",document.head);i&&i.l(u),e=I(),u.forEach(c),o=k(a),t=C(a,"H1",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-1bmvkg7"&&(t.textContent=s),n=k(a),d=C(a,"DIV",{class:!0});var v=P(d);g=C(v,"SECTION",{});var q=P(g);l.l(q),q.forEach(c),v.forEach(c),this.h()},h(){w(t,"class","my-4 text-4xl font-bold"),w(d,"class","card p-4")},m(a,u){i&&i.m(document.head,null),O(document.head,e),b(a,o,u),b(a,t,u),b(a,n,u),b(a,d,u),O(d,g),m[f].m(g,null),$=!0},p(a,[u]){!a[0].fetching&&!a[0].error&&a[0].data.mod?i?(i.p(a,u),u&1&&p(i,1)):(i=D(a),i.c(),p(i,1),i.m(e.parentNode,e)):i&&(j(),y(i,1,1,()=>{i=null}),_());let v=f;f=h(a),f===v?m[f].p(a,u):(j(),y(m[v],1,1,()=>{m[v]=null}),_(),l=m[f],l?l.p(a,u):(l=m[f]=M[f](a),l.c()),p(l,1),l.m(g,null))},i(a){$||(p(i),p(l),$=!0)},o(a){y(i),y(l),$=!1},d(a){a&&(c(o),c(t),c(n),c(d)),i&&i.d(a),c(e),m[f].d()}}}function mt(r,e,o){let t,s,n,d,g=E,f=()=>(g(),g=X(s,m=>o(0,d=m)),s);r.$$.on_destroy.push(()=>g());let{data:l}=e;const $=U(),i=W(),M=m=>{$.mutation(J,{modId:Z(s).data.mod.id,mod:m}).toPromise().then(h=>{h.error?(console.error(h.error.message),i.trigger({message:"Error editing mod: "+h.error.message,background:"variant-filled-error",autohide:!1})):(i.trigger({message:"Mod updated",background:"variant-filled-success",timeout:5e3}),tt(et+"/mod/"+t))})};return r.$$set=m=>{"data"in m&&o(4,l=m.data)},r.$$.update=()=>{r.$$.dirty&16&&f(o(2,{modId:t,mod:s}=l,s)),r.$$.dirty&1&&o(1,n=d.data?{...d.data.mod,logo:void 0}:void 0)},[d,n,s,M,l]}class ht extends B{constructor(e){super(),F(this,e,mt,lt,R,{data:4})}}export{ht as component,$t as universal};
//# sourceMappingURL=16.CNNFTUP_.js.map
