import{t as J,u as L}from"../chunks/graphql.DCCO4iQ1.js";import{l as W}from"../chunks/gql.DGDorg1Q.js";import{aa as Y,S as A,i as B,s as K,b as M,a as S,e as y,D as Q,f as c,g as w,c as C,G as D,d as k,H as O,J as _,j as b,m as p,t as E,l as P,_ as R,a0 as U,C as H,F as z,I as F,N as G,k as j,q as x,r as X,a7 as Z,a1 as tt,a2 as et,V as N,W as T,Y as at}from"../chunks/vendor.CjqjvYE3.js";import{M as rt}from"../chunks/ModForm.CRrzmSvG.js";import{M as ot}from"../chunks/MetaDescriptors.43r9wqSh.js";const st=async({params:r,parent:e})=>({...r,...await W({mod:Y({query:J,client:(await e()).client,variables:{mod:r.modId},requestPolicy:"network-only"})})}),$t=Object.freeze(Object.defineProperty({__proto__:null,load:st},Symbol.toStringTag,{value:"Module"}));function V(r){let e,o;return e=new ot({props:{description:"Editing mod "+r[0].data.mod.name,title:"Edit mod "+r[0].data.mod.name,image:r[0].data.mod.logo}}),{c(){H(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){F(e,t,s),o=!0},p(t,s){const n={};s&1&&(n.description="Editing mod "+t[0].data.mod.name),s&1&&(n.title="Edit mod "+t[0].data.mod.name),s&1&&(n.image=t[0].data.mod.logo),e.$set(n)},i(t){o||(p(e.$$.fragment,t),o=!0)},o(t){E(e.$$.fragment,t),o=!1},d(t){G(e,t)}}}function nt(r){let e,o;return e=new rt({props:{onSubmit:r[3],initialValues:r[1],editing:!0,submitText:"Save"}}),{c(){H(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,s){F(e,t,s),o=!0},p(t,s){const n={};s&2&&(n.initialValues=t[1]),e.$set(n)},i(t){o||(p(e.$$.fragment,t),o=!0)},o(t){E(e.$$.fragment,t),o=!1},d(t){G(e,t)}}}function it(r){let e,o,t=r[0].error.message+"",s;return{c(){e=y("p"),o=N("Oh no... "),s=N(t)},l(n){e=C(n,"P",{});var d=k(e);o=T(d,"Oh no... "),s=T(d,t),d.forEach(c)},m(n,d){b(n,e,d),_(e,o),_(e,s)},p(n,d){d&1&&t!==(t=n[0].error.message+"")&&at(s,t)},i:x,o:x,d(n){n&&c(e)}}}function dt(r){let e,o="Loading...";return{c(){e=y("p"),e.textContent=o},l(t){e=C(t,"P",{"data-svelte-h":!0}),D(e)!=="svelte-qdsr2u"&&(e.textContent=o)},m(t,s){b(t,e,s)},p:x,i:x,o:x,d(t){t&&c(e)}}}function lt(r){let e,o,t,s="Edit Mod",n,d,g,f,l,$,i=!r[0].fetching&&!r[0].error&&r[0].data.mod&&V(r);const I=[dt,it,nt],m=[];function h(a,u){return a[0].fetching?0:a[0].error?1:2}return f=h(r),l=m[f]=I[f](r),{c(){i&&i.c(),e=M(),o=S(),t=y("h1"),t.textContent=s,n=S(),d=y("div"),g=y("section"),l.c(),this.h()},l(a){const u=Q("svelte-q8g25b",document.head);i&&i.l(u),e=M(),u.forEach(c),o=w(a),t=C(a,"H1",{class:!0,"data-svelte-h":!0}),D(t)!=="svelte-1bmvkg7"&&(t.textContent=s),n=w(a),d=C(a,"DIV",{class:!0});var v=k(d);g=C(v,"SECTION",{});var q=k(g);l.l(q),q.forEach(c),v.forEach(c),this.h()},h(){O(t,"class","my-4 text-4xl font-bold"),O(d,"class","card p-4")},m(a,u){i&&i.m(document.head,null),_(document.head,e),b(a,o,u),b(a,t,u),b(a,n,u),b(a,d,u),_(d,g),m[f].m(g,null),$=!0},p(a,[u]){!a[0].fetching&&!a[0].error&&a[0].data.mod?i?(i.p(a,u),u&1&&p(i,1)):(i=V(a),i.c(),p(i,1),i.m(e.parentNode,e)):i&&(j(),E(i,1,1,()=>{i=null}),P());let v=f;f=h(a),f===v?m[f].p(a,u):(j(),E(m[v],1,1,()=>{m[v]=null}),P(),l=m[f],l?l.p(a,u):(l=m[f]=I[f](a),l.c()),p(l,1),l.m(g,null))},i(a){$||(p(i),p(l),$=!0)},o(a){E(i),E(l),$=!1},d(a){a&&(c(o),c(t),c(n),c(d)),i&&i.d(a),c(e),m[f].d()}}}function mt(r,e,o){let t,s,n,d,g=x,f=()=>(g(),g=X(s,m=>o(0,d=m)),s);r.$$.on_destroy.push(()=>g());let{data:l}=e;const $=R(),i=U(),I=m=>{$.mutation(L,{modId:Z(s).data.mod.id,mod:m}).toPromise().then(h=>{h.error?(console.error(h.error.message),i.trigger({message:"Error editing mod: "+h.error.message,background:"variant-filled-error",autohide:!1})):(i.trigger({message:"Mod updated",background:"variant-filled-success",timeout:5e3}),tt(et+"/mod/"+t))})};return r.$$set=m=>{"data"in m&&o(4,l=m.data)},r.$$.update=()=>{r.$$.dirty&16&&f(o(2,{modId:t,mod:s}=l,s)),r.$$.dirty&1&&o(1,n=d.data?{...d.data.mod,logo:void 0}:void 0)},[d,n,s,I,l]}class ht extends A{constructor(e){super(),B(this,e,mt,lt,K,{data:4})}}export{ht as component,$t as universal};
//# sourceMappingURL=17.ClL1ku-W.js.map
