import{S as Z,i as tt,s as et,b as P,a as q,e as b,D as at,f,g as j,c as G,d as S,G as B,H as V,J as y,j as _,L as rt,m as T,t as w,l as z,_ as st,a0 as it,ae as nt,aa as ot,C as Y,F as Q,I as R,N as X,k as A,q as I,r as lt,a1 as F,a2 as J,V as K,W as U,Y as ut}from"../chunks/vendor.Cud4K2yl.js";import{q as dt,r as ct}from"../chunks/graphql.DCCO4iQ1.js";import{G as ft}from"../chunks/GuideForm.BOE5CqHW.js";import{M as gt}from"../chunks/MetaDescriptors.Ck-FCrXS.js";const mt=async({params:i})=>({...i}),kt=Object.freeze(Object.defineProperty({__proto__:null,load:mt},Symbol.toStringTag,{value:"Module"}));function W(i){let e,s;return e=new gt({props:{description:"Editing guide '"+i[1].data.getGuide.short_description+"'",title:"Edit guide '"+i[1].data.getGuide.name+"'"}}),{c(){Y(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,a){R(e,t,a),s=!0},p(t,a){const n={};a&2&&(n.description="Editing guide '"+t[1].data.getGuide.short_description+"'"),a&2&&(n.title="Edit guide '"+t[1].data.getGuide.name+"'"),e.$set(n)},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function pt(i){let e,s;return e=new ft({props:{onSubmit:i[2],initialValues:i[1].data.getGuide,submitText:"Save",submitIcon:"save"}}),{c(){Y(e.$$.fragment)},l(t){Q(e.$$.fragment,t)},m(t,a){R(e,t,a),s=!0},p(t,a){const n={};a&2&&(n.initialValues=t[1].data.getGuide),e.$set(n)},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){w(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function ht(i){let e,s,t=i[1].error.message+"",a;return{c(){e=b("p"),s=K("Oh no... "),a=K(t)},l(n){e=G(n,"P",{});var l=S(e);s=U(l,"Oh no... "),a=U(l,t),l.forEach(f)},m(n,l){_(n,e,l),y(e,s),y(e,a)},p(n,l){l&2&&t!==(t=n[1].error.message+"")&&ut(a,t)},i:I,o:I,d(n){n&&f(e)}}}function $t(i){let e,s="Loading...";return{c(){e=b("p"),e.textContent=s},l(t){e=G(t,"P",{"data-svelte-h":!0}),B(e)!=="svelte-qdsr2u"&&(e.textContent=s)},m(t,a){_(t,e,a)},p:I,i:I,o:I,d(t){t&&f(e)}}}function vt(i){let e,s,t,a,n="Edit Guide",l,E,g,O=`<span class="material-icons pr-2">arrow_back</span>
      Back to Guide`,x,p,h,u,d,C,m,k,o=!i[1].fetching&&!i[1].error&&i[1].data.getGuide&&W(i);const D=[$t,ht,pt],$=[];function L(r,c){return r[1].fetching?0:r[1].error?1:2}return u=L(i),d=$[u]=D[u](i),{c(){o&&o.c(),e=P(),s=q(),t=b("div"),a=b("h1"),a.textContent=n,l=q(),E=b("div"),g=b("button"),g.innerHTML=O,x=q(),p=b("div"),h=b("section"),d.c(),this.h()},l(r){const c=at("svelte-2z35li",document.head);o&&o.l(c),e=P(),c.forEach(f),s=j(r),t=G(r,"DIV",{class:!0});var v=S(t);a=G(v,"H1",{class:!0,"data-svelte-h":!0}),B(a)!=="svelte-1alq187"&&(a.textContent=n),l=j(v),E=G(v,"DIV",{});var M=S(E);g=G(M,"BUTTON",{class:!0,"data-svelte-h":!0}),B(g)!=="svelte-s0syem"&&(g.innerHTML=O),M.forEach(f),v.forEach(f),x=j(r),p=G(r,"DIV",{class:!0});var H=S(p);h=G(H,"SECTION",{});var N=S(h);d.l(N),N.forEach(f),H.forEach(f),this.h()},h(){V(a,"class","my-4 text-4xl font-bold"),V(g,"class","variant-ghost-primary btn"),V(t,"class","flex h-auto flex-wrap items-center justify-between"),V(p,"class","card p-4")},m(r,c){o&&o.m(document.head,null),y(document.head,e),_(r,s,c),_(r,t,c),y(t,a),y(t,l),y(t,E),y(E,g),_(r,x,c),_(r,p,c),y(p,h),$[u].m(h,null),C=!0,m||(k=rt(g,"click",i[7]),m=!0)},p(r,[c]){!r[1].fetching&&!r[1].error&&r[1].data.getGuide?o?(o.p(r,c),c&2&&T(o,1)):(o=W(r),o.c(),T(o,1),o.m(e.parentNode,e)):o&&(A(),w(o,1,1,()=>{o=null}),z());let v=u;u=L(r),u===v?$[u].p(r,c):(A(),w($[v],1,1,()=>{$[v]=null}),z(),d=$[u],d?d.p(r,c):(d=$[u]=D[u](r),d.c()),T(d,1),d.m(h,null))},i(r){C||(T(o),T(d),C=!0)},o(r){w(o),w(d),C=!1},d(r){r&&(f(s),f(t),f(x),f(p)),o&&o.d(r),f(e),$[u].d(),m=!1,k()}}}function bt(i,e,s){let t,a,n,l=I,E=()=>(l(),l=lt(a,m=>s(1,n=m)),a);i.$$.on_destroy.push(()=>l());let{data:g}=e;const O=st(),x=it(),p=m=>{O.mutation(ct,{guideId:t,guide:m}).toPromise().then(k=>{k.error?(console.error(k.error.message),x.trigger({message:"Error editing guide: "+k.error.message,background:"variant-filled-error",autohide:!1})):(x.trigger({message:"Guide updated",background:"variant-filled-success",timeout:5e3}),F(J+"/guide/"+k.data.updateGuide.id))})},h=()=>{F(J+"/guide/"+t)},u={type:"confirm",title:"Go Back?",buttonTextCancel:"Keep Editing",buttonTextConfirm:"Go Back",body:"Going back will discard any unsaved changes. Are you sure you wish to continue?",response:m=>{m&&h()}},d=nt(),C=()=>d.trigger(u);return i.$$set=m=>{"data"in m&&s(5,g=m.data)},i.$$.update=()=>{i.$$.dirty&32&&s(6,{guideId:t}=g,t),i.$$.dirty&64&&E(s(0,a=ot({query:dt,client:O,variables:{guide:t}})))},[a,n,p,u,d,g,t,C]}class Tt extends Z{constructor(e){super(),tt(this,e,bt,vt,et,{data:5})}}export{Tt as component,kt as universal};
//# sourceMappingURL=13.BpU_bD0j.js.map
