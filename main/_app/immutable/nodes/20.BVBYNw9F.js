import{S as Z,i as ee,s as te,b as P,a as D,e as b,D as re,f as u,g as G,c as y,d as O,G as H,H as B,J as E,j as _,L as ae,m as w,t as C,l as z,_ as se,a0 as ne,ae as oe,aa as ie,C as U,F as Y,I as Q,N as X,k as R,q as T,r as le,a1 as A,a2 as F,V as J,W,Y as de}from"../chunks/vendor.CjqjvYE3.js";import{v as ce,w as fe}from"../chunks/graphql.DCCO4iQ1.js";import{V as ue}from"../chunks/VersionForm.oBD2e3Rg.js";import{M as me}from"../chunks/MetaDescriptors.43r9wqSh.js";const ge=async({params:a})=>({...a}),we=Object.freeze(Object.defineProperty({__proto__:null,load:ge},Symbol.toStringTag,{value:"Module"}));function K(a){let t,n;return t=new me({props:{description:"Editing mod version "+a[0].data.getVersion.mod.name+" "+a[0].data.getVersion.version,title:"Edit mod version "+a[0].data.getVersion.mod.name+" "+a[0].data.getVersion.version}}),{c(){U(t.$$.fragment)},l(e){Y(t.$$.fragment,e)},m(e,r){Q(t,e,r),n=!0},p(e,r){const i={};r&1&&(i.description="Editing mod version "+e[0].data.getVersion.mod.name+" "+e[0].data.getVersion.version),r&1&&(i.title="Edit mod version "+e[0].data.getVersion.mod.name+" "+e[0].data.getVersion.version),t.$set(i)},i(e){n||(w(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function ve(a){let t,n;return t=new ue({props:{onSubmit:a[3],initialValues:a[1],modReference:a[0].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save",submitIcon:"save"}}),{c(){U(t.$$.fragment)},l(e){Y(t.$$.fragment,e)},m(e,r){Q(t,e,r),n=!0},p(e,r){const i={};r&2&&(i.initialValues=e[1]),r&1&&(i.modReference=e[0].data.getVersion.mod.mod_reference),t.$set(i)},i(e){n||(w(t.$$.fragment,e),n=!0)},o(e){C(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function pe(a){let t,n,e=a[0].error.message+"",r;return{c(){t=b("p"),n=J("Oh no... "),r=J(e)},l(i){t=y(i,"P",{});var l=O(t);n=W(l,"Oh no... "),r=W(l,e),l.forEach(u)},m(i,l){_(i,t,l),E(t,n),E(t,r)},p(i,l){l&1&&e!==(e=i[0].error.message+"")&&de(r,e)},i:T,o:T,d(i){i&&u(t)}}}function he(a){let t,n="Loading...";return{c(){t=b("p"),t.textContent=n},l(e){t=y(e,"P",{"data-svelte-h":!0}),H(t)!=="svelte-qdsr2u"&&(t.textContent=n)},m(e,r){_(e,t,r)},p:T,i:T,o:T,d(e){e&&u(t)}}}function $e(a){let t,n,e,r,i="Edit Version",l,g,m,S=`<span class="material-icons pr-2">arrow_back</span>
      Back to Versions`,h,v,p,d,c,x,k,j,s=!a[0].fetching&&!a[0].error&&a[0].data.getVersion&&K(a);const I=[he,pe,ve],$=[];function M(o,f){return o[0].fetching?0:o[0].error?1:2}return d=M(a),c=$[d]=I[d](a),{c(){s&&s.c(),t=P(),n=D(),e=b("div"),r=b("h1"),r.textContent=i,l=D(),g=b("div"),m=b("button"),m.innerHTML=S,h=D(),v=b("div"),p=b("section"),c.c(),this.h()},l(o){const f=re("svelte-wzsk0g",document.head);s&&s.l(f),t=P(),f.forEach(u),n=G(o),e=y(o,"DIV",{class:!0});var V=O(e);r=y(V,"H1",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-142h57n"&&(r.textContent=i),l=G(V),g=y(V,"DIV",{});var q=O(g);m=y(q,"BUTTON",{class:!0,"data-svelte-h":!0}),H(m)!=="svelte-1wwz687"&&(m.innerHTML=S),q.forEach(u),V.forEach(u),h=G(o),v=y(o,"DIV",{class:!0});var L=O(v);p=y(L,"SECTION",{});var N=O(p);c.l(N),N.forEach(u),L.forEach(u),this.h()},h(){B(r,"class","my-4 text-4xl font-bold"),B(m,"class","variant-ghost-primary btn"),B(e,"class","flex h-auto flex-wrap items-center justify-between"),B(v,"class","card p-4")},m(o,f){s&&s.m(document.head,null),E(document.head,t),_(o,n,f),_(o,e,f),E(e,r),E(e,l),E(e,g),E(g,m),_(o,h,f),_(o,v,f),E(v,p),$[d].m(p,null),x=!0,k||(j=ae(m,"click",a[8]),k=!0)},p(o,[f]){!o[0].fetching&&!o[0].error&&o[0].data.getVersion?s?(s.p(o,f),f&1&&w(s,1)):(s=K(o),s.c(),w(s,1),s.m(t.parentNode,t)):s&&(R(),C(s,1,1,()=>{s=null}),z());let V=d;d=M(o),d===V?$[d].p(o,f):(R(),C($[V],1,1,()=>{$[V]=null}),z(),c=$[d],c?c.p(o,f):(c=$[d]=I[d](o),c.c()),w(c,1),c.m(p,null))},i(o){x||(w(s),w(c),x=!0)},o(o){C(s),C(c),x=!1},d(o){o&&(u(n),u(e),u(h),u(v)),s&&s.d(o),u(t),$[d].d(),k=!1,j()}}}function Ve(a,t,n){let e,r,i,l,g,m=T,S=()=>(m(),m=le(i,s=>n(0,g=s)),i);a.$$.on_destroy.push(()=>m());let{data:h}=t;const v=se(),p=ne(),d=async s=>v.mutation(fe,{versionId:r,version:s}).toPromise().then(I=>{if(I.error)console.error(I.error.message),p.trigger({message:"Error editing version: "+I.error.message,background:"variant-filled-error",autohide:!1});else return p.trigger({message:"Version updated",background:"variant-filled-success",timeout:5e3}),A(F+"/mod/"+e+"/version/"+r)}),c=()=>{A(F+"/mod/"+e+"/version/"+r)},x={type:"confirm",title:"Go Back?",buttonTextCancel:"Keep Editing",buttonTextConfirm:"Go Back",body:"Going back will discard any unsaved changes. Are you sure you wish to continue?",response:s=>{s&&c()}},k=oe(),j=()=>k.trigger(x);return a.$$set=s=>{"data"in s&&n(6,h=s.data)},a.$$.update=()=>{a.$$.dirty&64&&n(7,{modId:e,versionId:r}=h,r),a.$$.dirty&128&&S(n(2,i=ie({query:ce,client:v,variables:{version:r}}))),a.$$.dirty&1&&n(1,l=g.data?{...g.data.getVersion,logo:void 0}:void 0)},[g,l,i,d,x,k,h,r,j]}class ke extends Z{constructor(t){super(),ee(this,t,Ve,$e,te,{data:6})}}export{ke as component,we as universal};
//# sourceMappingURL=20.BVBYNw9F.js.map
