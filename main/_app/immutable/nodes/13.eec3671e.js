import{S as A,i as F,s as H,bh as J,p as K,P as R,e as N,R as M,u as O,I as v,U as x,a_ as U,d,V as T,v as I,w as L,J as b,X as _,Y as X,Z as G,a as h,_ as P,b as m,t as p,c as D,a4 as Y,a5 as S,aD as Z,aF as B,bi as C,g as k,L as E,ar as Q,aG as W,aN as tt,K as q}from"../chunks/vendor.96815c21.js";import{r as et,E as at}from"../chunks/graphql.22d32a05.js";import{T as it}from"../chunks/Toast.3173ee9a.js";import{G as rt}from"../chunks/GuideForm.6a2e195a.js";import{M as st}from"../chunks/MetaDescriptors.e9d71f4a.js";const nt=async({params:s})=>({...s}),yt=Object.freeze(Object.defineProperty({__proto__:null,load:nt},Symbol.toStringTag,{value:"Module"}));function j(s){let e,a;return e=new st({props:{description:"Editing guide '"+s[3].data.getGuide.short_description+"'",title:"Edit guide '"+s[3].data.getGuide.name+"'"}}),{c(){x(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,r){P(e,t,r),a=!0},p(t,r){const f={};r&8&&(f.description="Editing guide '"+t[3].data.getGuide.short_description+"'"),r&8&&(f.title="Edit guide '"+t[3].data.getGuide.name+"'"),e.$set(f)},i(t){a||(m(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){S(e,t)}}}function ot(s){let e,a;return e=new rt({props:{onSubmit:s[4],initialValues:s[3].data.getGuide,submitText:"Save"}}),{c(){x(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,r){P(e,t,r),a=!0},p(t,r){const f={};r&8&&(f.initialValues=t[3].data.getGuide),e.$set(f)},i(t){a||(m(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){S(e,t)}}}function ft(s){let e,a,t=s[3].error.message+"",r;return{c(){e=O("p"),a=v("Oh no... "),r=v(t)},l(f){e=I(f,"P",{});var o=L(e);a=b(o,"Oh no... "),r=b(o,t),o.forEach(d)},m(f,o){h(f,e,o),G(e,a),G(e,r)},p(f,o){o&8&&t!==(t=f[3].error.message+"")&&q(r,t)},i:E,o:E,d(f){f&&d(e)}}}function lt(s){let e,a;return{c(){e=O("p"),a=v("Loading...")},l(t){e=I(t,"P",{});var r=L(e);a=b(r,"Loading..."),r.forEach(d)},m(t,r){h(t,e,r),G(e,a)},p:E,i:E,o:E,d(t){t&&d(e)}}}function ut(s){let e,a,t,r;const f=[lt,ft,ot],o=[];function g(n,c){return n[3].fetching?0:n[3].error?1:2}return e=g(s),a=o[e]=f[e](s),{c(){a.c(),t=N()},l(n){a.l(n),t=N()},m(n,c){o[e].m(n,c),h(n,t,c),r=!0},p(n,c){let $=e;e=g(n),e===$?o[e].p(n,c):(k(),p(o[$],1,1,()=>{o[$]=null}),D(),a=o[e],a?a.p(n,c):(a=o[e]=f[e](n),a.c()),m(a,1),a.m(t.parentNode,t))},i(n){r||(m(a),r=!0)},o(n){p(a),r=!1},d(n){o[e].d(n),n&&d(t)}}}function dt(s){let e,a;return e=new C({props:{$$slots:{default:[ut]},$$scope:{ctx:s}}}),{c(){x(e.$$.fragment)},l(t){_(e.$$.fragment,t)},m(t,r){P(e,t,r),a=!0},p(t,r){const f={};r&520&&(f.$$scope={dirty:r,ctx:t}),e.$set(f)},i(t){a||(m(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){S(e,t)}}}function ct(s){let e,a;return{c(){e=O("span"),a=v(s[1])},l(t){e=I(t,"SPAN",{});var r=L(e);a=b(r,s[1]),r.forEach(d)},m(t,r){h(t,e,r),G(e,a)},p(t,r){r&2&&q(a,t[1])},d(t){t&&d(e)}}}function $t(s){let e,a,t,r,f,o,g,n,c,$,l=!s[3].fetching&&!s[3].error&&s[3].data.getGuide&&j(s);o=new J({props:{$$slots:{default:[dt]},$$scope:{ctx:s}}});function V(i){s[7](i)}let w={$$slots:{default:[ct]},$$scope:{ctx:s}};return s[0]!==void 0&&(w.running=s[0]),n=new it({props:w}),K.push(()=>R(n,"running",V)),{c(){l&&l.c(),e=N(),a=M(),t=O("h1"),r=v("Edit Guide"),f=M(),x(o.$$.fragment),g=M(),x(n.$$.fragment),this.h()},l(i){const u=U("svelte-2z35li",document.head);l&&l.l(u),e=N(),u.forEach(d),a=T(i),t=I(i,"H1",{class:!0});var y=L(t);r=b(y,"Edit Guide"),y.forEach(d),f=T(i),_(o.$$.fragment,i),g=T(i),_(n.$$.fragment,i),this.h()},h(){X(t,"class","text-4xl my-4 font-bold")},m(i,u){l&&l.m(document.head,null),G(document.head,e),h(i,a,u),h(i,t,u),G(t,r),h(i,f,u),P(o,i,u),h(i,g,u),P(n,i,u),$=!0},p(i,[u]){!i[3].fetching&&!i[3].error&&i[3].data.getGuide?l?(l.p(i,u),u&8&&m(l,1)):(l=j(i),l.c(),m(l,1),l.m(e.parentNode,e)):l&&(k(),p(l,1,1,()=>{l=null}),D());const y={};u&520&&(y.$$scope={dirty:u,ctx:i}),o.$set(y);const z={};u&514&&(z.$$scope={dirty:u,ctx:i}),!c&&u&1&&(c=!0,z.running=i[0],Y(()=>c=!1)),n.$set(z)},i(i){$||(m(l),m(o.$$.fragment,i),m(n.$$.fragment,i),$=!0)},o(i){p(l),p(o.$$.fragment,i),p(n.$$.fragment,i),$=!1},d(i){l&&l.d(i),d(e),i&&d(a),i&&d(t),i&&d(f),S(o,i),i&&d(g),S(n,i)}}}function mt(s,e,a){let t,r,f,o=E,g=()=>(o(),o=Q(r,i=>a(3,f=i)),r);s.$$.on_destroy.push(()=>o());let{data:n}=e;const c=Z();let $="",l=!1;const V=i=>{c.mutation(at,{guideId:t,guide:i}).toPromise().then(u=>{u.error?(console.error(u.error.message),a(1,$="Error editing guide: "+u.error.message),a(0,l=!0)):W(tt+"/guide/"+u.data.updateGuide.id)})};function w(i){l=i,a(0,l)}return s.$$set=i=>{"data"in i&&a(5,n=i.data)},s.$$.update=()=>{s.$$.dirty&32&&a(6,{guideId:t}=n,t),s.$$.dirty&64&&g(a(2,r=B({query:et,client:c,variables:{guide:t}}))),s.$$.dirty&1&&(l||a(1,$=""))},[l,$,r,f,V,n,t,w]}class vt extends A{constructor(e){super(),F(this,e,mt,$t,H,{data:5})}}export{vt as component,yt as universal};
//# sourceMappingURL=13.eec3671e.js.map
