import{S as Ct,i as bt,d as B,s as wt,v as _t,_ as Y,af as tt,Z as Dt,a8 as Pt,a4 as et,ag as lt,ah as ft,a7 as Bt,e as k,b as N,g as x,J as I,k as R,h as j,j as y,K as w,m as V,n as P,t as F,q as ut,r as A,y as Et,T as nt,p as dt,G as vt,I as gt,L as ht,M as b,O,Q as mt,a0 as K,a1 as M,a3 as pt,u as Q,f as st,W as Nt,N as L,R as Rt}from"../chunks/vendor.DAJNVlIF.js";import{c as ot,d as it,e as at,f as rt}from"../chunks/graphql.JkthYSgF.js";const{console:Tt}=Bt,C="src/routes/admin/satisfactory-versions/+page.svelte";function ct(o,t,i){const s=o.slice();return s[17]=t[i],s[18]=t,s[19]=i,s}function yt(o){let t,i,s,e,n,l="Add new Satisfactory version",c,r,f="add",u,v,p;t=new lt({props:{$$slots:{default:[Vt]},$$scope:{ctx:o}},$$inline:!0});const d={c:function(){vt(t.$$.fragment),i=N(),s=k("section"),e=k("button"),n=k("span"),n.textContent=l,c=N(),r=k("span"),r.textContent=f,this.h()},l:function(h){gt(t.$$.fragment,h),i=R(h),s=x(h,"SECTION",{class:!0});var $=j(s);e=x($,"BUTTON",{class:!0});var _=j(e);n=x(_,"SPAN",{"data-svelte-h":!0}),I(n)!=="svelte-d9orn3"&&(n.textContent=l),c=R(_),r=x(_,"SPAN",{class:!0,"data-svelte-h":!0}),I(r)!=="svelte-99y27o"&&(r.textContent=f),_.forEach(y),$.forEach(y),this.h()},h:function(){V(n,C,193,8,6639),w(r,"class","material-icons"),V(r,C,194,8,6689),w(e,"class","variant-ghost-primary btn"),V(e,C,192,6,6554),w(s,"class","p-4"),V(s,C,191,4,6526)},m:function(h,$){ht(t,h,$),P(h,i,$),P(h,s,$),b(s,e),b(e,n),b(e,c),b(e,r),u=!0,v||(p=O(e,"click",o[4],!1,!1,!1,!1),v=!0)},p:function(h,$){const _={};$&1048582&&(_.$$scope={dirty:$,ctx:h}),t.$set(_)},i:function(h){u||(A(t.$$.fragment,h),u=!0)},o:function(h){F(t.$$.fragment,h),u=!1},d:function(h){h&&(y(i),y(s)),mt(t,h),v=!1,p()}};return B("SvelteRegisterBlock",{block:d,id:yt.name,type:"else",source:"(141:2) {:else}",ctx:o}),d}function $t(o){let t,i,s=o[0].error.message+"",e;const n={c:function(){t=k("h1"),i=K("Failed to load satisfactory versions: "),e=K(s),this.h()},l:function(c){t=x(c,"H1",{class:!0});var r=j(t);i=M(r,"Failed to load satisfactory versions: "),e=M(r,s),r.forEach(y),this.h()},h:function(){w(t,"class","svelte-1egakhm"),V(t,C,158,4,5224)},m:function(c,r){P(c,t,r),b(t,i),b(t,e)},p:function(c,r){r&1&&s!==(s=c[0].error.message+"")&&pt(e,s)},i:Q,o:Q,d:function(c){c&&y(t)}};return B("SvelteRegisterBlock",{block:n,id:$t.name,type:"if",source:"(139:45) ",ctx:o}),n}function St(o){let t,i="Loading satisfactory versions...";const s={c:function(){t=k("h1"),t.textContent=i,this.h()},l:function(n){t=x(n,"H1",{class:!0,"data-svelte-h":!0}),I(t)!=="svelte-kaw34n"&&(t.textContent=i),this.h()},h:function(){w(t,"class","svelte-1egakhm"),V(t,C,156,4,5132)},m:function(n,l){P(n,t,l)},p:Q,i:Q,o:Q,d:function(n){n&&y(t)}};return B("SvelteRegisterBlock",{block:s,id:St.name,type:"if",source:"(137:2) {#if $satisfactoryVersionsQuery.fetching}",ctx:o}),s}function kt(o){let t=o[17].version+"",i;const s={c:function(){i=K(t)},l:function(n){i=M(n,t)},m:function(n,l){P(n,i,l)},p:function(n,l){l&4&&t!==(t=n[17].version+"")&&pt(i,t)},d:function(n){n&&y(i)}};return B("SvelteRegisterBlock",{block:s,id:kt.name,type:"slot",source:'(145:10) <svelte:fragment slot=\\"summary\\">',ctx:o}),s}function xt(o){let t,i,s="Game CL#",e,n,l=o[17],c,r,f="Engine Version",u,v,p,d,g,h="Delete",$,_,U;function z(){o[7].call(n,o[18],o[19])}const q=()=>o[8](n,l),G=()=>o[8](null,l);function J(){return o[9](o[17])}function a(){o[10].call(v,o[18],o[19])}function m(){return o[11](o[17])}function E(...T){return o[12](o[17],...T)}const H={c:function(){t=k("div"),i=k("div"),i.textContent=s,e=N(),n=k("input"),c=N(),r=k("div"),r.textContent=f,u=N(),v=k("input"),p=N(),d=k("button"),g=k("span"),g.textContent=h,$=N(),this.h()},l:function(D){t=x(D,"DIV",{});var S=j(t);i=x(S,"DIV",{"data-svelte-h":!0}),I(i)!=="svelte-159nkk2"&&(i.textContent=s),e=R(S),n=x(S,"INPUT",{type:!0,class:!0,placeholder:!0}),c=R(S),r=x(S,"DIV",{"data-svelte-h":!0}),I(r)!=="svelte-167e69y"&&(r.textContent=f),u=R(S),v=x(S,"INPUT",{type:!0,class:!0,placeholder:!0}),S.forEach(y),p=R(D),d=x(D,"BUTTON",{class:!0});var X=j(d);g=x(X,"SPAN",{"data-svelte-h":!0}),I(g)!=="svelte-gz26bx"&&(g.textContent=h),X.forEach(y),$=R(D),this.h()},h:function(){V(i,C,166,14,5587),w(n,"type","text"),w(n,"class","input p-2"),w(n,"placeholder","Version"),V(n,C,167,14,5621),V(r,C,174,14,5949),w(v,"type","text"),w(v,"class","input p-2"),w(v,"placeholder","Engine version"),V(v,C,175,14,5989),V(t,C,165,12,5567),V(g,C,184,14,6394),w(d,"class","variant-ghost-error btn"),V(d,C,183,12,6283)},m:function(D,S){P(D,t,S),b(t,i),b(t,e),b(t,n),L(n,o[17].version),q(),b(t,c),b(t,r),b(t,u),b(t,v),L(v,o[17].engine_version),P(D,p,S),P(D,d,S),b(d,g),P(D,$,S),_||(U=[O(n,"input",z),O(n,"change",J,!1,!1,!1,!1),O(v,"input",a),O(v,"change",m,!1,!1,!1,!1),O(d,"click",E,!1,!1,!1,!1)],_=!0)},p:function(D,S){o=D,S&4&&n.value!==o[17].version&&L(n,o[17].version),l!==o[17]&&(G(),l=o[17],q()),S&4&&v.value!==o[17].engine_version&&L(v,o[17].engine_version)},d:function(D){D&&(y(t),y(p),y(d),y($)),G(),_=!1,Rt(U)}};return B("SvelteRegisterBlock",{block:H,id:xt.name,type:"slot",source:'(146:10) <svelte:fragment slot=\\"content\\">',ctx:o}),H}function W(o){let t,i;t=new ft({props:{$$slots:{content:[xt],summary:[kt]},$$scope:{ctx:o}},$$inline:!0});const s={c:function(){vt(t.$$.fragment)},l:function(n){gt(t.$$.fragment,n)},m:function(n,l){ht(t,n,l),i=!0},p:function(n,l){const c={};l&1048582&&(c.$$scope={dirty:l,ctx:n}),t.$set(c)},i:function(n){i||(A(t.$$.fragment,n),i=!0)},o:function(n){F(t.$$.fragment,n),i=!1},d:function(n){mt(t,n)}};return B("SvelteRegisterBlock",{block:s,id:W.name,type:"each",source:"(143:6) {#each satisfactoryVersions as satisfactoryVersion}",ctx:o}),s}function Vt(o){let t,i,s=nt(o[2]),e=[];for(let c=0;c<s.length;c+=1)e[c]=W(ct(o,s,c));const n=c=>F(e[c],1,1,()=>{e[c]=null}),l={c:function(){for(let r=0;r<e.length;r+=1)e[r].c();t=st()},l:function(r){for(let f=0;f<e.length;f+=1)e[f].l(r);t=st()},m:function(r,f){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(r,f);P(r,t,f),i=!0},p:function(r,f){if(f&102){s=nt(r[2]);let u;for(u=0;u<s.length;u+=1){const v=ct(r,s,u);e[u]?(e[u].p(v,f),A(e[u],1)):(e[u]=W(v),e[u].c(),A(e[u],1),e[u].m(t.parentNode,t))}for(dt(),u=s.length;u<e.length;u+=1)n(u);ut()}},i:function(r){if(!i){for(let f=0;f<s.length;f+=1)A(e[f]);i=!0}},o:function(r){e=e.filter(Boolean);for(let f=0;f<e.length;f+=1)F(e[f]);i=!1},d:function(r){r&&y(t),Nt(e,r)}};return B("SvelteRegisterBlock",{block:l,id:Vt.name,type:"slot",source:"(142:4) <Accordion>",ctx:o}),l}function Z(o){let t,i="Satisfactory Versions",s,e,n,l,c;const r=[St,$t,yt],f=[];function u(p,d){return p[0].fetching?0:p[0].error?1:2}n=u(o),l=f[n]=r[n](o);const v={c:function(){t=k("h1"),t.textContent=i,s=N(),e=k("div"),l.c(),this.h()},l:function(d){t=x(d,"H1",{class:!0,"data-svelte-h":!0}),I(t)!=="svelte-scghcv"&&(t.textContent=i),s=R(d),e=x(d,"DIV",{class:!0});var g=j(e);l.l(g),g.forEach(y),this.h()},h:function(){w(t,"class","svelte-1egakhm"),V(t,C,152,0,5033),w(e,"class","card"),V(e,C,154,0,5065)},m:function(d,g){P(d,t,g),P(d,s,g),P(d,e,g),f[n].m(e,null),c=!0},p:function(d,[g]){let h=n;n=u(d),n===h?f[n].p(d,g):(dt(),F(f[h],1,1,()=>{f[h]=null}),ut(),l=f[n],l?l.p(d,g):(l=f[n]=r[n](d),l.c()),A(l,1),l.m(e,null))},i:function(d){c||(A(l),c=!0)},o:function(d){F(l),c=!1},d:function(d){d&&(y(t),y(s),y(e)),f[n].d()}};return B("SvelteRegisterBlock",{block:v,id:Z.name,type:"component",source:"",ctx:o}),v}function It(o,t,i){let s,e,{$$slots:n={},$$scope:l}=t;_t("Page",n,[]);const c=Y(),r={},f={},u=tt({query:ot,client:c});Dt(u,"satisfactoryVersionsQuery"),Pt(o,u,a=>i(0,e=a));const v=et();function p(){if(s.find(a=>a.id<0))r[s[s.length-1].id].setOpen(!0),f[s[s.length-1].id].focus();else{const a={id:-1,version:0,engine_version:"4.26"};s.push(a),i(2,s),i(0,e),setTimeout(()=>{r[a.id].setOpen(!0);const m=f[a.id];m.focus(),m.getElement().querySelectorAll("input")[0].select()},0)}}async function d(a){if(a.version===0)return;console.log(a);let m=!1;if(a.id<0){try{const E=await c.mutation(it,{satisfactoryVersion:{version:a.version,engine_version:a.engine_version}}).toPromise();E.data&&(a.id=E.data.createSatisfactoryVersion.id,m=!0)}catch(E){console.log(E)}if(!m){v.trigger({message:`Failed to create Satisfactory version '${a.version}'!`,background:"variant-filled-error",timeout:2e3});return}}else{try{m=(await c.mutation(rt,{id:a.id,satisfactoryVersion:{version:a.version,engine_version:a.engine_version}}).toPromise()).data.updateSatisfactoryVersion!=null}catch{}if(!m){v.trigger({message:`Failed to update Satisfactory version '${a.version}'!`,background:"variant-filled-error",timeout:2e3});return}}v.trigger({message:`Satisfactory version '${a.version}' saved!`,background:"variant-filled-success",timeout:2e3})}async function g(a){if(!(a.id<0)){let m=!1;try{m=(await c.mutation(at,{satisfactoryVersionID:a.id}).toPromise()).data.deleteSatisfactoryVersion,m&&i(2,s=s.filter(H=>H.id!==a.id))}catch{m=!1}if(!m){v.trigger({message:`Failed to remove Satisfactory version '${a.version}'!`,background:"variant-filled-error",timeout:2e3});return}}v.trigger({message:`Satisfactory version '${a.version}' removed!`,background:"variant-filled-success",timeout:2e3})}function h(a,m){a.stopPropagation(),g(m)}const $=[];Object.keys(t).forEach(a=>{!~$.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&Tt.warn(`<Page> was created with unknown prop '${a}'`)});function _(a,m){a[m].version=this.value,i(2,s),i(0,e)}function U(a,m){Et[a?"unshift":"push"](()=>{f[m.id]=a,i(1,f)})}const z=a=>d(a);function q(a,m){a[m].engine_version=this.value,i(2,s),i(0,e)}const G=a=>d(a),J=(a,m)=>h(m,a);return o.$capture_state=()=>({getContextClient:Y,queryStore:tt,CreateSatisfactoryVersionDocument:it,DeleteSatisfactoryVersionDocument:at,GetSatisfactoryVersionsDocument:ot,UpdateSatisfactoryVersionDocument:rt,Accordion:lt,AccordionItem:ft,getToastStore:et,client:c,panels:r,versionFields:f,satisfactoryVersionsQuery:u,toastStore:v,newSatisfactoryVersion:p,satisfactoryVersionChange:d,deleteSatisfactoryVersion:g,onDeleteClick:h,satisfactoryVersions:s,$satisfactoryVersionsQuery:e}),o.$inject_state=a=>{"satisfactoryVersions"in a&&i(2,s=a.satisfactoryVersions)},t&&"$$inject"in t&&o.$inject_state(t.$$inject),o.$$.update=()=>{o.$$.dirty&1&&i(2,s=e.data?.getSatisfactoryVersions||[])},[e,f,s,u,p,d,h,_,U,z,q,G,J]}class jt extends Ct{constructor(t){super(t),bt(this,t,It,Z,wt,{}),B("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:Z.name})}}export{jt as component};
//# sourceMappingURL=5.B9C0FNy1.js.map
