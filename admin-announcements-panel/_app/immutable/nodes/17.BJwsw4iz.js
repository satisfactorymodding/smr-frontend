import{t as st,u as V}from"../chunks/graphql.JkthYSgF.js";import{l as rt}from"../chunks/gql.DGDorg1Q.js";import{af as ct,S as dt,i as lt,d as y,s as ut,v as ft,_ as B,a4 as T,a5 as D,a6 as N,ac as H,a7 as mt,f as L,b as z,e as S,H as pt,j as g,k as F,g as P,J as W,h as j,K as G,m as I,M,n as v,r as $,t as b,q as J,u as w,x as gt,G as X,I as Y,L as Z,Q as tt,p as K,a0 as Q,a1 as A,a3 as $t}from"../chunks/vendor.DAJNVlIF.js";import{M as et}from"../chunks/ModForm.D1Ac1HvO.js";import{M as ot}from"../chunks/MetaDescriptors.Dnhe40e_.js";const ht=async({params:o,parent:t})=>({...o,...await rt({mod:ct({query:st,client:(await t()).client,variables:{mod:o.modId},requestPolicy:"network-only"})})}),Et=Object.freeze(Object.defineProperty({__proto__:null,load:ht},Symbol.toStringTag,{value:"Module"})),{console:U}=mt,_="src/routes/mod/[modId]/edit/+page.svelte";function O(o){let t,s;t=new ot({props:{description:"Editing mod "+o[0].data.mod.name,title:"Edit mod "+o[0].data.mod.name,image:o[0].data.mod.logo},$$inline:!0});const r={c:function(){X(t.$$.fragment)},l:function(e){Y(t.$$.fragment,e)},m:function(e,a){Z(t,e,a),s=!0},p:function(e,a){const d={};a&1&&(d.description="Editing mod "+e[0].data.mod.name),a&1&&(d.title="Edit mod "+e[0].data.mod.name),a&1&&(d.image=e[0].data.mod.logo),t.$set(d)},i:function(e){s||($(t.$$.fragment,e),s=!0)},o:function(e){b(t.$$.fragment,e),s=!1},d:function(e){tt(t,e)}};return y("SvelteRegisterBlock",{block:r,id:O.name,type:"if",source:"(48:2) {#if !$mod.fetching && !$mod.error && $mod.data.mod}",ctx:o}),r}function nt(o){let t,s;t=new et({props:{onSubmit:o[3],initialValues:o[1],editing:!0,submitText:"Save"},$$inline:!0});const r={c:function(){X(t.$$.fragment)},l:function(e){Y(t.$$.fragment,e)},m:function(e,a){Z(t,e,a),s=!0},p:function(e,a){const d={};a&2&&(d.initialValues=e[1]),t.$set(d)},i:function(e){s||($(t.$$.fragment,e),s=!0)},o:function(e){b(t.$$.fragment,e),s=!1},d:function(e){tt(t,e)}};return y("SvelteRegisterBlock",{block:r,id:nt.name,type:"else",source:"(64:4) {:else}",ctx:o}),r}function at(o){let t,s,r=o[0].error.message+"",n;const e={c:function(){t=S("p"),s=Q("Oh no... "),n=Q(r),this.h()},l:function(d){t=P(d,"P",{});var u=j(t);s=A(u,"Oh no... "),n=A(u,r),u.forEach(g),this.h()},h:function(){I(t,_,69,6,1801)},m:function(d,u){v(d,t,u),M(t,s),M(t,n)},p:function(d,u){u&1&&r!==(r=d[0].error.message+"")&&$t(n,r)},i:w,o:w,d:function(d){d&&g(t)}};return y("SvelteRegisterBlock",{block:e,id:at.name,type:"if",source:"(62:25) ",ctx:o}),e}function it(o){let t,s="Loading...";const r={c:function(){t=S("p"),t.textContent=s,this.h()},l:function(e){t=P(e,"P",{"data-svelte-h":!0}),W(t)!=="svelte-qdsr2u"&&(t.textContent=s),this.h()},h:function(){I(t,_,67,6,1751)},m:function(e,a){v(e,t,a)},p:w,i:w,o:w,d:function(e){e&&g(t)}};return y("SvelteRegisterBlock",{block:r,id:it.name,type:"if",source:"(60:4) {#if $mod.fetching}",ctx:o}),r}function q(o){let t,s,r,n="Edit Mod",e,a,d,u,f,x,l=!o[0].fetching&&!o[0].error&&o[0].data.mod&&O(o);const k=[it,at,nt],m=[];function E(i,c){return i[0].fetching?0:i[0].error?1:2}u=E(o),f=m[u]=k[u](o);const C={c:function(){l&&l.c(),t=L(),s=z(),r=S("h1"),r.textContent=n,e=z(),a=S("div"),d=S("section"),f.c(),this.h()},l:function(c){const p=pt("svelte-q8g25b",document.head);l&&l.l(p),t=L(),p.forEach(g),s=F(c),r=P(c,"H1",{class:!0,"data-svelte-h":!0}),W(r)!=="svelte-1bmvkg7"&&(r.textContent=n),e=F(c),a=P(c,"DIV",{class:!0});var h=j(a);d=P(h,"SECTION",{});var R=j(d);f.l(R),R.forEach(g),h.forEach(g),this.h()},h:function(){G(r,"class","my-4 text-4xl font-bold"),I(r,_,62,0,1635),I(d,_,65,2,1711),G(a,"class","card p-4"),I(a,_,64,0,1686)},m:function(c,p){l&&l.m(document.head,null),M(document.head,t),v(c,s,p),v(c,r,p),v(c,e,p),v(c,a,p),M(a,d),m[u].m(d,null),x=!0},p:function(c,[p]){!c[0].fetching&&!c[0].error&&c[0].data.mod?l?(l.p(c,p),p&1&&$(l,1)):(l=O(c),l.c(),$(l,1),l.m(t.parentNode,t)):l&&(K(),b(l,1,1,()=>{l=null}),J());let h=u;u=E(c),u===h?m[u].p(c,p):(K(),b(m[h],1,1,()=>{m[h]=null}),J(),f=m[u],f?f.p(c,p):(f=m[u]=k[u](c),f.c()),$(f,1),f.m(d,null))},i:function(c){x||($(l),$(f),x=!0)},o:function(c){b(l),b(f),x=!1},d:function(c){c&&(g(s),g(r),g(e),g(a)),l&&l.d(c),g(t),m[u].d()}};return y("SvelteRegisterBlock",{block:C,id:q.name,type:"component",source:"",ctx:o}),C}function vt(o,t,s){let r,n,e,a,d=w,u=()=>(d(),d=gt(n,i=>s(0,a=i)),n);o.$$.on_destroy.push(()=>d());let{$$slots:f={},$$scope:x}=t;ft("Page",f,[]);let{data:l}=t;const k=B(),m=T(),E=i=>{k.mutation(V,{modId:H(n).data.mod.id,mod:i}).toPromise().then(c=>{c.error?(console.error(c.error.message),m.trigger({message:"Error editing mod: "+c.error.message,background:"variant-filled-error",autohide:!1})):(m.trigger({message:"Mod updated",background:"variant-filled-success",timeout:5e3}),D(N+"/mod/"+r))})};o.$$.on_mount.push(function(){l===void 0&&!("data"in t||o.$$.bound[o.$$.props.data])&&U.warn("<Page> was created without expected prop 'data'")});const C=["data"];return Object.keys(t).forEach(i=>{!~C.indexOf(i)&&i.slice(0,2)!=="$$"&&i!=="slot"&&U.warn(`<Page> was created with unknown prop '${i}'`)}),o.$$set=i=>{"data"in i&&s(4,l=i.data)},o.$capture_state=()=>({getContextClient:B,EditModDocument:V,goto:D,ModForm:et,base:N,MetaDescriptors:ot,getToastStore:T,get:H,data:l,client:k,toastStore:m,onSubmit:E,initialValues:e,modId:r,mod:n,$mod:a}),o.$inject_state=i=>{"data"in i&&s(4,l=i.data),"initialValues"in i&&s(1,e=i.initialValues),"modId"in i&&(r=i.modId),"mod"in i&&u(s(2,n=i.mod))},t&&"$$inject"in t&&o.$inject_state(t.$$inject),o.$$.update=()=>{o.$$.dirty&16&&u(s(2,{modId:r,mod:n}=l,n)),o.$$.dirty&1&&s(1,e=a.data?{...a.data.mod,logo:void 0}:void 0)},[a,e,n,E,l]}class St extends dt{constructor(t){super(t),lt(this,t,vt,q,ut,{data:4}),y("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:q.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{St as component,Et as universal};
//# sourceMappingURL=17.BJwsw4iz.js.map
