{"version":3,"file":"forms.dbf7831a.js","sources":["../../../../../../src/lib/utils/forms.ts"],"sourcesContent":["import type { ZodArray, ZodObject, ZodRawShape, ZodTypeAny } from 'zod';\nimport { ZodOptional } from 'zod';\n\nexport const trimNonSchema = <T, K extends T>(data: K, schema: ZodObject<ZodRawShape>): T =>\n  Object.fromEntries(\n    Object.entries(data)\n      .map((o) => {\n        if (Object.keys(schema.shape).indexOf(o[0]) >= 0) {\n          let value = o[1];\n          if (typeof value === 'object') {\n            let objSchema = schema.shape[o[0]];\n            if (objSchema instanceof ZodOptional) {\n              objSchema = (objSchema as ZodOptional<ZodTypeAny>).unwrap();\n            }\n\n            if (Array.isArray(value)) {\n              const arrayType = (objSchema as ZodArray<ZodTypeAny>).element;\n              for (let i = 0; i < value.length; i++) {\n                if (typeof value[i] === 'object') {\n                  value[i] = trimNonSchema(value[i], arrayType as ZodObject<ZodRawShape>);\n                }\n              }\n            } else if (value.constructor.name !== 'File') {\n              value = trimNonSchema(value, objSchema as ZodObject<ZodRawShape>);\n            }\n          }\n\n          return [o[0], value];\n        }\n\n        return undefined;\n      })\n      .filter((val) => !!val)\n  ) as T;\n"],"names":["trimNonSchema","data","schema","Object","fromEntries","entries","map","o","keys","shape","indexOf","value","objSchema","ZodOptional","unwrap","Array","isArray","arrayType","element","i","length","constructor","name","filter","val"],"mappings":"wCAGO,MAAMA,EAAgB,CAAiBC,EAASC,IACrDC,OAAOC,YACLD,OAAOE,QAAQJ,CAAAA,EACZK,IAAKC,GACA,CAAA,GAAAJ,OAAOK,KAAKN,EAAOO,OAAOC,QAAQH,EAAE,CAAO,CAAA,GAAA,EAAG,CAC5C,IAAAI,EAAQJ,EAAE,CAAA,EACV,UAAOI,GAAU,SAAU,CAC7B,IAAIC,EAAYV,EAAOO,MAAMF,EAAE,CAAA,CAAA,EAK3B,GAJAK,aAAqBC,IACvBD,EAAaA,EAAsCE,UAGjDC,MAAMC,QAAQL,CAAQ,EAAA,CACxB,MAAMM,EAAaL,EAAmCM,QACtD,QAASC,EAAI,EAAGA,EAAIR,EAAMS,OAAQD,WACrBR,EAAMQ,CAAAA,GAAO,WACtBR,EAAMQ,GAAKnB,EAAcW,EAAMQ,CAAIF,EAAAA,CAAAA,EAG9B,MAAAN,EAAMU,YAAYC,OAAS,SAC5BX,EAAAX,EAAcW,EAAOC,CAAAA,EAEjC,CAEA,MAAO,CAACL,EAAE,GAAII,CAChB,CAAA,CAEO,CAAA,EAERY,OAAQC,GAAAA,CAAAA,CAAUA"}