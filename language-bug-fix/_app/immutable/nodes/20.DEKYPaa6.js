import{S as Ve,i as ye,d as T,s as ke,v as xe,_ as te,a4 as ne,aj as oe,af as se,a5 as z,a6 as A,a7 as we,f as ie,b as F,e as x,a0 as K,H as Se,j as g,k as H,g as w,h as B,J as L,a1 as U,K as M,m as S,M as k,n as j,O as Ee,r as _,t as O,q as ae,u as R,x as Ie,G as de,I as ue,L as me,Q as ge,p as re,a3 as Ce}from"../chunks/vendor.DfSGHnhZ.js";import{v as ce,w as le}from"../chunks/graphql.JkthYSgF.js";import{V as pe}from"../chunks/VersionForm.BjHvO8Bf.js";import{M as ve}from"../chunks/MetaDescriptors.D7gVSY6B.js";const Pe=async({params:o})=>({...o}),Te=Object.freeze(Object.defineProperty({__proto__:null,load:Pe},Symbol.toStringTag,{value:"Module"})),{console:fe}=we,E="src/routes/mod/[modId]/version/[versionId]/edit/+page.svelte";function J(o){let e,s;e=new ve({props:{description:"Editing mod version "+o[0].data.getVersion.mod.name+" "+o[0].data.getVersion.version,title:"Edit mod version "+o[0].data.getVersion.mod.name+" "+o[0].data.getVersion.version},$$inline:!0});const i={c:function(){de(e.$$.fragment)},l:function(t){ue(e.$$.fragment,t)},m:function(t,c){me(e,t,c),s=!0},p:function(t,c){const a={};c&1&&(a.description="Editing mod version "+t[0].data.getVersion.mod.name+" "+t[0].data.getVersion.version),c&1&&(a.title="Edit mod version "+t[0].data.getVersion.mod.name+" "+t[0].data.getVersion.version),e.$set(a)},i:function(t){s||(_(e.$$.fragment,t),s=!0)},o:function(t){O(e.$$.fragment,t),s=!1},d:function(t){ge(e,t)}};return T("SvelteRegisterBlock",{block:i,id:J.name,type:"if",source:"(66:2) {#if !$version.fetching && !$version.error && $version.data.getVersion}",ctx:o}),i}function $e(o){let e,s;e=new pe({props:{onSubmit:o[3],initialValues:o[1],modReference:o[0].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save",submitIcon:"save"},$$inline:!0});const i={c:function(){de(e.$$.fragment)},l:function(t){ue(e.$$.fragment,t)},m:function(t,c){me(e,t,c),s=!0},p:function(t,c){const a={};c&2&&(a.initialValues=t[1]),c&1&&(a.modReference=t[0].data.getVersion.mod.mod_reference),e.$set(a)},i:function(t){s||(_(e.$$.fragment,t),s=!0)},o:function(t){O(e.$$.fragment,t),s=!1},d:function(t){ge(e,t)}};return T("SvelteRegisterBlock",{block:i,id:$e.name,type:"else",source:"(88:4) {:else}",ctx:o}),i}function he(o){let e,s,i=o[0].error.message+"",n;const t={c:function(){e=x("p"),s=K("Oh no... "),n=K(i),this.h()},l:function(a){e=w(a,"P",{});var d=B(e);s=U(d,"Oh no... "),n=U(d,i),d.forEach(g),this.h()},h:function(){S(e,E,99,6,2750)},m:function(a,d){j(a,e,d),k(e,s),k(e,n)},p:function(a,d){d&1&&i!==(i=a[0].error.message+"")&&Ce(n,i)},i:R,o:R,d:function(a){a&&g(e)}};return T("SvelteRegisterBlock",{block:t,id:he.name,type:"if",source:"(86:29) ",ctx:o}),t}function be(o){let e,s="Loading...";const i={c:function(){e=x("p"),e.textContent=s,this.h()},l:function(t){e=w(t,"P",{"data-svelte-h":!0}),L(e)!=="svelte-qdsr2u"&&(e.textContent=s),this.h()},h:function(){S(e,E,97,6,2696)},m:function(t,c){j(t,e,c)},p:R,i:R,o:R,d:function(t){t&&g(e)}};return T("SvelteRegisterBlock",{block:i,id:be.name,type:"if",source:"(84:4) {#if $version.fetching}",ctx:o}),i}function Q(o){let e,s,i,n,t="Edit Version",c,a,d,h,q="arrow_back",D,b,p,V,u,m,I,P,G,f=!o[0].fetching&&!o[0].error&&o[0].data.getVersion&&J(o);const r=[be,he,$e],v=[];function W(y,l){return y[0].fetching?0:y[0].error?1:2}u=W(o),m=v[u]=r[u](o);const X={c:function(){f&&f.c(),e=ie(),s=F(),i=x("div"),n=x("h1"),n.textContent=t,c=F(),a=x("div"),d=x("button"),h=x("span"),h.textContent=q,D=K(`
      Back to Versions`),b=F(),p=x("div"),V=x("section"),m.c(),this.h()},l:function(l){const $=Se("svelte-wzsk0g",document.head);f&&f.l($),e=ie(),$.forEach(g),s=H(l),i=w(l,"DIV",{class:!0});var C=B(i);n=w(C,"H1",{class:!0,"data-svelte-h":!0}),L(n)!=="svelte-142h57n"&&(n.textContent=t),c=H(C),a=w(C,"DIV",{});var Y=B(a);d=w(Y,"BUTTON",{class:!0});var N=B(d);h=w(N,"SPAN",{class:!0,"data-svelte-h":!0}),L(h)!=="svelte-qua3zr"&&(h.textContent=q),D=U(N,`
      Back to Versions`),N.forEach(g),Y.forEach(g),C.forEach(g),b=H(l),p=w(l,"DIV",{class:!0});var Z=B(p);V=w(Z,"SECTION",{});var ee=B(V);m.l(ee),ee.forEach(g),Z.forEach(g),this.h()},h:function(){M(n,"class","my-4 text-4xl font-bold"),S(n,E,86,2,2364),M(h,"class","material-icons pr-2"),S(h,E,89,6,2526),M(d,"class","variant-ghost-primary btn"),S(d,E,88,4,2430),S(a,E,87,2,2420),M(i,"class","flex h-auto flex-wrap items-center justify-between"),S(i,E,85,0,2297),S(V,E,95,2,2652),M(p,"class","card p-4"),S(p,E,94,0,2627)},m:function(l,$){f&&f.m(document.head,null),k(document.head,e),j(l,s,$),j(l,i,$),k(i,n),k(i,c),k(i,a),k(a,d),k(d,h),k(d,D),j(l,b,$),j(l,p,$),k(p,V),v[u].m(V,null),I=!0,P||(G=Ee(d,"click",o[8],!1,!1,!1,!1),P=!0)},p:function(l,[$]){!l[0].fetching&&!l[0].error&&l[0].data.getVersion?f?(f.p(l,$),$&1&&_(f,1)):(f=J(l),f.c(),_(f,1),f.m(e.parentNode,e)):f&&(re(),O(f,1,1,()=>{f=null}),ae());let C=u;u=W(l),u===C?v[u].p(l,$):(re(),O(v[C],1,1,()=>{v[C]=null}),ae(),m=v[u],m?m.p(l,$):(m=v[u]=r[u](l),m.c()),_(m,1),m.m(V,null))},i:function(l){I||(_(f),_(m),I=!0)},o:function(l){O(f),O(m),I=!1},d:function(l){l&&(g(s),g(i),g(b),g(p)),f&&f.d(l),g(e),v[u].d(),P=!1,G()}};return T("SvelteRegisterBlock",{block:X,id:Q.name,type:"component",source:"",ctx:o}),X}function _e(o,e,s){let i,n,t,c,a,d=R,h=()=>(d(),d=Ie(t,r=>s(0,a=r)),t);o.$$.on_destroy.push(()=>d());let{$$slots:q={},$$scope:D}=e;xe("Page",q,[]);let{data:b}=e;const p=te(),V=ne(),u=async r=>p.mutation(le,{versionId:n,version:r}).toPromise().then(v=>{if(v.error)console.error(v.error.message),V.trigger({message:"Error editing version: "+v.error.message,background:"variant-filled-error",autohide:!1});else return V.trigger({message:"Version updated",background:"variant-filled-success",timeout:5e3}),z(A+"/mod/"+i+"/version/"+n)}),m=()=>{z(A+"/mod/"+i+"/version/"+n)},I={type:"confirm",title:"Go Back?",buttonTextCancel:"Keep Editing",buttonTextConfirm:"Go Back",body:"Going back will discard any unsaved changes. Are you sure you wish to continue?",response:r=>{r&&m()}},P=oe();o.$$.on_mount.push(function(){b===void 0&&!("data"in e||o.$$.bound[o.$$.props.data])&&fe.warn("<Page> was created without expected prop 'data'")});const G=["data"];Object.keys(e).forEach(r=>{!~G.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&fe.warn(`<Page> was created with unknown prop '${r}'`)});const f=()=>P.trigger(I);return o.$$set=r=>{"data"in r&&s(6,b=r.data)},o.$capture_state=()=>({queryStore:se,getContextClient:te,GetModVersionDocument:ce,UpdateVersionDocument:le,goto:z,VersionForm:pe,base:A,MetaDescriptors:ve,getModalStore:oe,getToastStore:ne,data:b,client:p,toastStore:V,onSubmit:u,goBackFn:m,backModal:I,modalStore:P,versionId:n,modId:i,initialValues:c,version:t,$version:a}),o.$inject_state=r=>{"data"in r&&s(6,b=r.data),"versionId"in r&&s(7,n=r.versionId),"modId"in r&&(i=r.modId),"initialValues"in r&&s(1,c=r.initialValues),"version"in r&&h(s(2,t=r.version))},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&64&&s(7,{modId:i,versionId:n}=b,n),o.$$.dirty&128&&h(s(2,t=se({query:ce,client:p,variables:{version:n}}))),o.$$.dirty&1&&s(1,c=a.data?{...a.data.getVersion,logo:void 0}:void 0)},[a,c,t,u,I,P,b,n,f]}class Me extends Ve{constructor(e){super(e),ye(this,e,_e,Q,ke,{data:6}),T("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Q.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Me as component,Te as universal};
//# sourceMappingURL=20.DEKYPaa6.js.map
