import{S as ft,i as lt,d as b,s as dt,bo as Q,r as $t,T as gt,v as pt,aJ as A,aL as F,Y as mt,Z as ht,aN as H,bp as U,a_ as J,ao as bt,k as B,a6 as z,x as C,L as G,a8 as E,bi as vt,q as p,a9 as q,y as O,z as M,N as S,ab as P,ac as xt,C as N,ad as y,l as x,ae as _,p as m,t as h,n as W,ai as yt,aj as T,m as X,O as tt,P as w}from"../chunks/vendor.650b2849.js";import{r as Y,E as Z}from"../chunks/graphql.04d4ab78.js";import{T as et}from"../chunks/Toast.5d702d7b.js";import{G as nt}from"../chunks/GuideForm.165f328c.js";import{M as it}from"../chunks/MetaDescriptors.49080b4b.js";const kt=async({params:o})=>({...o}),Tt=Object.freeze(Object.defineProperty({__proto__:null,load:kt},Symbol.toStringTag,{value:"Module"})),{console:K}=bt,I="src/routes/guide/[guideId]/edit/+page.svelte";function D(o){let t,i;t=new it({props:{description:"Editing guide '"+o[2].data.getGuide.short_description+"'",title:"Edit guide '"+o[2].data.getGuide.name+"'"},$$inline:!0});const a={c:function(){E(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,n){_(t,e,n),i=!0},p:function(e,n){const f={};n&4&&(f.description="Editing guide '"+e[2].data.getGuide.short_description+"'"),n&4&&(f.title="Edit guide '"+e[2].data.getGuide.name+"'"),t.$set(f)},i:function(e){i||(m(t.$$.fragment,e),i=!0)},o:function(e){h(t.$$.fragment,e),i=!1},d:function(e){T(t,e)}};return b("SvelteRegisterBlock",{block:a,id:D.name,type:"if",source:"(44:2) {#if !$guide.fetching && !$guide.error && $guide.data.getGuide}",ctx:o}),a}function ot(o){let t,i;t=new nt({props:{onSubmit:o[4],initialValues:o[2].data.getGuide,submitText:"Save"},$$inline:!0});const a={c:function(){E(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,n){_(t,e,n),i=!0},p:function(e,n){const f={};n&4&&(f.initialValues=e[2].data.getGuide),t.$set(f)},i:function(e){i||(m(t.$$.fragment,e),i=!0)},o:function(e){h(t.$$.fragment,e),i=!1},d:function(e){T(t,e)}};return b("SvelteRegisterBlock",{block:a,id:ot.name,type:"else",source:"(59:4) {:else}",ctx:o}),a}function rt(o){let t,i,a=o[2].error.message+"",r;const e={c:function(){t=C("p"),i=G("Oh no... "),r=G(a),this.h()},l:function(f){t=O(f,"P",{});var d=M(t);i=S(d,"Oh no... "),r=S(d,a),d.forEach(p),this.h()},h:function(){N(t,I,57,6,1691)},m:function(f,d){x(f,t,d),y(t,i),y(t,r)},p:function(f,d){d&4&&a!==(a=f[2].error.message+"")&&tt(r,a)},i:w,o:w,d:function(f){f&&p(t)}};return b("SvelteRegisterBlock",{block:e,id:rt.name,type:"if",source:"(57:27) ",ctx:o}),e}function st(o){let t,i;const a={c:function(){t=C("p"),i=G("Loading..."),this.h()},l:function(e){t=O(e,"P",{});var n=M(t);i=S(n,"Loading..."),n.forEach(p),this.h()},h:function(){N(t,I,55,6,1639)},m:function(e,n){x(e,t,n),y(t,i)},p:w,i:w,o:w,d:function(e){e&&p(t)}};return b("SvelteRegisterBlock",{block:a,id:st.name,type:"if",source:"(55:4) {#if $guide.fetching}",ctx:o}),a}function at(o){let t,i,a,r;const e=[st,rt,ot],n=[];function f($,l){return $[2].fetching?0:$[2].error?1:2}t=f(o),i=n[t]=e[t](o);const d={c:function(){i.c(),a=B()},l:function(l){i.l(l),a=B()},m:function(l,c){n[t].m(l,c),x(l,a,c),r=!0},p:function(l,c){let v=t;t=f(l),t===v?n[t].p(l,c):(X(),h(n[v],1,1,()=>{n[v]=null}),W(),i=n[t],i?i.p(l,c):(i=n[t]=e[t](l),i.c()),m(i,1),i.m(a.parentNode,a))},i:function(l){r||(m(i),r=!0)},o:function(l){h(i),r=!1},d:function(l){n[t].d(l),l&&p(a)}};return b("SvelteRegisterBlock",{block:d,id:at.name,type:"slot",source:"(54:2) <Content>",ctx:o}),d}function ct(o){let t,i;t=new U({props:{$$slots:{default:[at]},$$scope:{ctx:o}},$$inline:!0});const a={c:function(){E(t.$$.fragment)},l:function(e){P(t.$$.fragment,e)},m:function(e,n){_(t,e,n),i=!0},p:function(e,n){const f={};n&516&&(f.$$scope={dirty:n,ctx:e}),t.$set(f)},i:function(e){i||(m(t.$$.fragment,e),i=!0)},o:function(e){h(t.$$.fragment,e),i=!1},d:function(e){T(t,e)}};return b("SvelteRegisterBlock",{block:a,id:ct.name,type:"slot",source:"(53:0) <Card>",ctx:o}),a}function ut(o){let t,i;const a={c:function(){t=C("span"),i=G(o[1]),this.h()},l:function(e){t=O(e,"SPAN",{});var n=M(t);i=S(n,o[1]),n.forEach(p),this.h()},h:function(){N(t,I,65,2,1896)},m:function(e,n){x(e,t,n),y(t,i)},p:function(e,n){n&2&&tt(i,e[1])},d:function(e){e&&p(t)}};return b("SvelteRegisterBlock",{block:a,id:ut.name,type:"slot",source:"(65:0) <Toast bind:running={errorToast}>",ctx:o}),a}function V(o){let t,i,a,r,e,n,f,d,$,l,c=!o[2].fetching&&!o[2].error&&o[2].data.getGuide&&D(o);n=new Q({props:{$$slots:{default:[ct]},$$scope:{ctx:o}},$$inline:!0});function v(u){o[6](u)}let R={$$slots:{default:[ut]},$$scope:{ctx:o}};o[0]!==void 0&&(R.running=o[0]),d=new et({props:R,$$inline:!0}),$t.push(()=>gt(d,"running",v));const j={c:function(){c&&c.c(),t=B(),i=z(),a=C("h1"),r=G("Edit Guide"),e=z(),E(n.$$.fragment),f=z(),E(d.$$.fragment),this.h()},l:function(s){const g=vt("svelte-2z35li",document.head);c&&c.l(g),t=B(),g.forEach(p),i=q(s),a=O(s,"H1",{class:!0});var k=M(a);r=S(k,"Edit Guide"),k.forEach(p),e=q(s),P(n.$$.fragment,s),f=q(s),P(d.$$.fragment,s),this.h()},h:function(){xt(a,"class","text-4xl my-4 font-bold"),N(a,I,50,0,1535)},m:function(s,g){c&&c.m(document.head,null),y(document.head,t),x(s,i,g),x(s,a,g),y(a,r),x(s,e,g),_(n,s,g),x(s,f,g),_(d,s,g),l=!0},p:function(s,[g]){!s[2].fetching&&!s[2].error&&s[2].data.getGuide?c?(c.p(s,g),g&4&&m(c,1)):(c=D(s),c.c(),m(c,1),c.m(t.parentNode,t)):c&&(X(),h(c,1,1,()=>{c=null}),W());const k={};g&516&&(k.$$scope={dirty:g,ctx:s}),n.$set(k);const L={};g&514&&(L.$$scope={dirty:g,ctx:s}),!$&&g&1&&($=!0,L.running=s[0],yt(()=>$=!1)),d.$set(L)},i:function(s){l||(m(c),m(n.$$.fragment,s),m(d.$$.fragment,s),l=!0)},o:function(s){h(c),h(n.$$.fragment,s),h(d.$$.fragment,s),l=!1},d:function(s){c&&c.d(s),p(t),s&&p(i),s&&p(a),s&&p(e),T(n,s),s&&p(f),T(d,s)}};return b("SvelteRegisterBlock",{block:j,id:V.name,type:"component",source:"",ctx:o}),j}function wt(o,t,i){let a,{$$slots:r={},$$scope:e}=t;pt("Page",r,[]);let{data:n}=t;const{guideId:f}=n,d=A();let $="",l=!1;const c=F({query:Y,client:d,variables:{guide:f}});mt(c,"guide"),ht(o,c,u=>i(2,a=u));const v=u=>{d.mutation(Z,{guideId:f,guide:u}).toPromise().then(s=>{s.error?(console.error(s.error.message),i(1,$="Error editing guide: "+s.error.message),i(0,l=!0)):H(J+"/guide/"+s.data.updateGuide.id)})};o.$$.on_mount.push(function(){n===void 0&&!("data"in t||o.$$.bound[o.$$.props.data])&&K.warn("<Page> was created without expected prop 'data'")});const R=["data"];Object.keys(t).forEach(u=>{!~R.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&K.warn(`<Page> was created with unknown prop '${u}'`)});function j(u){l=u,i(0,l)}return o.$$set=u=>{"data"in u&&i(5,n=u.data)},o.$capture_state=()=>({getContextClient:A,queryStore:F,EditGuideDocument:Z,GetGuideDocument:Y,Toast:et,goto:H,GuideForm:nt,Card:Q,Content:U,base:J,MetaDescriptors:it,data:n,guideId:f,client:d,errorMessage:$,errorToast:l,guide:c,onSubmit:v,$guide:a}),o.$inject_state=u=>{"data"in u&&i(5,n=u.data),"errorMessage"in u&&i(1,$=u.errorMessage),"errorToast"in u&&i(0,l=u.errorToast)},t&&"$$inject"in t&&o.$inject_state(t.$$inject),o.$$.update=()=>{o.$$.dirty&1&&(l||i(1,$=""))},[l,$,a,c,v,n,j]}class Rt extends ft{constructor(t){super(t),lt(this,t,wt,V,dt,{data:5}),b("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:V.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Rt as component,Tt as universal};
//# sourceMappingURL=12.18c4e70c.js.map
