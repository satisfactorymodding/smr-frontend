import{S as A,i as B,s as C,W as v,X as y,Y as I,m as g,t as p,$ as w,ba as H,u as W,ad as X,b as P,a as k,e as T,aa as S,aT as Y,f as d,g as z,c as L,d as O,ab as N,a7 as F,a5 as G,j as h,l as _,ae as J,aC as K,al as Q,aB as R,aD as U,bb as Z,k as j,ac as q,r as b}from"../../../chunks/vendor-5142eec8.js";import{p as tt}from"../../../chunks/routing-c6322149.js";import{k as et,E as at}from"../../../chunks/graphql-cad820f4.js";import{T as it}from"../../../chunks/Toast-e8354faa.js";import{g as rt}from"../../../chunks/navigation-ce539261.js";import{G as st}from"../../../chunks/GuideForm-cc92d5a7.js";import{b as nt}from"../../../chunks/paths-1c47712a.js";import{M as ot}from"../../../chunks/MetaDescriptors-2c89eebb.js";import"../../../chunks/singletons-cdeec3fd.js";import"../../../chunks/forms-b07cb9c7.js";import"../../../chunks/forms-43f5c2ea.js";import"../../../chunks/markdown-6a2ff7f0.js";import"../../../chunks/extras-8984d02f.js";import"../../../chunks/stores-8521e192.js";function M(s){let e,a;return e=new ot({props:{description:"Editing guide '"+s[2].data.getGuide.short_description+"'",title:"Edit guide '"+s[2].data.getGuide.name+"'"}}),{c(){v(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,i){I(e,t,i),a=!0},p(t,i){const o={};i&4&&(o.description="Editing guide '"+t[2].data.getGuide.short_description+"'"),i&4&&(o.title="Edit guide '"+t[2].data.getGuide.name+"'"),e.$set(o)},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){w(e,t)}}}function ft(s){let e,a;return e=new st({props:{onSubmit:s[4],initialValues:s[2].data.getGuide,submitText:"Save"}}),{c(){v(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,i){I(e,t,i),a=!0},p(t,i){const o={};i&4&&(o.initialValues=t[2].data.getGuide),e.$set(o)},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){w(e,t)}}}function ut(s){let e,a,t=s[2].error.message+"",i;return{c(){e=T("p"),a=S("Oh no... "),i=S(t)},l(o){e=L(o,"P",{});var n=O(e);a=N(n,"Oh no... "),i=N(n,t),n.forEach(d)},m(o,n){h(o,e,n),G(e,a),G(e,i)},p(o,n){n&4&&t!==(t=o[2].error.message+"")&&q(i,t)},i:b,o:b,d(o){o&&d(e)}}}function lt(s){let e,a;return{c(){e=T("p"),a=S("Loading...")},l(t){e=L(t,"P",{});var i=O(e);a=N(i,"Loading..."),i.forEach(d)},m(t,i){h(t,e,i),G(e,a)},p:b,i:b,o:b,d(t){t&&d(e)}}}function dt(s){let e,a,t,i;const o=[lt,ut,ft],n=[];function $(f,c){return f[2].fetching?0:f[2].error?1:2}return e=$(s),a=n[e]=o[e](s),{c(){a.c(),t=P()},l(f){a.l(f),t=P()},m(f,c){n[e].m(f,c),h(f,t,c),i=!0},p(f,c){let m=e;e=$(f),e===m?n[e].p(f,c):(j(),p(n[m],1,1,()=>{n[m]=null}),_(),a=n[e],a?a.p(f,c):(a=n[e]=o[e](f),a.c()),g(a,1),a.m(t.parentNode,t))},i(f){i||(g(a),i=!0)},o(f){p(a),i=!1},d(f){n[e].d(f),f&&d(t)}}}function ct(s){let e,a;return e=new Z({props:{$$slots:{default:[dt]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,i){I(e,t,i),a=!0},p(t,i){const o={};i&260&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){w(e,t)}}}function $t(s){let e,a;return{c(){e=T("span"),a=S(s[1])},l(t){e=L(t,"SPAN",{});var i=O(e);a=N(i,s[1]),i.forEach(d)},m(t,i){h(t,e,i),G(e,a)},p(t,i){i&2&&q(a,t[1])},d(t){t&&d(e)}}}function mt(s){let e,a,t,i,o,n,$,f,c,m,u=!s[2].fetching&&!s[2].error&&s[2].data.getGuide&&M(s);n=new H({props:{$$slots:{default:[ct]},$$scope:{ctx:s}}});function E(r){s[6](r)}let D={$$slots:{default:[$t]},$$scope:{ctx:s}};return s[0]!==void 0&&(D.running=s[0]),f=new it({props:D}),W.push(()=>X(f,"running",E)),{c(){u&&u.c(),e=P(),a=k(),t=T("h1"),i=S("Edit Guide"),o=k(),v(n.$$.fragment),$=k(),v(f.$$.fragment),this.h()},l(r){const l=Y('[data-svelte="svelte-2z35li"]',document.head);u&&u.l(l),e=P(),l.forEach(d),a=z(r),t=L(r,"H1",{class:!0});var x=O(t);i=N(x,"Edit Guide"),x.forEach(d),o=z(r),y(n.$$.fragment,r),$=z(r),y(f.$$.fragment,r),this.h()},h(){F(t,"class","text-4xl my-4 font-bold")},m(r,l){u&&u.m(document.head,null),G(document.head,e),h(r,a,l),h(r,t,l),G(t,i),h(r,o,l),I(n,r,l),h(r,$,l),I(f,r,l),m=!0},p(r,[l]){!r[2].fetching&&!r[2].error&&r[2].data.getGuide?u?(u.p(r,l),l&4&&g(u,1)):(u=M(r),u.c(),g(u,1),u.m(e.parentNode,e)):u&&(j(),p(u,1,1,()=>{u=null}),_());const x={};l&260&&(x.$$scope={dirty:l,ctx:r}),n.$set(x);const V={};l&258&&(V.$$scope={dirty:l,ctx:r}),!c&&l&1&&(c=!0,V.running=r[0],J(()=>c=!1)),f.$set(V)},i(r){m||(g(u),g(n.$$.fragment,r),g(f.$$.fragment,r),m=!0)},o(r){p(u),p(n.$$.fragment,r),p(f.$$.fragment,r),m=!1},d(r){u&&u.d(r),d(e),r&&d(a),r&&d(t),r&&d(o),w(n,r),r&&d($),w(f,r)}}}const Lt=tt();function gt(s,e,a){let t,{guideId:i}=e,o="",n=!1;const $=K(et,{guide:i});Q(s,$,u=>a(2,t=u));const f=R({query:at}),c=u=>{f({guideId:i,guide:u}).then(E=>{E.error?(console.error(E.error.message),a(1,o="Error editing guide: "+E.error.message),a(0,n=!0)):rt(nt+"/guide/"+E.data.updateGuide.id)})};U($);function m(u){n=u,a(0,n)}return s.$$set=u=>{"guideId"in u&&a(5,i=u.guideId)},s.$$.update=()=>{s.$$.dirty&1&&(n||a(1,o=""))},[n,o,t,$,c,i,m]}class Ot extends A{constructor(e){super(),B(this,e,gt,mt,C,{guideId:5})}}export{Ot as default,Lt as load};
//# sourceMappingURL=edit.svelte-d83f2a0c.js.map
