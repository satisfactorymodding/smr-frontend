import{S as he,i as ve,s as $e,d as S,v as Te,ay as J,e as C,W as se,b as G,g as I,h as j,M as we,X as oe,j as v,k as M,N as w,m as P,az as ie,ak as ae,l as Be,n as k,Q as R,ad as Ee,Z as Ce,Y as re,aA as Ie,u as ce,a6 as Pe,aB as Le,F as le,G as pe,a1 as Ne,a2 as je,a as ue,aC as ye,aD as be,p as te,t as N,q as ne,r as x,y as _,I as H,U as fe,J as U,L as Q,O as W,T as F,R as X,f as ge,V as Se}from"./vendor.11uMjD1R.js";import{a as de}from"./graphql.NT0BIh3j.js";const V="src/lib/components/utils/TagDisplay.svelte";function Y(s){let e,t,n,i="#",p=s[0].name+"",c,u,f,a,o,g,l,T=s[0].description+"",y,D,L,E;const q={c:function(){e=C("button"),t=C("div"),n=C("span"),n.textContent=i,c=se(p),o=G(),g=C("div"),l=C("p"),y=se(T),this.h()},l:function(h){e=I(h,"BUTTON",{class:!0});var m=j(e);t=I(m,"DIV",{class:!0,title:!0});var d=j(t);n=I(d,"SPAN",{class:!0,"data-svelte-h":!0}),we(n)!=="svelte-sdcp3o"&&(n.textContent=i),c=oe(d,p),d.forEach(v),m.forEach(v),o=M(h),g=I(h,"DIV",{class:!0,"data-popup":!0,style:!0});var $=j(g);l=I($,"P",{class:!0});var b=j(l);y=oe(b,T),b.forEach(v),$.forEach(v),this.h()},h:function(){w(n,"class","text-orange-500 s-lCk39qNJIzvi"),P(n,V,23,4,650),w(t,"class","lowercase text-neutral-300 [&>*]:pointer-events-none s-lCk39qNJIzvi"),w(t,"title",u=s[3]==="click"?"Click for tag information":""),P(t,V,20,2,498),w(e,"class",f=ie(s[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" s-lCk39qNJIzvi"),ae(e,"selected",s[2]),P(e,V,15,0,343),w(l,"class","s-lCk39qNJIzvi"),P(l,V,31,2,1084),w(g,"class","card variant-filled-surface p-4 s-lCk39qNJIzvi"),w(g,"data-popup",D=`popupHoverFor${s[0].id}`),Be(g,"z-index","1000"),P(g,V,30,0,976)},m:function(h,m){k(h,e,m),R(e,t),R(t,n),R(t,c),k(h,o,m),k(h,g,m),R(g,l),R(l,y),L||(E=[Ee(a=J.call(null,e,s[4])),Ce(e,"click",s[5],!1,!1,!1,!1)],L=!0)},p:function(h,[m]){m&1&&p!==(p=h[0].name+"")&&re(c,p),m&8&&u!==(u=h[3]==="click"?"Click for tag information":"")&&w(t,"title",u),m&2&&f!==(f=ie(h[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" s-lCk39qNJIzvi")&&w(e,"class",f),a&&Ie(a.update)&&m&16&&a.update.call(null,h[4]),m&6&&ae(e,"selected",h[2]),m&1&&T!==(T=h[0].description+"")&&re(y,T),m&1&&D!==(D=`popupHoverFor${h[0].id}`)&&w(g,"data-popup",D)},i:ce,o:ce,d:function(h){h&&(v(e),v(o),v(g)),L=!1,Pe(E)}};return S("SvelteRegisterBlock",{block:q,id:Y.name,type:"component",source:"",ctx:s}),q}function qe(s,e,t){let n,{$$slots:i={},$$scope:p}=e;Te("TagDisplay",i,[]);let{tag:c}=e,{asButton:u=!1}=e,{selected:f=!1}=e,{popupTriggerEvent:a="click"}=e;s.$$.on_mount.push(function(){c===void 0&&!("tag"in e||s.$$.bound[s.$$.props.tag])&&console.warn("<TagDisplay> was created without expected prop 'tag'")});const o=["tag","asButton","selected","popupTriggerEvent"];Object.keys(e).forEach(l=>{!~o.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<TagDisplay> was created with unknown prop '${l}'`)});function g(l){Le.call(this,s,l)}return s.$$set=l=>{"tag"in l&&t(0,c=l.tag),"asButton"in l&&t(1,u=l.asButton),"selected"in l&&t(2,f=l.selected),"popupTriggerEvent"in l&&t(3,a=l.popupTriggerEvent)},s.$capture_state=()=>({popup:J,tag:c,asButton:u,selected:f,popupTriggerEvent:a,popupHover:n}),s.$inject_state=l=>{"tag"in l&&t(0,c=l.tag),"asButton"in l&&t(1,u=l.asButton),"selected"in l&&t(2,f=l.selected),"popupTriggerEvent"in l&&t(3,a=l.popupTriggerEvent),"popupHover"in l&&t(4,n=l.popupHover)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&9&&t(4,n={event:a,target:`popupHoverFor${c.id}`,placement:"bottom-start"})},[c,u,f,a,n,g]}class ke extends he{constructor(e){super(e),ve(this,e,qe,Y,$e,{tag:0,asButton:1,selected:2,popupTriggerEvent:3}),S("SvelteRegisterComponent",{component:this,tagName:"TagDisplay",options:e,id:Y.name})}get tag(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tag(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get asButton(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set asButton(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get selected(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set selected(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const A="src/lib/components/utils/TagList.svelte";function me(s,e,t){const n=s.slice();return n[19]=e[t],n}function xe(s){let e,t="Tags",n,i,p,c,u,f,a,o,g,l,T,y;function D(m){s[11](m)}function L(m){s[12](m)}let E={name:"tags",chips:"variant-filled-primary"};s[4]!==void 0&&(E.input=s[4]),s[3]!==void 0&&(E.value=s[3]),p=new be({props:E,$$inline:!0}),_.push(()=>H(p,"input",D)),_.push(()=>H(p,"value",L)),p.$on("remove",s[13]);function q(m){s[15](m)}let B={options:s[5].filter(s[14])};s[4]!==void 0&&(B.input=s[4]),o=new ye({props:B,$$inline:!0}),_.push(()=>H(o,"input",q)),o.$on("selection",s[16]);const h={c:function(){e=C("div"),e.textContent=t,n=G(),i=C("div"),U(p.$$.fragment),f=G(),a=C("div"),U(o.$$.fragment),this.h()},l:function(d){e=I(d,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-14odz2i"&&(e.textContent=t),n=M(d),i=I(d,"DIV",{});var $=j(i);Q(p.$$.fragment,$),$.forEach(v),f=M(d),a=I(d,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var b=j(a);Q(o.$$.fragment,b),b.forEach(v),this.h()},h:function(){w(e,"class","mb-2"),P(e,A,74,4,1660),P(i,A,76,4,1694),w(a,"class","card max-h-48 w-max max-w-full overflow-y-auto p-4"),w(a,"tabindex","-1"),w(a,"data-popup","popupAutocomplete"),P(a,A,85,4,1937)},m:function(d,$){k(d,e,$),k(d,n,$),k(d,i,$),W(p,i,null),k(d,f,$),k(d,a,$),W(o,a,null),l=!0,T||(y=Ee(J.call(null,i,s[7])),T=!0)},p:function(d,$){const b={};!c&&$&16&&(c=!0,b.input=d[4],F(()=>c=!1)),!u&&$&8&&(u=!0,b.value=d[3],F(()=>u=!1)),p.$set(b);const r={};$&40&&(r.options=d[5].filter(d[14])),!g&&$&16&&(g=!0,r.input=d[4],F(()=>g=!1)),o.$set(r)},i:function(d){l||(x(p.$$.fragment,d),x(o.$$.fragment,d),l=!0)},o:function(d){N(p.$$.fragment,d),N(o.$$.fragment,d),l=!1},d:function(d){d&&(v(e),v(n),v(i),v(f),v(a)),X(p),X(o),T=!1,y()}};return S("SvelteRegisterBlock",{block:h,id:xe.name,type:"else",source:"(60:2) {:else}",ctx:s}),h}function De(s){let e,t,n=s[0].length>0&&Z(s);const i={c:function(){n&&n.c(),e=ge()},l:function(c){n&&n.l(c),e=ge()},m:function(c,u){n&&n.m(c,u),k(c,e,u),t=!0},p:function(c,u){c[0].length>0?n?(n.p(c,u),u&1&&x(n,1)):(n=Z(c),n.c(),x(n,1),n.m(e.parentNode,e)):n&&(te(),N(n,1,1,()=>{n=null}),ne())},i:function(c){t||(x(n),t=!0)},o:function(c){N(n),t=!1},d:function(c){c&&v(e),n&&n.d(c)}};return S("SvelteRegisterBlock",{block:i,id:De.name,type:"if",source:"(52:2) {#if !editable}",ctx:s}),i}function Z(s){let e,t,n=fe(s[0]),i=[];for(let u=0;u<n.length;u+=1)i[u]=K(me(s,n,u));const p=u=>N(i[u],1,1,()=>{i[u]=null}),c={c:function(){e=C("div");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l:function(f){e=I(f,"DIV",{class:!0});var a=j(e);for(let o=0;o<i.length;o+=1)i[o].l(a);a.forEach(v),this.h()},h:function(){w(e,"class","text-md flex flex-row flex-wrap gap-1"),P(e,A,67,6,1476)},m:function(f,a){k(f,e,a);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null);t=!0},p:function(f,a){if(a&5){n=fe(f[0]);let o;for(o=0;o<n.length;o+=1){const g=me(f,n,o);i[o]?(i[o].p(g,a),x(i[o],1)):(i[o]=K(g),i[o].c(),x(i[o],1),i[o].m(e,null))}for(te(),o=n.length;o<i.length;o+=1)p(o);ne()}},i:function(f){if(!t){for(let a=0;a<n.length;a+=1)x(i[a]);t=!0}},o:function(f){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)N(i[a]);t=!1},d:function(f){f&&v(e),Se(i,f)}};return S("SvelteRegisterBlock",{block:c,id:Z.name,type:"if",source:"(53:4) {#if tags.length > 0}",ctx:s}),c}function K(s){let e,t;e=new ke({props:{tag:s[19],popupTriggerEvent:s[2]},$$inline:!0});const n={c:function(){U(e.$$.fragment)},l:function(p){Q(e.$$.fragment,p)},m:function(p,c){W(e,p,c),t=!0},p:function(p,c){const u={};c&1&&(u.tag=p[19]),c&4&&(u.popupTriggerEvent=p[2]),e.$set(u)},i:function(p){t||(x(e.$$.fragment,p),t=!0)},o:function(p){N(e.$$.fragment,p),t=!1},d:function(p){X(e,p)}};return S("SvelteRegisterBlock",{block:n,id:K.name,type:"each",source:"(55:8) {#each tags as tag}",ctx:s}),n}function ee(s){let e,t,n,i;const p=[De,xe],c=[];function u(a,o){return a[1]?1:0}t=u(s),n=c[t]=p[t](s);const f={c:function(){e=C("div"),n.c(),this.h()},l:function(o){e=I(o,"DIV",{class:!0});var g=j(e);n.l(g),g.forEach(v),this.h()},h:function(){w(e,"class","tags"),P(e,A,64,0,1407)},m:function(o,g){k(o,e,g),c[t].m(e,null),i=!0},p:function(o,[g]){let l=t;t=u(o),t===l?c[t].p(o,g):(te(),N(c[l],1,1,()=>{c[l]=null}),ne(),n=c[t],n?n.p(o,g):(n=c[t]=p[t](o),n.c()),x(n,1),n.m(e,null))},i:function(o){i||(x(n),i=!0)},o:function(o){N(n),i=!1},d:function(o){o&&v(e),c[t].d()}};return S("SvelteRegisterBlock",{block:f,id:ee.name,type:"component",source:"",ctx:s}),f}function ze(s,e,t){let n,i,{$$slots:p={},$$scope:c}=e;Te("TagList",p,[]);const u=le(),f=pe({query:de,client:u,variables:{limit:100}});Ne(f,"getAllTags"),je(s,f,r=>t(10,i=r));let{tags:a=[]}=e,{editable:o=!1}=e,{popupTriggerEvent:g="click"}=e;const l={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let T=[];const y=()=>t(3,T=a.map(r=>r.name));ue(y);const D=r=>{const z=i.data?.getTags?.find(O=>O.id==r.value);t(0,a=[...a,{id:r.value,name:z?.name,description:z?.description}]),y()},L=r=>{const z=a.findIndex(O=>O.name===r);t(0,a=[...a.slice(0,z),...a.slice(z+1)]),y()};let E="";const q=["tags","editable","popupTriggerEvent"];Object.keys(e).forEach(r=>{!~q.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<TagList> was created with unknown prop '${r}'`)});function B(r){E=r,t(4,E)}function h(r){T=r,t(3,T)}const m=r=>L(r.detail.chipValue),d=r=>T.indexOf(r.name)<0;function $(r){E=r,t(4,E)}const b=r=>D(r.detail);return s.$$set=r=>{"tags"in r&&t(0,a=r.tags),"editable"in r&&t(1,o=r.editable),"popupTriggerEvent"in r&&t(2,g=r.popupTriggerEvent)},s.$capture_state=()=>({GetTagsDocument:de,queryStore:pe,getContextClient:le,Autocomplete:ye,InputChip:be,popup:J,onMount:ue,TagDisplay:ke,client:u,getAllTags:f,tags:a,editable:o,popupTriggerEvent:g,popupSettings:l,tagList:T,loadTagList:y,addTag:D,removeTag:L,inputTag:E,allTags:n,$getAllTags:i}),s.$inject_state=r=>{"tags"in r&&t(0,a=r.tags),"editable"in r&&t(1,o=r.editable),"popupTriggerEvent"in r&&t(2,g=r.popupTriggerEvent),"tagList"in r&&t(3,T=r.tagList),"inputTag"in r&&t(4,E=r.inputTag),"allTags"in r&&t(5,n=r.allTags)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&1024&&t(5,n=i.data?.getTags?.map(r=>({label:`${r.name} - ${r.description}`,value:r.id,name:r.name}))||[])},[a,o,g,T,E,n,f,l,D,L,i,B,h,m,d,$,b]}class Ae extends he{constructor(e){super(e),ve(this,e,ze,ee,$e,{tags:0,editable:1,popupTriggerEvent:2}),S("SvelteRegisterComponent",{component:this,tagName:"TagList",options:e,id:ee.name})}get tags(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tags(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ae as T,ke as a};
//# sourceMappingURL=TagList.lt00AXyT.js.map
