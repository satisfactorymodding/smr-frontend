import{S as we,i as Ee,s as be,d as _,v as ye,aC as F,e as L,a0 as K,b as Q,g as S,h as C,J as Ce,a1 as U,j as $,k as W,K as E,m as j,aD as le,ak as pe,l as Ie,n as B,M as H,a9 as xe,O as Re,a3 as X,aE as Ae,u as Y,R as Oe,aF as _e,Y as ue,Z as fe,_ as ge,af as de,a8 as He,a as me,aG as ke,aH as De,p as re,t as I,q as ce,r as P,x as Ve,y as M,X as z,T as he,G as Z,I as ee,L as te,a2 as J,Q as ne,f as ve,W as Ne}from"./vendor.BiWIQeBY.js";import{g as $e}from"./graphql.JkthYSgF.js";const N="src/lib/components/utils/TagDisplay.svelte";function se(s){let e,t,n,a="#",l=s[0].name+"",i,p,g,u,o,f,c,v=s[0].description+"",b,y,R,x;const k={c:function(){e=L("button"),t=L("div"),n=L("span"),n.textContent=a,i=K(l),o=Q(),f=L("div"),c=L("p"),b=K(v),this.h()},l:function(h){e=S(h,"BUTTON",{class:!0});var m=C(e);t=S(m,"DIV",{class:!0,title:!0});var T=C(t);n=S(T,"SPAN",{class:!0,"data-svelte-h":!0}),Ce(n)!=="svelte-sdcp3o"&&(n.textContent=a),i=U(T,l),T.forEach($),m.forEach($),o=W(h),f=S(h,"DIV",{class:!0,"data-popup":!0,style:!0});var d=C(f);c=S(d,"P",{class:!0});var w=C(c);b=U(w,v),w.forEach($),d.forEach($),this.h()},h:function(){E(n,"class","text-orange-500 svelte-1c06ml2"),j(n,N,23,4,650),E(t,"class","lowercase text-neutral-300 [&>*]:pointer-events-none svelte-1c06ml2"),E(t,"title",p=s[3]==="click"?"Click for tag information":""),j(t,N,20,2,498),E(e,"class",g=le(s[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" svelte-1c06ml2"),pe(e,"selected",s[2]),j(e,N,15,0,343),E(c,"class","svelte-1c06ml2"),j(c,N,31,2,1084),E(f,"class","card variant-filled-surface p-4 svelte-1c06ml2"),E(f,"data-popup",y=`popupHoverFor${s[0].id}`),Ie(f,"z-index","1000"),j(f,N,30,0,976)},m:function(h,m){B(h,e,m),H(e,t),H(t,n),H(t,i),B(h,o,m),B(h,f,m),H(f,c),H(c,b),R||(x=[xe(u=F.call(null,e,s[4])),Re(e,"click",s[5],!1,!1,!1,!1)],R=!0)},p:function(h,[m]){m&1&&l!==(l=h[0].name+"")&&X(i,l),m&8&&p!==(p=h[3]==="click"?"Click for tag information":"")&&E(t,"title",p),m&2&&g!==(g=le(h[1]?"chip hover:variant-filled-surface [&:not(:hover)]:variant-soft":"")+" svelte-1c06ml2")&&E(e,"class",g),u&&Ae(u.update)&&m&16&&u.update.call(null,h[4]),m&6&&pe(e,"selected",h[2]),m&1&&v!==(v=h[0].description+"")&&X(b,v),m&1&&y!==(y=`popupHoverFor${h[0].id}`)&&E(f,"data-popup",y)},i:Y,o:Y,d:function(h){h&&($(e),$(o),$(f)),R=!1,Oe(x)}};return _("SvelteRegisterBlock",{block:k,id:se.name,type:"component",source:"",ctx:s}),k}function qe(s,e,t){let n,{$$slots:a={},$$scope:l}=e;ye("TagDisplay",a,[]);let{tag:i}=e,{asButton:p=!1}=e,{selected:g=!1}=e,{popupTriggerEvent:u="click"}=e;s.$$.on_mount.push(function(){i===void 0&&!("tag"in e||s.$$.bound[s.$$.props.tag])&&console.warn("<TagDisplay> was created without expected prop 'tag'")});const o=["tag","asButton","selected","popupTriggerEvent"];Object.keys(e).forEach(c=>{!~o.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<TagDisplay> was created with unknown prop '${c}'`)});function f(c){_e.call(this,s,c)}return s.$$set=c=>{"tag"in c&&t(0,i=c.tag),"asButton"in c&&t(1,p=c.asButton),"selected"in c&&t(2,g=c.selected),"popupTriggerEvent"in c&&t(3,u=c.popupTriggerEvent)},s.$capture_state=()=>({popup:F,tag:i,asButton:p,selected:g,popupTriggerEvent:u,popupHover:n}),s.$inject_state=c=>{"tag"in c&&t(0,i=c.tag),"asButton"in c&&t(1,p=c.asButton),"selected"in c&&t(2,g=c.selected),"popupTriggerEvent"in c&&t(3,u=c.popupTriggerEvent),"popupHover"in c&&t(4,n=c.popupHover)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&9&&t(4,n={event:u,target:`popupHoverFor${i.id}`,placement:"bottom-start"})},[i,p,g,u,n,f]}class Be extends we{constructor(e){super(e),Ee(this,e,qe,se,be,{tag:0,asButton:1,selected:2,popupTriggerEvent:3}),_("SvelteRegisterComponent",{component:this,tagName:"TagDisplay",options:e,id:se.name})}get tag(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tag(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get asButton(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set asButton(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get selected(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set selected(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagDisplay>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(e){throw new Error("<TagDisplay>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const q="src/lib/components/utils/TagList.svelte";function Te(s,e,t){const n=s.slice();return n[21]=e[t],n}function Pe(s){let e,t=s[7]("mod.tags.title")+"",n,a,l,i,p,g,u,o,f,c,v,b,y;function R(T){s[13](T)}function x(T){s[14](T)}let k={name:"tags",chips:"variant-filled-primary"};s[5]!==void 0&&(k.input=s[5]),s[4]!==void 0&&(k.value=s[4]),i=new De({props:k,$$inline:!0}),M.push(()=>z(i,"input",R)),M.push(()=>z(i,"value",x)),i.$on("remove",s[15]);function D(T){s[17](T)}let h={options:s[6].filter(s[16])};s[5]!==void 0&&(h.input=s[5]),f=new ke({props:h,$$inline:!0}),M.push(()=>z(f,"input",D)),f.$on("selection",s[18]);const m={c:function(){e=L("div"),n=K(t),a=Q(),l=L("div"),Z(i.$$.fragment),u=Q(),o=L("div"),Z(f.$$.fragment),this.h()},l:function(d){e=S(d,"DIV",{class:!0});var w=C(e);n=U(w,t),w.forEach($),a=W(d),l=S(d,"DIV",{});var A=C(l);ee(i.$$.fragment,A),A.forEach($),u=W(d),o=S(d,"DIV",{class:!0,tabindex:!0,"data-popup":!0});var O=C(o);ee(f.$$.fragment,O),O.forEach($),this.h()},h:function(){E(e,"class","mb-2"),j(e,q,75,4,1787),j(l,q,77,4,1839),E(o,"class","card max-h-48 w-max max-w-full overflow-y-auto p-4"),E(o,"tabindex","-1"),E(o,"data-popup","popupAutocomplete"),j(o,q,86,4,2086)},m:function(d,w){B(d,e,w),H(e,n),B(d,a,w),B(d,l,w),te(i,l,null),B(d,u,w),B(d,o,w),te(f,o,null),v=!0,b||(y=xe(F.call(null,l,s[9])),b=!0)},p:function(d,w){(!v||w&128)&&t!==(t=d[7]("mod.tags.title")+"")&&X(n,t);const A={};!p&&w&32&&(p=!0,A.input=d[5],J(()=>p=!1)),!g&&w&16&&(g=!0,A.value=d[4],J(()=>g=!1)),i.$set(A);const O={};w&80&&(O.options=d[6].filter(d[16])),!c&&w&32&&(c=!0,O.input=d[5],J(()=>c=!1)),f.$set(O)},i:function(d){v||(P(i.$$.fragment,d),P(f.$$.fragment,d),v=!0)},o:function(d){I(i.$$.fragment,d),I(f.$$.fragment,d),v=!1},d:function(d){d&&($(e),$(a),$(l),$(u),$(o)),ne(i),ne(f),b=!1,y()}};return _("SvelteRegisterBlock",{block:m,id:Pe.name,type:"else",source:"(62:2) {:else}",ctx:s}),m}function Le(s){let e,t,n=s[0]&&s[0].length>0&&oe(s);const a={c:function(){n&&n.c(),e=ve()},l:function(i){n&&n.l(i),e=ve()},m:function(i,p){n&&n.m(i,p),B(i,e,p),t=!0},p:function(i,p){i[0]&&i[0].length>0?n?(n.p(i,p),p&1&&P(n,1)):(n=oe(i),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(re(),I(n,1,1,()=>{n=null}),ce())},i:function(i){t||(P(n),t=!0)},o:function(i){I(n),t=!1},d:function(i){i&&$(e),n&&n.d(i)}};return _("SvelteRegisterBlock",{block:a,id:Le.name,type:"if",source:"(54:2) {#if !editable}",ctx:s}),a}function oe(s){let e,t,n=he(s[0]),a=[];for(let p=0;p<n.length;p+=1)a[p]=ie(Te(s,n,p));const l=p=>I(a[p],1,1,()=>{a[p]=null}),i={c:function(){e=L("div");for(let g=0;g<a.length;g+=1)a[g].c();this.h()},l:function(g){e=S(g,"DIV",{class:!0});var u=C(e);for(let o=0;o<a.length;o+=1)a[o].l(u);u.forEach($),this.h()},h:function(){E(e,"class","text-md flex flex-row flex-wrap gap-1"),j(e,q,68,6,1603)},m:function(g,u){B(g,e,u);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(e,null);t=!0},p:function(g,u){if(u&9){n=he(g[0]);let o;for(o=0;o<n.length;o+=1){const f=Te(g,n,o);a[o]?(a[o].p(f,u),P(a[o],1)):(a[o]=ie(f),a[o].c(),P(a[o],1),a[o].m(e,null))}for(re(),o=n.length;o<a.length;o+=1)l(o);ce()}},i:function(g){if(!t){for(let u=0;u<n.length;u+=1)P(a[u]);t=!0}},o:function(g){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)I(a[u]);t=!1},d:function(g){g&&$(e),Ne(a,g)}};return _("SvelteRegisterBlock",{block:i,id:oe.name,type:"if",source:"(55:4) {#if tags && tags.length > 0}",ctx:s}),i}function ie(s){let e,t;e=new Be({props:{tag:s[21],popupTriggerEvent:s[3]},$$inline:!0});const n={c:function(){Z(e.$$.fragment)},l:function(l){ee(e.$$.fragment,l)},m:function(l,i){te(e,l,i),t=!0},p:function(l,i){const p={};i&1&&(p.tag=l[21]),i&8&&(p.popupTriggerEvent=l[3]),e.$set(p)},i:function(l){t||(P(e.$$.fragment,l),t=!0)},o:function(l){I(e.$$.fragment,l),t=!1},d:function(l){ne(e,l)}};return _("SvelteRegisterBlock",{block:n,id:ie.name,type:"each",source:"(57:8) {#each tags as tag}",ctx:s}),n}function ae(s){let e,t,n,a;const l=[Le,Pe],i=[];function p(u,o){return u[2]?1:0}t=p(s),n=i[t]=l[t](s);const g={c:function(){e=L("div"),n.c(),this.h()},l:function(o){e=S(o,"DIV",{class:!0});var f=C(e);n.l(f),f.forEach($),this.h()},h:function(){E(e,"class","tags"),j(e,q,65,0,1526)},m:function(o,f){B(o,e,f),i[t].m(e,null),a=!0},p:function(o,[f]){let c=t;t=p(o),t===c?i[t].p(o,f):(re(),I(i[c],1,1,()=>{i[c]=null}),ce(),n=i[t],n?n.p(o,f):(n=i[t]=l[t](o),n.c()),P(n,1),n.m(e,null))},i:function(o){a||(P(n),a=!0)},o:function(o){I(n),a=!1},d:function(o){o&&$(e),i[t].d()}};return _("SvelteRegisterBlock",{block:g,id:ae.name,type:"component",source:"",ctx:s}),g}function Fe(s,e,t){let n,a,l,i=Y,p=()=>(i(),i=Ve(o,r=>t(7,l=r)),o);s.$$.on_destroy.push(()=>i());let{$$slots:g={},$$scope:u}=e;ye("TagList",g,[]);const{t:o}=ue();fe(o,"t"),p();const f=ge(),c=de({query:$e,client:f,variables:{limit:100}});fe(c,"getAllTags"),He(s,c,r=>t(12,a=r));let{tags:v=[]}=e,{editable:b=!1}=e,{popupTriggerEvent:y="click"}=e;const R={event:"focus-click",target:"popupAutocomplete",placement:"bottom-start"};let x=[];const k=()=>t(4,x=v.map(r=>r.name));me(k);const D=r=>{const V=a.data?.getTags?.find(G=>G.id==r.value);t(0,v=[...v,{id:r.value,name:V?.name,description:V?.description}]),k()},h=r=>{const V=v.findIndex(G=>G.name===r);t(0,v=[...v.slice(0,V),...v.slice(V+1)]),k()};let m="";const T=["tags","editable","popupTriggerEvent"];Object.keys(e).forEach(r=>{!~T.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<TagList> was created with unknown prop '${r}'`)});function d(r){m=r,t(5,m)}function w(r){x=r,t(4,x)}const A=r=>h(r.detail.chipValue),O=r=>x.indexOf(r.name)<0;function Se(r){m=r,t(5,m)}const je=r=>D(r.detail);return s.$$set=r=>{"tags"in r&&t(0,v=r.tags),"editable"in r&&t(2,b=r.editable),"popupTriggerEvent"in r&&t(3,y=r.popupTriggerEvent)},s.$capture_state=()=>({GetTagsDocument:$e,queryStore:de,getContextClient:ge,Autocomplete:ke,InputChip:De,popup:F,onMount:me,TagDisplay:Be,getTranslate:ue,t:o,client:f,getAllTags:c,tags:v,editable:b,popupTriggerEvent:y,popupSettings:R,tagList:x,loadTagList:k,addTag:D,removeTag:h,inputTag:m,allTags:n,$getAllTags:a,$t:l}),s.$inject_state=r=>{"tags"in r&&t(0,v=r.tags),"editable"in r&&t(2,b=r.editable),"popupTriggerEvent"in r&&t(3,y=r.popupTriggerEvent),"tagList"in r&&t(4,x=r.tagList),"inputTag"in r&&t(5,m=r.inputTag),"allTags"in r&&t(6,n=r.allTags)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&4096&&t(6,n=a.data?.getTags?.map(r=>({label:`${r.name} - ${r.description}`,value:r.id,name:r.name}))||[])},[v,o,b,y,x,m,n,l,c,R,D,h,a,d,w,A,O,Se,je]}class ze extends we{constructor(e){super(e),Ee(this,e,Fe,ae,be,{t:1,tags:0,editable:2,popupTriggerEvent:3}),_("SvelteRegisterComponent",{component:this,tagName:"TagList",options:e,id:ae.name})}get t(){return this.$$.ctx[1]}set t(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get tags(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set tags(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get popupTriggerEvent(){throw new Error("<TagList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set popupTriggerEvent(e){throw new Error("<TagList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{ze as T,Be as a};
//# sourceMappingURL=TagList.CAswnRM8.js.map
