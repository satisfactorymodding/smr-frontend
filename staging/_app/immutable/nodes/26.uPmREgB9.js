import{S as Se,i as Ee,d as O,s as ke,a1 as we,a2 as Ce,v as Pe,_ as ne,F as re,$ as oe,H as ie,a0 as Ve,J as Q,b as D,e as x,K as Ne,L as W,j as g,k as I,g as b,M as T,h as V,N as p,m as y,O as X,n as A,Q as d,t as L,q as je,r as _,R as Y,u as H,x as Be,p as De,a5 as le,Z as Ie,ad as Ae,a6 as Me,W as pe,X as ge,Y as $e}from"../chunks/vendor.9lbQnYkS.js";import{j as ce}from"../chunks/graphql.NT0BIh3j.js";import{o as Re,a as Ue,b as Oe,s as Te,c as ue,v as fe,r as me,V as Z,z as Le}from"../chunks/forms.pxcLXOaC.js";import{t as de}from"../chunks/forms.A1C6ASVE.js";import{u as K}from"../chunks/user.mzVnP5iK.js";import{M as he}from"../chunks/MetaDescriptors.RQ7Jmlkk.js";const{console:_e}=Ve,S="src/routes/settings/+page.svelte";function ve(l){let e,s,a,i,o="Avatar:",r,n,$,c,C,h,u,m,M="Username",k,t,v,f,R,U,N,ee="Save",z,J,te;c=new Z({props:{for:"avatar",$$slots:{default:[be,({messages:w})=>({8:w}),({messages:w})=>w?256:0]},$$scope:{ctx:l}},$$inline:!0}),f=new Z({props:{for:"username",$$slots:{default:[ye,({messages:w})=>({8:w}),({messages:w})=>w?256:0]},$$scope:{ctx:l}},$$inline:!0});const ae={c:function(){e=x("form"),s=x("div"),a=x("div"),i=x("label"),i.textContent=o,r=D(),n=x("input"),$=D(),Q(c.$$.fragment),C=D(),h=x("div"),u=x("label"),m=x("span"),m.textContent=M,k=D(),t=x("input"),v=D(),Q(f.$$.fragment),R=D(),U=x("div"),N=x("button"),N.textContent=ee,this.h()},l:function(E){e=b(E,"FORM",{});var P=V(e);s=b(P,"DIV",{class:!0});var j=V(s);a=b(j,"DIV",{class:!0});var B=V(a);i=b(B,"LABEL",{for:!0,"data-svelte-h":!0}),T(i)!=="svelte-1a2u3bg"&&(i.textContent=o),r=I(B),n=b(B,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),$=I(B),W(c.$$.fragment,B),B.forEach(g),C=I(j),h=b(j,"DIV",{class:!0});var q=V(h);u=b(q,"LABEL",{class:!0});var F=V(u);m=b(F,"SPAN",{"data-svelte-h":!0}),T(m)!=="svelte-9difb2"&&(m.textContent=M),k=I(F),t=b(F,"INPUT",{type:!0,class:!0}),F.forEach(g),v=I(q),W(f.$$.fragment,q),q.forEach(g),R=I(j),U=b(j,"DIV",{});var se=V(U);N=b(se,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),T(N)!=="svelte-13mhoq1"&&(N.textContent=ee),se.forEach(g),j.forEach(g),P.forEach(g),this.h()},h:function(){p(i,"for","avatar"),y(i,S,83,12,2729),p(n,"id","avatar"),p(n,"class","base-input"),p(n,"name","avatar"),p(n,"type","file"),p(n,"accept","image/png,image/jpeg,image/gif"),p(n,"placeholder","Avatar"),y(n,S,84,12,2777),p(a,"class","grid grid-flow-row gap-2"),y(a,S,82,10,2678),y(m,S,98,14,3275),p(t,"type","text"),t.required=!0,p(t,"class","input p-2"),y(t,S,99,14,3311),p(u,"class","label"),y(u,S,97,12,3239),p(h,"class","grid grid-flow-row gap-2"),y(h,S,96,10,3188),p(N,"class","variant-ghost-primary btn"),p(N,"type","submit"),y(N,S,107,12,3628),y(U,S,106,10,3610),p(s,"class","grid grid-flow-row gap-6"),y(s,S,81,8,2629),y(e,S,80,6,2605)},m:function(E,P){A(E,e,P),d(e,s),d(s,a),d(a,i),d(a,r),d(a,n),d(a,$),X(c,a,null),d(s,C),d(s,h),d(h,u),d(u,m),d(u,k),d(u,t),le(t,l[3].username),d(h,v),X(f,h,null),d(s,R),d(s,U),d(U,N),z=!0,J||(te=[Ie(t,"input",l[5]),Ae(l[2].call(null,e))],J=!0)},p:function(E,P){const j={};P&768&&(j.$$scope={dirty:P,ctx:E}),c.$set(j),P&8&&t.value!==E[3].username&&le(t,E[3].username);const B={};P&768&&(B.$$scope={dirty:P,ctx:E}),f.$set(B)},i:function(E){z||(_(c.$$.fragment,E),_(f.$$.fragment,E),z=!0)},o:function(E){L(c.$$.fragment,E),L(f.$$.fragment,E),z=!1},d:function(E){E&&g(e),Y(c),Y(f),J=!1,Me(te)}};return O("SvelteRegisterBlock",{block:ae,id:ve.name,type:"else",source:"(72:4) {:else}",ctx:l}),ae}function xe(l){let e,s="Please log in";const a={c:function(){e=x("p"),e.textContent=s,this.h()},l:function(o){e=b(o,"P",{"data-svelte-h":!0}),T(e)!=="svelte-1njyisr"&&(e.textContent=s),this.h()},h:function(){y(e,S,78,6,2566)},m:function(o,r){A(o,e,r)},p:H,i:H,o:H,d:function(o){o&&g(e)}};return O("SvelteRegisterBlock",{block:a,id:xe.name,type:"if",source:"(70:4) {#if $user === null}",ctx:l}),a}function be(l){let e,s=(l[8]||"")+"",a;const i={c:function(){e=x("span"),a=pe(s),this.h()},l:function(r){e=b(r,"SPAN",{class:!0});var n=V(e);a=ge(n,s),n.forEach(g),this.h()},h:function(){p(e,"class","validation-message"),y(e,S,92,14,3071)},m:function(r,n){A(r,e,n),d(e,a)},p:function(r,n){n&256&&s!==(s=(r[8]||"")+"")&&$e(a,s)},d:function(r){r&&g(e)}};return O("SvelteRegisterBlock",{block:i,id:be.name,type:"slot",source:'(84:12) <ValidationMessage for=\\"avatar\\" let:messages={message}>',ctx:l}),i}function ye(l){let e,s=(l[8]||"")+"",a;const i={c:function(){e=x("span"),a=pe(s),this.h()},l:function(r){e=b(r,"SPAN",{class:!0});var n=V(e);a=ge(n,s),n.forEach(g),this.h()},h:function(){p(e,"class","validation-message"),y(e,S,102,14,3493)},m:function(r,n){A(r,e,n),d(e,a)},p:function(r,n){n&256&&s!==(s=(r[8]||"")+"")&&$e(a,s)},d:function(r){r&&g(e)}};return O("SvelteRegisterBlock",{block:i,id:ye.name,type:"slot",source:'(94:12) <ValidationMessage for=\\"username\\" let:messages={message}>',ctx:l}),i}function G(l){let e,s,a,i="Settings",o,r,n,$,c,C;e=new he({props:{description:"Change your user settings",title:"Settings"},$$inline:!0});const h=[xe,ve],u=[];function m(k,t){return k[1]===null?0:1}$=m(l),c=u[$]=h[$](l);const M={c:function(){Q(e.$$.fragment),s=D(),a=x("h1"),a.textContent=i,o=D(),r=x("div"),n=x("section"),c.c(),this.h()},l:function(t){const v=Ne("svelte-1ae5i2c",document.head);W(e.$$.fragment,v),v.forEach(g),s=I(t),a=b(t,"H1",{class:!0,"data-svelte-h":!0}),T(a)!=="svelte-1pzybri"&&(a.textContent=i),o=I(t),r=b(t,"DIV",{class:!0});var f=V(r);n=b(f,"SECTION",{});var R=V(n);c.l(R),R.forEach(g),f.forEach(g),this.h()},h:function(){p(a,"class","my-4 text-4xl font-bold"),y(a,S,73,0,2449),y(n,S,76,2,2525),p(r,"class","card p-4"),y(r,S,75,0,2500)},m:function(t,v){X(e,document.head,null),A(t,s,v),A(t,a,v),A(t,o,v),A(t,r,v),d(r,n),u[$].m(n,null),C=!0},p:function(t,[v]){let f=$;$=m(t),$===f?u[$].p(t,v):(De(),L(u[f],1,1,()=>{u[f]=null}),je(),c=u[$],c?c.p(t,v):(c=u[$]=h[$](t),c.c()),_(c,1),c.m(n,null))},i:function(t){C||(_(e.$$.fragment,t),_(c),C=!0)},o:function(t){L(e.$$.fragment,t),L(c),C=!1},d:function(t){t&&(g(s),g(a),g(o),g(r)),Y(e),u[$].d()}};return O("SvelteRegisterBlock",{block:M,id:G.name,type:"component",source:"",ctx:l}),M}function ze(l,e,s){let a,i,o=H,r=()=>(o(),o=Be(m,t=>s(3,i=t)),m);we(K,"user"),Ce(l,K,t=>s(1,a=t)),l.$$.on_destroy.push(()=>o());let{$$slots:n={},$$scope:$}=e;Pe("Page",n,[]);const c=ne(),C=re(),h=Re({avatar:Ue(Oe().refine(t=>"name"in t&&"size"in t&&"type"in t)),username:Te().min(3).max(32)});let u,m;const M=[];Object.keys(e).forEach(t=>{!~M.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&_e.warn(`<Page> was created with unknown prop '${t}'`)});function k(){i.username=this.value,m.set(i)}return l.$capture_state=()=>({getContextClient:re,UpdateUserDocument:ce,goto:oe,createForm:ue,validator:fe,reporter:me,ValidationMessage:Z,trimNonSchema:de,user:K,zod:Le,base:ie,MetaDescriptors:he,getToastStore:ne,toastStore:c,client:C,userSchema:h,form:u,data:m,$user:a,$data:i}),l.$inject_state=t=>{"form"in t&&s(2,u=t.form),"data"in t&&r(s(0,m=t.data))},e&&"$$inject"in e&&l.$inject_state(e.$$inject),l.$$.update=()=>{if(l.$$.dirty&3&&a&&!m){const t=ue({initialValues:{username:a.username},extend:[fe({schema:h}),me],onSubmit:v=>{console.log("submitted",v),C.mutation(ce,{user:de(v,h),userId:a.id}).toPromise().then(f=>{f.error?(console.error(f.error.message),c.trigger({message:"Error editing user: "+f.error.message,background:"variant-filled-error",autohide:!1})):(c.trigger({message:"User updated",background:"variant-filled-success",timeout:5e3}),oe(ie+"/user/"+f.data.updateUser.id))})}});s(2,u=t.form),r(s(0,m=t.data))}},[m,a,u,i,h,k]}class We extends Se{constructor(e){super(e),Ee(this,e,ze,G,ke,{userSchema:4}),O("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:G.name})}get userSchema(){return this.$$.ctx[4]}set userSchema(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{We as component};
//# sourceMappingURL=26.uPmREgB9.js.map
