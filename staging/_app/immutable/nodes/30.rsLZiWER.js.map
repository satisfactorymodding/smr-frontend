{"version":3,"file":"30.rsLZiWER.js","sources":["../../../../../../src/routes/user/[userId]/+page.ts","../../../../../../src/lib/components/users/UserInfo.svelte","../../../../../../src/lib/components/users/UserAvatar.svelte","../../../../../../src/routes/user/[userId]/+page.svelte"],"sourcesContent":["import type { PageLoad } from './$types';\nimport { queryStore } from '@urql/svelte';\nimport { GetUserDocument } from '$lib/generated';\nimport { loadWaitForNoFetch } from '$lib/utils/gql';\n\nexport const prerender = false;\n\nexport const load: PageLoad = async ({ params, parent }) => ({\n  ...params,\n  ...(await loadWaitForNoFetch({\n    user: queryStore({\n      query: GetUserDocument,\n      client: (await parent()).client,\n      variables: { user: params.userId }\n    })\n  }))\n});\n","<script lang=\"ts\">\n  import type { User } from '$lib/generated';\n  import { prettyDate } from '$lib/utils/formatting';\n  import { getTranslate } from '@tolgee/svelte';\n\n  export let user!: Pick<User, 'created_at'>;\n\n  export const { t } = getTranslate();\n</script>\n\n<div class=\"card p-4\">\n  <section>\n    <div class=\"text-lg\">\n      <h3 class=\"my-4 text-2xl font-bold\">Info</h3>\n      <span><strong>{$t('entry.created-at')}:</strong> {prettyDate(user.created_at)}</span><br />\n    </div>\n  </section>\n</div>\n","<script lang=\"ts\">\n  import { assets } from '$app/paths';\n\n  export let avatar!: string;\n  export let username!: string;\n\n  $: userAvatar = avatar || assets + '/images/no_image.webp';\n</script>\n\n<div>\n  <img class=\"w-full max-w-full rounded-lg sm:max-w-lg\" src={userAvatar} alt=\"Avatar for {username}\" />\n</div>\n","<script lang=\"ts\">\n  import UserInfo from '$lib/components/users/UserInfo.svelte';\n  import UserAvatar from '$lib/components/users/UserAvatar.svelte';\n  import ModCard from '$lib/components/mods/ModCard.svelte';\n  import GuideCard from '$lib/components/guides/GuideCard.svelte';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n  import { user as me } from '$lib/stores/user';\n  import { base } from '$app/paths';\n  import type { PageData } from './$types';\n  import Page404 from '$lib/components/general/Page404.svelte';\n\n  export let data: PageData;\n\n  $: ({ user } = data);\n\n  let guidesTab = false;\n</script>\n\n<svelte:head>\n  {#if !$user.fetching && !$user.error && $user.data.getUser}\n    <MetaDescriptors\n      description=\"{$user.data.getUser.username} profile\"\n      title=\"{$user.data.getUser.username} profile\" />\n  {/if}\n</svelte:head>\n\n{#if $user.fetching}\n  <p>Loading...</p>\n{:else if $user.error}\n  <p>Oh no... {$user.error.message}</p>\n{:else if $user.data.getUser}\n  <div class=\"grid gap-6 xlx:grid-flow-row\">\n    <div class=\"flex h-auto flex-wrap items-center justify-between\">\n      <h1 class=\"text-4xl font-bold\">{$user.data.getUser.username}</h1>\n\n      <div>\n        {#if $me && $user.data.getUser.id === $me.id}\n          <a class=\"variant-ghost-primary btn\" href=\"{base}/settings\">Settings</a>\n        {/if}\n\n        <button class=\"variant-ghost-primary btn\" on:click={() => (guidesTab = !guidesTab)}>\n          {#if !guidesTab}\n            Guides\n          {:else}\n            Mods\n          {/if}\n        </button>\n      </div>\n    </div>\n    <div class=\"grid-auto-max grid auto-cols-fr gap-4\">\n      {#if !guidesTab}\n        <div class=\"grid h-fit grid-cols-1 gap-4 2xl:grid-cols-2 3xl:grid-cols-3\">\n          {#each $user.data.getUser.mods as mod}\n            <ModCard mod={mod.mod} />\n          {/each}\n\n          {#if $user.data.getUser.mods.length === 0}\n            <!-- TODO Prettier -->\n            User has no mods\n          {/if}\n        </div>\n      {:else}\n        <div class=\"grid h-fit grid-cols-1 gap-4 2xl:grid-cols-2 3xl:grid-cols-3\">\n          {#each $user.data.getUser.guides as guide}\n            <GuideCard {guide} logo={$user.data.getUser.avatar} />\n          {/each}\n\n          {#if $user.data.getUser.guides.length === 0}\n            <!-- TODO Prettier -->\n            User has no guides\n          {/if}\n        </div>\n      {/if}\n      <div class=\"grid auto-rows-min grid-cols-1 gap-8\">\n        <UserAvatar avatar={$user.data.getUser.avatar} username={$user.data.getUser.username} />\n        <UserInfo user={$user.data.getUser} />\n      </div>\n    </div>\n  </div>\n{:else}\n  <Page404 />\n{/if}\n"],"names":["prerender","load","async","params","parent","n","loadWaitForNoFetch","user","queryStore","query","GetUserDocument","client","variables","userId","t2_value","ctx","prettyDate","created_at","insert_hydration_dev","target","div1","anchor","append_hydration_dev","section","div0","h3","span","strong","br","dirty","set_data_dev","t2","t5","t5_value","$$props","t","getTranslate","attr_dev","img","img_src_value","div","avatar","username","userAvatar","assets","description","data","getUser","title","metadescriptors_changes","t0_value","id","create_if_block_7","create_if_block_6","div4","h1","button","div3","div2","current","t0","useravatar_changes","error","message","p","t1","t1_value","base","a","each_value_1","ensure_array_like_dev","guides","length","i","create_if_block_5","each_blocks","each_value","mods","create_if_block_4","logo","guidecard_changes","props","mod","modcard_changes","fetching","create_if_block_8","guidesTab","click_handler","$$invalidate","$$subscribe_user"],"mappings":"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"}