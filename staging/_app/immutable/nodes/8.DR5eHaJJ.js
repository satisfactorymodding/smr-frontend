import{S as At,i as Lt,d as M,s as Mt,v as qt,_ as xt,af as yt,a6 as Z,ai as at,y as Bt,X as Rt,G as rt,b as j,e as E,f as Vt,H as Ft,I as lt,j as g,k as O,g as T,J as L,h as _,K as I,m as b,L as ct,n as H,r as N,t as F,q as Et,Q as ft,u as Pt,x as Gt,M as m,a2 as It,T as Tt,p as bt,W as zt,a0 as G,a1 as z,a3 as X,O as Dt,R as Qt}from"../chunks/vendor.BiWIQeBY.js";import{n as kt,o as wt,p as Ct}from"../chunks/graphql.JkthYSgF.js";import{a as tt}from"../chunks/api.QxwXy5zz.js";import"../chunks/user.B4NHL-m8.js";import{M as _t}from"../chunks/MetaDescriptors.0SqSwX-d.js";import{a as et}from"../chunks/formatting.BK0j8hYv.js";const D="src/routes/admin/unapproved-versions/+page.svelte";function St(s,t,e){const n=s.slice();return n[17]=t[e],n}function nt(s){let t,e,n,r,h;function d(u){s[8](u)}let c={showFirstLastButtons:!0,showPreviousNextButtons:!0,controlVariant:"variant-filled-surface"};s[4]!==void 0&&(c.settings=s[4]),n=new at({props:c,$$inline:!0}),Bt.push(()=>Rt(n,"settings",d)),n.$on("page",s[9]),n.$on("amount",s[10]);const p={c:function(){t=E("div"),e=E("div"),rt(n.$$.fragment),this.h()},l:function(f){t=T(f,"DIV",{class:!0});var o=_(t);e=T(o,"DIV",{});var $=_(e);lt(n.$$.fragment,$),$.forEach(g),o.forEach(g),this.h()},h:function(){b(e,D,63,4,1563),I(t,"class","mb-5 ml-auto flex justify-end"),b(t,D,62,2,1515)},m:function(f,o){H(f,t,o),m(t,e),ct(n,e,null),h=!0},p:function(f,o){const $={};!r&&o&16&&(r=!0,$.settings=f[4],It(()=>r=!1)),n.$set($)},i:function(f){h||(N(n.$$.fragment,f),h=!0)},o:function(f){F(n.$$.fragment,f),h=!1},d:function(f){f&&g(t),ft(n)}};return M("SvelteRegisterBlock",{block:p,id:nt.name,type:"if",source:"(54:0) {#if totalVersions}",ctx:s}),p}function jt(s){let t,e,n,r,h="Mod",d,c,p="Version",u,f,o="Release Date",$,x,y="",l,k,w=Tt(s[3].data.getUnapprovedVersions.versions),i=[];for(let B=0;B<w.length;B+=1)i[B]=st(St(s,w,B));const v={c:function(){t=E("table"),e=E("thead"),n=E("tr"),r=E("th"),r.textContent=h,d=j(),c=E("th"),c.textContent=p,u=j(),f=E("th"),f.textContent=o,$=j(),x=E("th"),x.innerHTML=y,l=j(),k=E("tbody");for(let S=0;S<i.length;S+=1)i[S].c();this.h()},l:function(S){t=T(S,"TABLE",{class:!0});var C=_(t);e=T(C,"THEAD",{});var V=_(e);n=T(V,"TR",{});var R=_(n);r=T(R,"TH",{"data-svelte-h":!0}),L(r)!=="svelte-1hkc9fy"&&(r.textContent=h),d=O(R),c=T(R,"TH",{"data-svelte-h":!0}),L(c)!=="svelte-1mhdjxa"&&(c.textContent=p),u=O(R),f=T(R,"TH",{"data-svelte-h":!0}),L(f)!=="svelte-pi2tux"&&(f.textContent=o),$=O(R),x=T(R,"TH",{"data-svelte-h":!0}),L(x)!=="svelte-qfgexu"&&(x.innerHTML=y),R.forEach(g),V.forEach(g),l=O(C),k=T(C,"TBODY",{});var a=_(k);for(let U=0;U<i.length;U+=1)i[U].l(a);a.forEach(g),C.forEach(g),this.h()},h:function(){b(r,D,84,10,2160),b(c,D,85,10,2183),b(f,D,86,10,2210),b(x,D,87,10,2242),b(n,D,83,8,2145),b(e,D,82,6,2129),b(k,D,90,6,2303),I(t,"class","table table-hover max-w-full"),b(t,D,81,4,2078)},m:function(S,C){H(S,t,C),m(t,e),m(e,n),m(n,r),m(n,d),m(n,c),m(n,u),m(n,f),m(n,$),m(n,x),m(t,l),m(t,k);for(let V=0;V<i.length;V+=1)i[V]&&i[V].m(k,null)},p:function(S,C){if(C&200){w=Tt(S[3].data.getUnapprovedVersions.versions);let V;for(V=0;V<w.length;V+=1){const R=St(S,w,V);i[V]?i[V].p(R,C):(i[V]=st(R),i[V].c(),i[V].m(k,null))}for(;V<i.length;V+=1)i[V].d(1);i.length=w.length}},d:function(S){S&&g(t),zt(i,S)}};return M("SvelteRegisterBlock",{block:v,id:jt.name,type:"else",source:"(73:2) {:else}",ctx:s}),v}function Ot(s){let t,e,n=s[3].error.message+"",r;const h={c:function(){t=E("section"),e=G("Oh no... "),r=G(n),this.h()},l:function(c){t=T(c,"SECTION",{class:!0});var p=_(t);e=z(p,"Oh no... "),r=z(p,n),p.forEach(g),this.h()},h:function(){I(t,"class","p-4"),b(t,D,79,4,1998)},m:function(c,p){H(c,t,p),m(t,e),m(t,r)},p:function(c,p){p&8&&n!==(n=c[3].error.message+"")&&X(r,n)},d:function(c){c&&g(t)}};return M("SvelteRegisterBlock",{block:h,id:Ot.name,type:"if",source:"(71:28) ",ctx:s}),h}function Ut(s){let t,e="Loading...";const n={c:function(){t=E("section"),t.textContent=e,this.h()},l:function(h){t=T(h,"SECTION",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-1e06hs8"&&(t.textContent=e),this.h()},h:function(){I(t,"class","p-4"),b(t,D,77,4,1923)},m:function(h,d){H(h,t,d)},p:Pt,d:function(h){h&&g(t)}};return M("SvelteRegisterBlock",{block:n,id:Ut.name,type:"if",source:"(69:2) {#if $versions.fetching}",ctx:s}),n}function st(s){let t,e,n=s[17].mod.name+"",r,h,d,c=s[17].version+"",p,u,f,o=et(s[17].created_at)+"",$,x,y,l,k,w="Approve",i,v,B="Deny",S,C,V,R,a,U,Y,W,J,K,ut;function Ht(){return s[11](s[17])}function Nt(){return s[12](s[17])}const dt={c:function(){t=E("tr"),e=E("td"),r=G(n),h=j(),d=E("td"),p=G(c),u=j(),f=E("td"),$=G(o),x=j(),y=E("td"),l=E("div"),k=E("button"),k.textContent=w,i=j(),v=E("button"),v.textContent=B,S=j(),C=E("a"),V=G("Download"),a=j(),U=E("a"),Y=G("View"),J=j(),this.h()},l:function(q){t=T(q,"TR",{});var P=_(t);e=T(P,"TD",{});var ht=_(e);r=z(ht,n),ht.forEach(g),h=O(P),d=T(P,"TD",{});var pt=_(d);p=z(pt,c),pt.forEach(g),u=O(P),f=T(P,"TD",{});var mt=_(f);$=z(mt,o),mt.forEach(g),x=O(P),y=T(P,"TD",{class:!0});var vt=_(y);l=T(vt,"DIV",{class:!0});var A=_(l);k=T(A,"BUTTON",{class:!0,"data-svelte-h":!0}),L(k)!=="svelte-qyrrqz"&&(k.textContent=w),i=O(A),v=T(A,"BUTTON",{class:!0,"data-svelte-h":!0}),L(v)!=="svelte-50citx"&&(v.textContent=B),S=O(A),C=T(A,"A",{class:!0,href:!0});var gt=_(C);V=z(gt,"Download"),gt.forEach(g),a=O(A),U=T(A,"A",{class:!0,href:!0});var $t=_(U);Y=z($t,"View"),$t.forEach(g),A.forEach(g),vt.forEach(g),J=O(P),P.forEach(g),this.h()},h:function(){b(e,D,93,12,2411),b(d,D,94,12,2451),b(f,D,95,12,2490),I(k,"class","variant-ghost-primary btn"),b(k,D,98,16,2633),I(v,"class","variant-ghost-primary btn"),b(v,D,99,16,2752),I(C,"class","variant-ghost-primary btn"),I(C,"href",R=tt+"/mod/"+s[17].mod_id+"/versions/"+s[17].id+"/download"),b(C,D,100,16,2865),I(U,"class","variant-ghost-primary btn"),I(U,"href",W=Z+"/mod/"+s[17].mod_id+"/version/"+s[17].id),b(U,D,105,16,3088),I(l,"class","grid grid-flow-col gap-4"),b(l,D,97,14,2578),I(y,"class","!p-2.5"),b(y,D,96,12,2544),b(t,D,92,10,2394)},m:function(q,P){H(q,t,P),m(t,e),m(e,r),m(t,h),m(t,d),m(d,p),m(t,u),m(t,f),m(f,$),m(t,x),m(t,y),m(y,l),m(l,k),m(l,i),m(l,v),m(l,S),m(l,C),m(C,V),m(l,a),m(l,U),m(U,Y),m(t,J),K||(ut=[Dt(k,"click",Ht,!1,!1,!1,!1),Dt(v,"click",Nt,!1,!1,!1,!1)],K=!0)},p:function(q,P){s=q,P&8&&n!==(n=s[17].mod.name+"")&&X(r,n),P&8&&c!==(c=s[17].version+"")&&X(p,c),P&8&&o!==(o=et(s[17].created_at)+"")&&X($,o),P&8&&R!==(R=tt+"/mod/"+s[17].mod_id+"/versions/"+s[17].id+"/download")&&I(C,"href",R),P&8&&W!==(W=Z+"/mod/"+s[17].mod_id+"/version/"+s[17].id)&&I(U,"href",W)},d:function(q){q&&g(t),K=!1,Qt(ut)}};return M("SvelteRegisterBlock",{block:dt,id:st.name,type:"each",source:"(84:8) {#each $versions.data.getUnapprovedVersions.versions as version}",ctx:s}),dt}function it(s){let t,e,n,r;function h(p){s[13](p)}let d={showFirstLastButtons:!0,showPreviousNextButtons:!0,controlVariant:"variant-filled-surface"};s[4]!==void 0&&(d.settings=s[4]),e=new at({props:d,$$inline:!0}),Bt.push(()=>Rt(e,"settings",h)),e.$on("page",s[14]),e.$on("amount",s[15]);const c={c:function(){t=E("div"),rt(e.$$.fragment),this.h()},l:function(u){t=T(u,"DIV",{class:!0});var f=_(t);lt(e.$$.fragment,f),f.forEach(g),this.h()},h:function(){I(t,"class","ml-auto mt-5 flex justify-end"),b(t,D,118,2,3373)},m:function(u,f){H(u,t,f),ct(e,t,null),r=!0},p:function(u,f){const o={};!n&&f&16&&(n=!0,o.settings=u[4],It(()=>n=!1)),e.$set(o)},i:function(u){r||(N(e.$$.fragment,u),r=!0)},o:function(u){F(e.$$.fragment,u),r=!1},d:function(u){u&&g(t),ft(e)}};return M("SvelteRegisterBlock",{block:c,id:it.name,type:"if",source:"(110:0) {#if totalVersions}",ctx:s}),c}function ot(s){let t,e,n,r="Unapproved Versions",h,d,c,p,u,f;t=new _t({props:{description:"Unapproved mod versions",title:"Admin: Unapproved Versions"},$$inline:!0});let o=s[2]&&nt(s);function $(w,i){return w[3].fetching?Ut:w[3].error?Ot:jt}let x=$(s),y=x(s),l=s[2]&&it(s);const k={c:function(){rt(t.$$.fragment),e=j(),n=E("h1"),n.textContent=r,h=j(),o&&o.c(),d=j(),c=E("div"),y.c(),p=j(),l&&l.c(),u=Vt(),this.h()},l:function(i){const v=Ft("svelte-c87g9p",document.head);lt(t.$$.fragment,v),v.forEach(g),e=O(i),n=T(i,"H1",{class:!0,"data-svelte-h":!0}),L(n)!=="svelte-1o21eet"&&(n.textContent=r),h=O(i),o&&o.l(i),d=O(i),c=T(i,"DIV",{class:!0});var B=_(c);y.l(B),B.forEach(g),p=O(i),l&&l.l(i),u=Vt(),this.h()},h:function(){I(n,"class","svelte-1egakhm"),b(n,D,59,0,1463),I(c,"class","card"),b(c,D,75,0,1873)},m:function(i,v){ct(t,document.head,null),H(i,e,v),H(i,n,v),H(i,h,v),o&&o.m(i,v),H(i,d,v),H(i,c,v),y.m(c,null),H(i,p,v),l&&l.m(i,v),H(i,u,v),f=!0},p:function(i,[v]){i[2]?o?(o.p(i,v),v&4&&N(o,1)):(o=nt(i),o.c(),N(o,1),o.m(d.parentNode,d)):o&&(bt(),F(o,1,1,()=>{o=null}),Et()),x===(x=$(i))&&y?y.p(i,v):(y.d(1),y=x(i),y&&(y.c(),y.m(c,null))),i[2]?l?(l.p(i,v),v&4&&N(l,1)):(l=it(i),l.c(),N(l,1),l.m(u.parentNode,u)):l&&(bt(),F(l,1,1,()=>{l=null}),Et())},i:function(i){f||(N(t.$$.fragment,i),N(o),N(l),f=!0)},o:function(i){F(t.$$.fragment,i),F(o),F(l),f=!1},d:function(i){i&&(g(e),g(n),g(h),g(d),g(c),g(p),g(u)),ft(t),o&&o.d(i),y.d(),l&&l.d(i)}};return M("SvelteRegisterBlock",{block:k,id:ot.name,type:"component",source:"",ctx:s}),k}function Wt(s,t,e){let n,r,h,d,c=Pt,p=()=>(c(),c=Gt(n,a=>e(3,d=a)),n);s.$$.on_destroy.push(()=>c());let{$$slots:u={},$$scope:f}=t;qt("Page",u,[]);const o=xt();let $=20,x=1;const y=a=>{o.mutation(kt,{versionId:a}).toPromise().then(()=>{n.pause(),n.resume()})},l=a=>{o.mutation(wt,{versionId:a}).toPromise().then(()=>{n.pause(),n.resume()})},k=[];Object.keys(t).forEach(a=>{!~k.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<Page> was created with unknown prop '${a}'`)});function w(a){h=a,e(4,h),e(1,x),e(0,$),e(2,r),e(3,d)}const i=a=>e(1,x=a.detail),v=a=>e(0,$=a.detail),B=a=>y(a.id),S=a=>l(a.id);function C(a){h=a,e(4,h),e(1,x),e(0,$),e(2,r),e(3,d)}const V=a=>e(1,x=a.detail),R=a=>e(0,$=a.detail);return s.$capture_state=()=>({ApproveVersionDocument:kt,DenyVersionDocument:wt,GetUnapprovedVersionsDocument:Ct,getContextClient:xt,queryStore:yt,API_REST:tt,base:Z,MetaDescriptors:_t,prettyDate:et,Paginator:at,client:o,perPage:$,page:x,approveVersion:y,denyVersion:l,totalVersions:r,paginationSettings:h,versions:n,$versions:d}),s.$inject_state=a=>{"perPage"in a&&e(0,$=a.perPage),"page"in a&&e(1,x=a.page),"totalVersions"in a&&e(2,r=a.totalVersions),"paginationSettings"in a&&e(4,h=a.paginationSettings),"versions"in a&&p(e(5,n=a.versions))},t&&"$$inject"in t&&s.$inject_state(t.$$inject),s.$$.update=()=>{s.$$.dirty&3&&p(e(5,n=yt({query:Ct,client:o,variables:{filter:{offset:(x-1)*$,limit:$}}}))),s.$$.dirty&8&&e(2,r=d?.data?.getUnapprovedVersions?.count),s.$$.dirty&7&&e(4,h={page:x,limit:$,size:r,amounts:[5,10,20,50,100]})},[$,x,r,d,h,n,y,l,w,i,v,B,S,C,V,R]}class ee extends At{constructor(t){super(t),Lt(this,t,Wt,ot,Mt,{}),M("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:ot.name})}}export{ee as component};
//# sourceMappingURL=8.DR5eHaJJ.js.map
