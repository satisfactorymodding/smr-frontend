import{S as ue,i as le,d as V,s as de,bn as Z,r as $e,T as me,v as ge,aJ as A,aK as F,Y as pe,Z as he,aM as G,a_ as H,bo as Q,ao as ve,k as B,a6 as D,x as C,L as E,a8 as P,bh as be,q as m,a9 as L,y as M,z as I,N as R,ab as _,ac as Ve,C as O,ad as k,l as y,ae as T,p as h,t as b,n as W,ai as ye,aj as j,m as X,O as ee,P as S}from"../chunks/vendor.01de29c8.js";import{J as K,P as U}from"../chunks/graphql.cb6ec208.js";import{T as te}from"../chunks/Toast.ec240bdf.js";import{V as ne}from"../chunks/VersionForm.e164ad74.js";import{M as oe}from"../chunks/MetaDescriptors.fe7dde36.js";const xe=async({params:o})=>({...o}),_e=Object.freeze(Object.defineProperty({__proto__:null,load:xe},Symbol.toStringTag,{value:"Module"})),{console:Y}=ve,N="src/routes/mod/[modId]/version/[versionId]/edit/+page.svelte";function q(o){let e,n;e=new oe({props:{description:"Editing mod version "+o[1].data.getVersion.mod.name+" "+o[1].data.getVersion.version,title:"Edit mod version "+o[1].data.getVersion.mod.name+" "+o[1].data.getVersion.version},$$inline:!0});const s={c:function(){P(e.$$.fragment)},l:function(t){_(e.$$.fragment,t)},m:function(t,r){T(e,t,r),n=!0},p:function(t,r){const f={};r&2&&(f.description="Editing mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),r&2&&(f.title="Edit mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),e.$set(f)},i:function(t){n||(h(e.$$.fragment,t),n=!0)},o:function(t){b(e.$$.fragment,t),n=!1},d:function(t){j(e,t)}};return V("SvelteRegisterBlock",{block:s,id:q.name,type:"if",source:"(49:2) {#if !$version.fetching && !$version.error && $version.data.getVersion}",ctx:o}),s}function ie(o){let e,n;e=new ne({props:{onSubmit:o[5],initialValues:o[3],modReference:o[1].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save"},$$inline:!0});const s={c:function(){P(e.$$.fragment)},l:function(t){_(e.$$.fragment,t)},m:function(t,r){T(e,t,r),n=!0},p:function(t,r){const f={};r&8&&(f.initialValues=t[3]),r&2&&(f.modReference=t[1].data.getVersion.mod.mod_reference),e.$set(f)},i:function(t){n||(h(e.$$.fragment,t),n=!0)},o:function(t){b(e.$$.fragment,t),n=!1},d:function(t){j(e,t)}};return V("SvelteRegisterBlock",{block:s,id:ie.name,type:"else",source:"(64:4) {:else}",ctx:o}),s}function re(o){let e,n,s=o[1].error.message+"",i;const t={c:function(){e=C("p"),n=E("Oh no... "),i=E(s),this.h()},l:function(f){e=M(f,"P",{});var d=I(e);n=R(d,"Oh no... "),i=R(d,s),d.forEach(m),this.h()},h:function(){O(e,N,62,6,1948)},m:function(f,d){y(f,e,d),k(e,n),k(e,i)},p:function(f,d){d&2&&s!==(s=f[1].error.message+"")&&ee(i,s)},i:S,o:S,d:function(f){f&&m(e)}};return V("SvelteRegisterBlock",{block:t,id:re.name,type:"if",source:"(62:29) ",ctx:o}),t}function se(o){let e,n;const s={c:function(){e=C("p"),n=E("Loading..."),this.h()},l:function(t){e=M(t,"P",{});var r=I(e);n=R(r,"Loading..."),r.forEach(m),this.h()},h:function(){O(e,N,60,6,1894)},m:function(t,r){y(t,e,r),k(e,n)},p:S,i:S,o:S,d:function(t){t&&m(e)}};return V("SvelteRegisterBlock",{block:s,id:se.name,type:"if",source:"(60:4) {#if $version.fetching}",ctx:o}),s}function ae(o){let e,n,s,i;const t=[se,re,ie],r=[];function f($,l){return $[1].fetching?0:$[1].error?1:2}e=f(o),n=r[e]=t[e](o);const d={c:function(){n.c(),s=B()},l:function(l){n.l(l),s=B()},m:function(l,u){r[e].m(l,u),y(l,s,u),i=!0},p:function(l,u){let g=e;e=f(l),e===g?r[e].p(l,u):(X(),b(r[g],1,1,()=>{r[g]=null}),W(),n=r[e],n?n.p(l,u):(n=r[e]=t[e](l),n.c()),h(n,1),n.m(s.parentNode,s))},i:function(l){i||(h(n),i=!0)},o:function(l){b(n),i=!1},d:function(l){r[e].d(l),l&&m(s)}};return V("SvelteRegisterBlock",{block:d,id:ae.name,type:"slot",source:"(59:2) <Content>",ctx:o}),d}function ce(o){let e,n;e=new Q({props:{$$slots:{default:[ae]},$$scope:{ctx:o}},$$inline:!0});const s={c:function(){P(e.$$.fragment)},l:function(t){_(e.$$.fragment,t)},m:function(t,r){T(e,t,r),n=!0},p:function(t,r){const f={};r&2058&&(f.$$scope={dirty:r,ctx:t}),e.$set(f)},i:function(t){n||(h(e.$$.fragment,t),n=!0)},o:function(t){b(e.$$.fragment,t),n=!1},d:function(t){j(e,t)}};return V("SvelteRegisterBlock",{block:s,id:ce.name,type:"slot",source:"(58:0) <Card>",ctx:o}),s}function fe(o){let e,n;const s={c:function(){e=C("span"),n=E(o[2]),this.h()},l:function(t){e=M(t,"SPAN",{});var r=I(e);n=R(r,o[2]),r.forEach(m),this.h()},h:function(){O(e,N,75,2,2249)},m:function(t,r){y(t,e,r),k(e,n)},p:function(t,r){r&4&&ee(n,t[2])},d:function(t){t&&m(e)}};return V("SvelteRegisterBlock",{block:s,id:fe.name,type:"slot",source:"(75:0) <Toast bind:running={errorToast}>",ctx:o}),s}function J(o){let e,n,s,i,t,r,f,d,$,l,u=!o[1].fetching&&!o[1].error&&o[1].data.getVersion&&q(o);r=new Z({props:{$$slots:{default:[ce]},$$scope:{ctx:o}},$$inline:!0});function g(p){o[7](p)}let x={$$slots:{default:[fe]},$$scope:{ctx:o}};o[0]!==void 0&&(x.running=o[0]),d=new te({props:x,$$inline:!0}),$e.push(()=>me(d,"running",g));const w={c:function(){u&&u.c(),e=B(),n=D(),s=C("h1"),i=E("Edit Version"),t=D(),P(r.$$.fragment),f=D(),P(d.$$.fragment),this.h()},l:function(c){const a=be("svelte-wzsk0g",document.head);u&&u.l(a),e=B(),a.forEach(m),n=L(c),s=M(c,"H1",{class:!0});var v=I(s);i=R(v,"Edit Version"),v.forEach(m),t=L(c),_(r.$$.fragment,c),f=L(c),_(d.$$.fragment,c),this.h()},h:function(){Ve(s,"class","text-4xl my-4 font-bold"),O(s,N,55,0,1786)},m:function(c,a){u&&u.m(document.head,null),k(document.head,e),y(c,n,a),y(c,s,a),k(s,i),y(c,t,a),T(r,c,a),y(c,f,a),T(d,c,a),l=!0},p:function(c,[a]){!c[1].fetching&&!c[1].error&&c[1].data.getVersion?u?(u.p(c,a),a&2&&h(u,1)):(u=q(c),u.c(),h(u,1),u.m(e.parentNode,e)):u&&(X(),b(u,1,1,()=>{u=null}),W());const v={};a&2058&&(v.$$scope={dirty:a,ctx:c}),r.$set(v);const z={};a&2052&&(z.$$scope={dirty:a,ctx:c}),!$&&a&1&&($=!0,z.running=c[0],ye(()=>$=!1)),d.$set(z)},i:function(c){l||(h(u),h(r.$$.fragment,c),h(d.$$.fragment,c),l=!0)},o:function(c){b(u),b(r.$$.fragment,c),b(d.$$.fragment,c),l=!1},d:function(c){u&&u.d(c),m(e),c&&m(n),c&&m(s),c&&m(t),j(r,c),c&&m(f),j(d,c)}};return V("SvelteRegisterBlock",{block:w,id:J.name,type:"component",source:"",ctx:o}),w}function ke(o,e,n){let s,i,{$$slots:t={},$$scope:r}=e;ge("Page",t,[]);let{data:f}=e;const{modId:d,versionId:$}=f,l=A();let u="",g=!1;const x=F({query:K,client:l,variables:{version:$}});pe(x,"version"),he(o,x,a=>n(1,i=a));const w=async a=>l.mutation(U,{versionId:$,version:a}).toPromise().then(v=>{if(v.error)console.error(v.error.message),n(2,u="Error editing version: "+v.error.message),n(0,g=!0);else return G(H+"/mod/"+d+"/version/"+$)});o.$$.on_mount.push(function(){f===void 0&&!("data"in e||o.$$.bound[o.$$.props.data])&&Y.warn("<Page> was created without expected prop 'data'")});const p=["data"];Object.keys(e).forEach(a=>{!~p.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&Y.warn(`<Page> was created with unknown prop '${a}'`)});function c(a){g=a,n(0,g)}return o.$$set=a=>{"data"in a&&n(6,f=a.data)},o.$capture_state=()=>({queryStore:F,getContextClient:A,GetModVersionDocument:K,UpdateVersionDocument:U,Toast:te,goto:G,VersionForm:ne,base:H,MetaDescriptors:oe,Card:Z,Content:Q,data:f,modId:d,versionId:$,client:l,errorMessage:u,errorToast:g,version:x,onSubmit:w,initialValues:s,$version:i}),o.$inject_state=a=>{"data"in a&&n(6,f=a.data),"errorMessage"in a&&n(2,u=a.errorMessage),"errorToast"in a&&n(0,g=a.errorToast),"initialValues"in a&&n(3,s=a.initialValues)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&1&&(g||n(2,u="")),o.$$.dirty&2&&n(3,s=i.data?{...i.data.getVersion,...i.data.getVersion.arch,logo:void 0}:void 0)},[g,i,u,s,x,w,f,c]}class Te extends ue{constructor(e){super(e),le(this,e,ke,J,de,{data:6}),V("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:J.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Te as component,_e as universal};
//# sourceMappingURL=19.a81b2b0a.js.map
