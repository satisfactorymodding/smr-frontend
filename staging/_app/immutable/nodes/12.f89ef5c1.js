import{S as re,i as ce,d as k,s as ue,v as de,F as q,_ as D,G as M,a1 as le,a2 as fe,$ as N,H as T,a0 as ge,f as V,b as z,e as E,K as me,j as m,k as F,g as S,M as A,h as j,N as H,m as w,Q as C,n as G,r as v,t as x,q as L,J as U,L as Z,O as ee,R as te,p as J,W as K,X as Q,Y as pe,u as y}from"../chunks/vendor.260145b8.js";import{n as W,E as X}from"../chunks/graphql.80ff4abf.js";import{G as ie}from"../chunks/GuideForm.71568a50.js";import{M as ne}from"../chunks/MetaDescriptors.bc7214f7.js";const $e=async({params:i})=>({...i}),ke=Object.freeze(Object.defineProperty({__proto__:null,load:$e},Symbol.toStringTag,{value:"Module"})),{console:Y}=ge,P="src/routes/guide/[guideId]/edit/+page.svelte";function O(i){let e,r;e=new ne({props:{description:"Editing guide '"+i[0].data.getGuide.short_description+"'",title:"Edit guide '"+i[0].data.getGuide.name+"'"},$$inline:!0});const o={c:function(){U(e.$$.fragment)},l:function(t){Z(e.$$.fragment,t)},m:function(t,n){ee(e,t,n),r=!0},p:function(t,n){const s={};n&1&&(s.description="Editing guide '"+t[0].data.getGuide.short_description+"'"),n&1&&(s.title="Edit guide '"+t[0].data.getGuide.name+"'"),e.$set(s)},i:function(t){r||(v(e.$$.fragment,t),r=!0)},o:function(t){x(e.$$.fragment,t),r=!1},d:function(t){te(e,t)}};return k("SvelteRegisterBlock",{block:o,id:O.name,type:"if",source:"(46:2) {#if !$guide.fetching && !$guide.error && $guide.data.getGuide}",ctx:i}),o}function oe(i){let e,r;e=new ie({props:{onSubmit:i[2],initialValues:i[0].data.getGuide,submitText:"Save"},$$inline:!0});const o={c:function(){U(e.$$.fragment)},l:function(t){Z(e.$$.fragment,t)},m:function(t,n){ee(e,t,n),r=!0},p:function(t,n){const s={};n&1&&(s.initialValues=t[0].data.getGuide),e.$set(s)},i:function(t){r||(v(e.$$.fragment,t),r=!0)},o:function(t){x(e.$$.fragment,t),r=!1},d:function(t){te(e,t)}};return k("SvelteRegisterBlock",{block:o,id:oe.name,type:"else",source:"(61:4) {:else}",ctx:i}),o}function ae(i){let e,r,o=i[0].error.message+"",a;const t={c:function(){e=E("p"),r=K("Oh no... "),a=K(o),this.h()},l:function(s){e=S(s,"P",{});var u=j(e);r=Q(u,"Oh no... "),a=Q(u,o),u.forEach(m),this.h()},h:function(){w(e,P,67,6,1839)},m:function(s,u){G(s,e,u),C(e,r),C(e,a)},p:function(s,u){u&1&&o!==(o=s[0].error.message+"")&&pe(a,o)},i:y,o:y,d:function(s){s&&m(e)}};return k("SvelteRegisterBlock",{block:t,id:ae.name,type:"if",source:"(59:27) ",ctx:i}),t}function se(i){let e,r="Loading...";const o={c:function(){e=E("p"),e.textContent=r,this.h()},l:function(t){e=S(t,"P",{"data-svelte-h":!0}),A(e)!=="svelte-qdsr2u"&&(e.textContent=r),this.h()},h:function(){w(e,P,65,6,1787)},m:function(t,n){G(t,e,n)},p:y,i:y,o:y,d:function(t){t&&m(e)}};return k("SvelteRegisterBlock",{block:o,id:se.name,type:"if",source:"(57:4) {#if $guide.fetching}",ctx:i}),o}function R(i){let e,r,o,a="Edit Guide",t,n,s,u,f,$,d=!i[0].fetching&&!i[0].error&&i[0].data.getGuide&&O(i);const _=[se,ae,oe],l=[];function h(p,c){return p[0].fetching?0:p[0].error?1:2}u=h(i),f=l[u]=_[u](i);const I={c:function(){d&&d.c(),e=V(),r=z(),o=E("h1"),o.textContent=a,t=z(),n=E("div"),s=E("section"),f.c(),this.h()},l:function(c){const g=me("svelte-2z35li",document.head);d&&d.l(g),e=V(),g.forEach(m),r=F(c),o=S(c,"H1",{class:!0,"data-svelte-h":!0}),A(o)!=="svelte-mvt1bp"&&(o.textContent=a),t=F(c),n=S(c,"DIV",{class:!0});var b=j(n);s=S(b,"SECTION",{});var B=j(s);f.l(B),B.forEach(m),b.forEach(m),this.h()},h:function(){H(o,"class","text-4xl my-4 font-bold"),w(o,P,60,0,1667),w(s,P,63,2,1745),H(n,"class","card p-4"),w(n,P,62,0,1720)},m:function(c,g){d&&d.m(document.head,null),C(document.head,e),G(c,r,g),G(c,o,g),G(c,t,g),G(c,n,g),C(n,s),l[u].m(s,null),$=!0},p:function(c,[g]){!c[0].fetching&&!c[0].error&&c[0].data.getGuide?d?(d.p(c,g),g&1&&v(d,1)):(d=O(c),d.c(),v(d,1),d.m(e.parentNode,e)):d&&(J(),x(d,1,1,()=>{d=null}),L());let b=u;u=h(c),u===b?l[u].p(c,g):(J(),x(l[b],1,1,()=>{l[b]=null}),L(),f=l[u],f?f.p(c,g):(f=l[u]=_[u](c),f.c()),v(f,1),f.m(s,null))},i:function(c){$||(v(d),v(f),$=!0)},o:function(c){x(d),x(f),$=!1},d:function(c){c&&(m(r),m(o),m(t),m(n)),d&&d.d(c),m(e),l[u].d()}};return k("SvelteRegisterBlock",{block:I,id:R.name,type:"component",source:"",ctx:i}),I}function he(i,e,r){let o,{$$slots:a={},$$scope:t}=e;de("Page",a,[]);let{data:n}=e;const{guideId:s}=n,u=q(),f=D(),$=M({query:W,client:u,variables:{guide:s}});le($,"guide"),fe(i,$,l=>r(0,o=l));const d=l=>{u.mutation(X,{guideId:s,guide:l}).toPromise().then(h=>{h.error?(console.error(h.error.message),f.trigger({message:"Error editing guide: "+h.error.message,background:"variant-filled-error",autohide:!1})):(f.trigger({message:"Guide updated",background:"variant-filled-success",timeout:5e3}),N(T+"/guide/"+h.data.updateGuide.id))})};i.$$.on_mount.push(function(){n===void 0&&!("data"in e||i.$$.bound[i.$$.props.data])&&Y.warn("<Page> was created without expected prop 'data'")});const _=["data"];return Object.keys(e).forEach(l=>{!~_.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&Y.warn(`<Page> was created with unknown prop '${l}'`)}),i.$$set=l=>{"data"in l&&r(3,n=l.data)},i.$capture_state=()=>({getContextClient:q,queryStore:M,EditGuideDocument:X,GetGuideDocument:W,goto:N,GuideForm:ie,base:T,MetaDescriptors:ne,getToastStore:D,data:n,guideId:s,client:u,toastStore:f,guide:$,onSubmit:d,$guide:o}),i.$inject_state=l=>{"data"in l&&r(3,n=l.data)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[o,$,d,n]}class Ee extends re{constructor(e){super(e),ce(this,e,he,R,ue,{data:3}),k("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:R.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ee as component,ke as universal};
//# sourceMappingURL=12.f89ef5c1.js.map
