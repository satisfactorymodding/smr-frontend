import{S as ne,i as se,d as E,s as oe,v as ie,F as I,_ as O,G as D,$ as R,H as q,a0 as re,J,b as B,e as x,K as ae,L as K,j as p,k as T,g as y,M as Q,h as _,N,m as w,O as U,n as v,Q as L,t as P,q as ce,r as M,R as W,u as V,x as le,p as ue,W as A,X as F,Y as fe}from"../chunks/vendor.vQlxOa9b.js";import{l as G,m as H}from"../chunks/graphql.NT0BIh3j.js";import{S as X}from"../chunks/SMLVersionForm.g5wWAy7K.js";import{M as Y}from"../chunks/MetaDescriptors.6De1Tklh.js";const de=async({params:o})=>({...o}),ve=Object.freeze(Object.defineProperty({__proto__:null,load:de},Symbol.toStringTag,{value:"Module"})),{console:z}=re,k="src/routes/admin/sml-versions/[smlVersionId]/edit/+page.svelte";function Z(o){let e,i;e=new X({props:{onSubmit:o[3],initialValues:o[1],submitText:"Save"},$$inline:!0});const s={c:function(){J(e.$$.fragment)},l:function(n){K(e.$$.fragment,n)},m:function(n,a){U(e,n,a),i=!0},p:function(n,a){const l={};a&2&&(l.initialValues=n[1]),e.$set(l)},i:function(n){i||(M(e.$$.fragment,n),i=!0)},o:function(n){P(e.$$.fragment,n),i=!1},d:function(n){W(e,n)}};return E("SvelteRegisterBlock",{block:s,id:Z.name,type:"else",source:"(63:4) {:else}",ctx:o}),s}function ee(o){let e,i,s=o[0].error.message+"",r;const n={c:function(){e=x("p"),i=A("Oh no... "),r=A(s),this.h()},l:function(l){e=y(l,"P",{});var c=_(e);i=F(c,"Oh no... "),r=F(c,s),c.forEach(p),this.h()},h:function(){w(e,k,70,6,1931)},m:function(l,c){v(l,e,c),L(e,i),L(e,r)},p:function(l,c){c&1&&s!==(s=l[0].error.message+"")&&fe(r,s)},i:V,o:V,d:function(l){l&&p(e)}};return E("SvelteRegisterBlock",{block:n,id:ee.name,type:"if",source:"(61:32) ",ctx:o}),n}function te(o){let e,i="Loading...";const s={c:function(){e=x("p"),e.textContent=i,this.h()},l:function(n){e=y(n,"P",{"data-svelte-h":!0}),Q(e)!=="svelte-qdsr2u"&&(e.textContent=i),this.h()},h:function(){w(e,k,68,6,1874)},m:function(n,a){v(n,e,a)},p:V,i:V,o:V,d:function(n){n&&p(e)}};return E("SvelteRegisterBlock",{block:s,id:te.name,type:"if",source:"(59:4) {#if $smlVersion.fetching}",ctx:o}),s}function j(o){let e,i,s,r="Edit SMLVersion",n,a,l,c,u,S;e=new Y({props:{description:"Edit SML Version",title:"Admin: Edit SML Version"},$$inline:!0});const $=[te,ee,Z],d=[];function g(m,t){return m[0].fetching?0:m[0].error?1:2}c=g(o),u=d[c]=$[c](o);const b={c:function(){J(e.$$.fragment),i=B(),s=x("h1"),s.textContent=r,n=B(),a=x("div"),l=x("section"),u.c(),this.h()},l:function(t){const f=ae("svelte-7e9nlv",document.head);K(e.$$.fragment,f),f.forEach(p),i=T(t),s=y(t,"H1",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-j9ae4t"&&(s.textContent=r),n=T(t),a=y(t,"DIV",{class:!0});var h=_(a);l=y(h,"SECTION",{});var C=_(l);u.l(C),C.forEach(p),h.forEach(p),this.h()},h:function(){N(s,"class","my-4 text-4xl font-bold"),w(s,k,63,0,1744),w(l,k,66,2,1827),N(a,"class","card p-4"),w(a,k,65,0,1802)},m:function(t,f){U(e,document.head,null),v(t,i,f),v(t,s,f),v(t,n,f),v(t,a,f),L(a,l),d[c].m(l,null),S=!0},p:function(t,[f]){let h=c;c=g(t),c===h?d[c].p(t,f):(ue(),P(d[h],1,1,()=>{d[h]=null}),ce(),u=d[c],u?u.p(t,f):(u=d[c]=$[c](t),u.c()),M(u,1),u.m(l,null))},i:function(t){S||(M(e.$$.fragment,t),M(u),S=!0)},o:function(t){P(e.$$.fragment,t),P(u),S=!1},d:function(t){t&&(p(i),p(s),p(n),p(a)),W(e),d[c].d()}};return E("SvelteRegisterBlock",{block:b,id:j.name,type:"component",source:"",ctx:o}),b}function me(o,e,i){let s,r,n,a,l=V,c=()=>(l(),l=le(r,t=>i(0,a=t)),r);o.$$.on_destroy.push(()=>l());let{$$slots:u={},$$scope:S}=e;ie("Page",u,[]);let{data:$}=e;const d=I(),g=O(),b=t=>{d.mutation(H,{smlVersionID:s,smlVersion:t}).toPromise().then(f=>{f.error?(console.error(f.error.message),g.trigger({message:"Error editing SMLVersion: "+f.error.message,background:"variant-filled-error",autohide:!1})):(g.trigger({message:"SML version updated",background:"variant-filled-success",timeout:5e3}),R(q+"/admin/sml-versions"))})};o.$$.on_mount.push(function(){$===void 0&&!("data"in e||o.$$.bound[o.$$.props.data])&&z.warn("<Page> was created without expected prop 'data'")});const m=["data"];return Object.keys(e).forEach(t=>{!~m.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&z.warn(`<Page> was created with unknown prop '${t}'`)}),o.$$set=t=>{"data"in t&&i(4,$=t.data)},o.$capture_state=()=>({getContextClient:I,queryStore:D,GetSmlVersionAdminDocument:G,UpdateSmlVersionDocument:H,goto:R,SMLVersionForm:X,base:q,MetaDescriptors:Y,getToastStore:O,data:$,client:d,toastStore:g,onSubmit:b,initialValues:n,smlVersionId:s,smlVersion:r,$smlVersion:a}),o.$inject_state=t=>{"data"in t&&i(4,$=t.data),"initialValues"in t&&i(1,n=t.initialValues),"smlVersionId"in t&&i(5,s=t.smlVersionId),"smlVersion"in t&&c(i(2,r=t.smlVersion))},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&16&&i(5,{smlVersionId:s}=$,s),o.$$.dirty&32&&c(i(2,r=D({query:G,client:d,variables:{smlVersionID:s}}))),o.$$.dirty&1&&i(1,n=a.data?{...a.data.getSMLVersion,logo:void 0}:void 0)},[a,n,r,b,$,s]}class Ve extends ne{constructor(e){super(e),se(this,e,me,j,oe,{data:4}),E("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:j.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ve as component,ve as universal};
//# sourceMappingURL=5.yOLKd0Sf.js.map
