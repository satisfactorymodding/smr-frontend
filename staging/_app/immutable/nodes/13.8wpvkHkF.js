import{S as ke,i as xe,d as D,s as ye,v as Ge,_ as te,a4 as ie,aj as ae,af as ne,a5 as V,a6 as z,a7 as we,f as oe,b as A,e as y,a0 as H,H as Ee,j as m,k as F,g as G,h as j,J as L,a1 as K,K as M,m as w,M as b,n as O,O as Se,r as B,t as T,q as se,u as q,x as Ce,G as de,I as fe,L as ge,Q as me,p as re,a3 as Pe}from"../chunks/vendor.D_Lordq-.js";import{q as ce,r as ue}from"../chunks/graphql.JkthYSgF.js";import{G as pe}from"../chunks/GuideForm.7nADFRSR.js";import{M as he}from"../chunks/MetaDescriptors.C7Kdcb06.js";const _e=async({params:a})=>({...a}),qe=Object.freeze(Object.defineProperty({__proto__:null,load:_e},Symbol.toStringTag,{value:"Module"})),{console:le}=we,E="src/routes/guide/[guideId]/edit/+page.svelte";function J(a){let e,o;e=new he({props:{description:"Editing guide '"+a[1].data.getGuide.short_description+"'",title:"Edit guide '"+a[1].data.getGuide.name+"'"},$$inline:!0});const n={c:function(){de(e.$$.fragment)},l:function(t){fe(e.$$.fragment,t)},m:function(t,c){ge(e,t,c),o=!0},p:function(t,c){const u={};c&2&&(u.description="Editing guide '"+t[1].data.getGuide.short_description+"'"),c&2&&(u.title="Edit guide '"+t[1].data.getGuide.name+"'"),e.$set(u)},i:function(t){o||(B(e.$$.fragment,t),o=!0)},o:function(t){T(e.$$.fragment,t),o=!1},d:function(t){me(e,t)}};return D("SvelteRegisterBlock",{block:n,id:J.name,type:"if",source:"(62:2) {#if !$guide.fetching && !$guide.error && $guide.data.getGuide}",ctx:a}),n}function $e(a){let e,o;e=new pe({props:{onSubmit:a[2],initialValues:a[1].data.getGuide,submitText:"Save",submitIcon:"save"},$$inline:!0});const n={c:function(){de(e.$$.fragment)},l:function(t){fe(e.$$.fragment,t)},m:function(t,c){ge(e,t,c),o=!0},p:function(t,c){const u={};c&2&&(u.initialValues=t[1].data.getGuide),e.$set(u)},i:function(t){o||(B(e.$$.fragment,t),o=!0)},o:function(t){T(e.$$.fragment,t),o=!1},d:function(t){me(e,t)}};return D("SvelteRegisterBlock",{block:n,id:$e.name,type:"else",source:"(84:4) {:else}",ctx:a}),n}function ve(a){let e,o,n=a[1].error.message+"",i;const t={c:function(){e=y("p"),o=H("Oh no... "),i=H(n),this.h()},l:function(u){e=G(u,"P",{});var d=j(e);o=K(d,"Oh no... "),i=K(d,n),d.forEach(m),this.h()},h:function(){w(e,E,93,6,2536)},m:function(u,d){O(u,e,d),b(e,o),b(e,i)},p:function(u,d){d&2&&n!==(n=u[1].error.message+"")&&Pe(i,n)},i:q,o:q,d:function(u){u&&m(e)}};return D("SvelteRegisterBlock",{block:t,id:ve.name,type:"if",source:"(82:27) ",ctx:a}),t}function be(a){let e,o="Loading...";const n={c:function(){e=y("p"),e.textContent=o,this.h()},l:function(t){e=G(t,"P",{"data-svelte-h":!0}),L(e)!=="svelte-qdsr2u"&&(e.textContent=o),this.h()},h:function(){w(e,E,91,6,2484)},m:function(t,c){O(t,e,c)},p:q,i:q,o:q,d:function(t){t&&m(e)}};return D("SvelteRegisterBlock",{block:n,id:be.name,type:"if",source:"(80:4) {#if $guide.fetching}",ctx:a}),n}function Q(a){let e,o,n,i,t="Edit Guide",c,u,d,k,x="arrow_back",_,S,h,$,f,g,I,R,l,s=!a[1].fetching&&!a[1].error&&a[1].data.getGuide&&J(a);const U=[be,ve,$e],C=[];function W(v,r){return v[1].fetching?0:v[1].error?1:2}f=W(a),g=C[f]=U[f](a);const X={c:function(){s&&s.c(),e=oe(),o=A(),n=y("div"),i=y("h1"),i.textContent=t,c=A(),u=y("div"),d=y("button"),k=y("span"),k.textContent=x,_=H(`
      Back to Guide`),S=A(),h=y("div"),$=y("section"),g.c(),this.h()},l:function(r){const p=Ee("svelte-2z35li",document.head);s&&s.l(p),e=oe(),p.forEach(m),o=F(r),n=G(r,"DIV",{class:!0});var P=j(n);i=G(P,"H1",{class:!0,"data-svelte-h":!0}),L(i)!=="svelte-1alq187"&&(i.textContent=t),c=F(P),u=G(P,"DIV",{});var Y=j(u);d=G(Y,"BUTTON",{class:!0});var N=j(d);k=G(N,"SPAN",{class:!0,"data-svelte-h":!0}),L(k)!=="svelte-qua3zr"&&(k.textContent=x),_=K(N,`
      Back to Guide`),N.forEach(m),Y.forEach(m),P.forEach(m),S=F(r),h=G(r,"DIV",{class:!0});var Z=j(h);$=G(Z,"SECTION",{});var ee=j($);g.l(ee),ee.forEach(m),Z.forEach(m),this.h()},h:function(){M(i,"class","my-4 text-4xl font-bold"),w(i,E,80,2,2159),M(k,"class","material-icons pr-2"),w(k,E,83,6,2319),M(d,"class","variant-ghost-primary btn"),w(d,E,82,4,2223),w(u,E,81,2,2213),M(n,"class","flex h-auto flex-wrap items-center justify-between"),w(n,E,79,0,2092),w($,E,89,2,2442),M(h,"class","card p-4"),w(h,E,88,0,2417)},m:function(r,p){s&&s.m(document.head,null),b(document.head,e),O(r,o,p),O(r,n,p),b(n,i),b(n,c),b(n,u),b(u,d),b(d,k),b(d,_),O(r,S,p),O(r,h,p),b(h,$),C[f].m($,null),I=!0,R||(l=Se(d,"click",a[7],!1,!1,!1,!1),R=!0)},p:function(r,[p]){!r[1].fetching&&!r[1].error&&r[1].data.getGuide?s?(s.p(r,p),p&2&&B(s,1)):(s=J(r),s.c(),B(s,1),s.m(e.parentNode,e)):s&&(re(),T(s,1,1,()=>{s=null}),se());let P=f;f=W(r),f===P?C[f].p(r,p):(re(),T(C[P],1,1,()=>{C[P]=null}),se(),g=C[f],g?g.p(r,p):(g=C[f]=U[f](r),g.c()),B(g,1),g.m($,null))},i:function(r){I||(B(s),B(g),I=!0)},o:function(r){T(s),T(g),I=!1},d:function(r){r&&(m(o),m(n),m(S),m(h)),s&&s.d(r),m(e),C[f].d(),R=!1,l()}};return D("SvelteRegisterBlock",{block:X,id:Q.name,type:"component",source:"",ctx:a}),X}function Be(a,e,o){let n,i,t,c=q,u=()=>(c(),c=Ce(i,l=>o(1,t=l)),i);a.$$.on_destroy.push(()=>c());let{$$slots:d={},$$scope:k}=e;Ge("Page",d,[]);let{data:x}=e;const _=te(),S=ie(),h=l=>{_.mutation(ce,{guideId:n,guide:l}).toPromise().then(s=>{s.error?(console.error(s.error.message),S.trigger({message:"Error editing guide: "+s.error.message,background:"variant-filled-error",autohide:!1})):(S.trigger({message:"Guide updated",background:"variant-filled-success",timeout:5e3}),V(z+"/guide/"+s.data.updateGuide.id))})},$=()=>{V(z+"/guide/"+n)},f={type:"confirm",title:"Go Back?",buttonTextCancel:"Keep Editing",buttonTextConfirm:"Go Back",body:"Going back will discard any unsaved changes. Are you sure you wish to continue?",response:l=>{l&&$()}},g=ae();a.$$.on_mount.push(function(){x===void 0&&!("data"in e||a.$$.bound[a.$$.props.data])&&le.warn("<Page> was created without expected prop 'data'")});const I=["data"];Object.keys(e).forEach(l=>{!~I.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&le.warn(`<Page> was created with unknown prop '${l}'`)});const R=()=>g.trigger(f);return a.$$set=l=>{"data"in l&&o(5,x=l.data)},a.$capture_state=()=>({getContextClient:te,queryStore:ne,EditGuideDocument:ce,GetGuideDocument:ue,goto:V,GuideForm:pe,base:z,MetaDescriptors:he,getModalStore:ae,getToastStore:ie,data:x,client:_,toastStore:S,onSubmit:h,goBackFn:$,backModal:f,modalStore:g,guideId:n,guide:i,$guide:t}),a.$inject_state=l=>{"data"in l&&o(5,x=l.data),"guideId"in l&&o(6,n=l.guideId),"guide"in l&&u(o(0,i=l.guide))},e&&"$$inject"in e&&a.$inject_state(e.$$inject),a.$$.update=()=>{a.$$.dirty&32&&o(6,{guideId:n}=x,n),a.$$.dirty&64&&u(o(0,i=ne({query:ue,client:_,variables:{guide:n}})))},[i,t,h,f,g,x,n,R]}class De extends ke{constructor(e){super(e),xe(this,e,Be,Q,ye,{data:5}),D("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Q.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{De as component,qe as universal};
//# sourceMappingURL=13.8wpvkHkF.js.map
