import{S as Se,i as Ee,d as O,s as ke,Z as we,a8 as Ce,v as Pe,a4 as ne,_ as re,a5 as oe,a6 as ie,a7 as Ve,G as K,b as B,e as x,H as Ue,I as Q,j as g,k as j,g as b,J as T,h as V,K as d,m as y,L as Z,n as D,M as p,t as L,q as Ie,r as _,Q as W,u as H,x as Ne,p as Be,N as le,O as je,a9 as De,R as Me,a0 as de,a1 as ge,a3 as $e}from"../chunks/vendor.BiWIQeBY.js";import{U as ce}from"../chunks/graphql.JkthYSgF.js";import{o as Re,a as Ae,b as Oe,s as Te,c as ue,v as fe,r as me,V as X,z as Le}from"../chunks/forms.Bye1fNxe.js";import{t as pe}from"../chunks/forms.D9kyTKNP.js";import{u as J}from"../chunks/user.B4NHL-m8.js";import{M as he}from"../chunks/MetaDescriptors.0SqSwX-d.js";const{console:_e}=Ve,S="src/routes/settings/+page.svelte";function ve(l){let e,s,a,i,o="Avatar:",r,n,$,c,C,h,u,m,M="Username",k,t,v,f,R,A,U,ee="Save",z,G,te;c=new X({props:{for:"avatar",$$slots:{default:[be,({messages:w})=>({8:w}),({messages:w})=>w?256:0]},$$scope:{ctx:l}},$$inline:!0}),f=new X({props:{for:"username",$$slots:{default:[ye,({messages:w})=>({8:w}),({messages:w})=>w?256:0]},$$scope:{ctx:l}},$$inline:!0});const ae={c:function(){e=x("form"),s=x("div"),a=x("div"),i=x("label"),i.textContent=o,r=B(),n=x("input"),$=B(),K(c.$$.fragment),C=B(),h=x("div"),u=x("label"),m=x("span"),m.textContent=M,k=B(),t=x("input"),v=B(),K(f.$$.fragment),R=B(),A=x("div"),U=x("button"),U.textContent=ee,this.h()},l:function(E){e=b(E,"FORM",{});var P=V(e);s=b(P,"DIV",{class:!0});var I=V(s);a=b(I,"DIV",{class:!0});var N=V(a);i=b(N,"LABEL",{for:!0,"data-svelte-h":!0}),T(i)!=="svelte-1a2u3bg"&&(i.textContent=o),r=j(N),n=b(N,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),$=j(N),Q(c.$$.fragment,N),N.forEach(g),C=j(I),h=b(I,"DIV",{class:!0});var q=V(h);u=b(q,"LABEL",{class:!0});var F=V(u);m=b(F,"SPAN",{"data-svelte-h":!0}),T(m)!=="svelte-9difb2"&&(m.textContent=M),k=j(F),t=b(F,"INPUT",{type:!0,class:!0}),F.forEach(g),v=j(q),Q(f.$$.fragment,q),q.forEach(g),R=j(I),A=b(I,"DIV",{});var se=V(A);U=b(se,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),T(U)!=="svelte-13mhoq1"&&(U.textContent=ee),se.forEach(g),I.forEach(g),P.forEach(g),this.h()},h:function(){d(i,"for","avatar"),y(i,S,83,12,2729),d(n,"id","avatar"),d(n,"class","base-input"),d(n,"name","avatar"),d(n,"type","file"),d(n,"accept","image/png,image/jpeg,image/gif"),d(n,"placeholder","Avatar"),y(n,S,84,12,2777),d(a,"class","grid grid-flow-row gap-2"),y(a,S,82,10,2678),y(m,S,98,14,3275),d(t,"type","text"),t.required=!0,d(t,"class","input p-2"),y(t,S,99,14,3311),d(u,"class","label"),y(u,S,97,12,3239),d(h,"class","grid grid-flow-row gap-2"),y(h,S,96,10,3188),d(U,"class","variant-ghost-primary btn"),d(U,"type","submit"),y(U,S,107,12,3628),y(A,S,106,10,3610),d(s,"class","grid grid-flow-row gap-6"),y(s,S,81,8,2629),y(e,S,80,6,2605)},m:function(E,P){D(E,e,P),p(e,s),p(s,a),p(a,i),p(a,r),p(a,n),p(a,$),Z(c,a,null),p(s,C),p(s,h),p(h,u),p(u,m),p(u,k),p(u,t),le(t,l[3].username),p(h,v),Z(f,h,null),p(s,R),p(s,A),p(A,U),z=!0,G||(te=[je(t,"input",l[5]),De(l[2].call(null,e))],G=!0)},p:function(E,P){const I={};P&768&&(I.$$scope={dirty:P,ctx:E}),c.$set(I),P&8&&t.value!==E[3].username&&le(t,E[3].username);const N={};P&768&&(N.$$scope={dirty:P,ctx:E}),f.$set(N)},i:function(E){z||(_(c.$$.fragment,E),_(f.$$.fragment,E),z=!0)},o:function(E){L(c.$$.fragment,E),L(f.$$.fragment,E),z=!1},d:function(E){E&&g(e),W(c),W(f),G=!1,Me(te)}};return O("SvelteRegisterBlock",{block:ae,id:ve.name,type:"else",source:"(72:4) {:else}",ctx:l}),ae}function xe(l){let e,s="Please log in";const a={c:function(){e=x("p"),e.textContent=s,this.h()},l:function(o){e=b(o,"P",{"data-svelte-h":!0}),T(e)!=="svelte-1njyisr"&&(e.textContent=s),this.h()},h:function(){y(e,S,78,6,2566)},m:function(o,r){D(o,e,r)},p:H,i:H,o:H,d:function(o){o&&g(e)}};return O("SvelteRegisterBlock",{block:a,id:xe.name,type:"if",source:"(70:4) {#if $user === null}",ctx:l}),a}function be(l){let e,s=(l[8]||"")+"",a;const i={c:function(){e=x("span"),a=de(s),this.h()},l:function(r){e=b(r,"SPAN",{class:!0});var n=V(e);a=ge(n,s),n.forEach(g),this.h()},h:function(){d(e,"class","validation-message"),y(e,S,92,14,3071)},m:function(r,n){D(r,e,n),p(e,a)},p:function(r,n){n&256&&s!==(s=(r[8]||"")+"")&&$e(a,s)},d:function(r){r&&g(e)}};return O("SvelteRegisterBlock",{block:i,id:be.name,type:"slot",source:'(84:12) <ValidationMessage for=\\"avatar\\" let:messages={message}>',ctx:l}),i}function ye(l){let e,s=(l[8]||"")+"",a;const i={c:function(){e=x("span"),a=de(s),this.h()},l:function(r){e=b(r,"SPAN",{class:!0});var n=V(e);a=ge(n,s),n.forEach(g),this.h()},h:function(){d(e,"class","validation-message"),y(e,S,102,14,3493)},m:function(r,n){D(r,e,n),p(e,a)},p:function(r,n){n&256&&s!==(s=(r[8]||"")+"")&&$e(a,s)},d:function(r){r&&g(e)}};return O("SvelteRegisterBlock",{block:i,id:ye.name,type:"slot",source:'(94:12) <ValidationMessage for=\\"username\\" let:messages={message}>',ctx:l}),i}function Y(l){let e,s,a,i="Settings",o,r,n,$,c,C;e=new he({props:{description:"Change your user settings",title:"Settings"},$$inline:!0});const h=[xe,ve],u=[];function m(k,t){return k[1]===null?0:1}$=m(l),c=u[$]=h[$](l);const M={c:function(){K(e.$$.fragment),s=B(),a=x("h1"),a.textContent=i,o=B(),r=x("div"),n=x("section"),c.c(),this.h()},l:function(t){const v=Ue("svelte-1ae5i2c",document.head);Q(e.$$.fragment,v),v.forEach(g),s=j(t),a=b(t,"H1",{class:!0,"data-svelte-h":!0}),T(a)!=="svelte-1pzybri"&&(a.textContent=i),o=j(t),r=b(t,"DIV",{class:!0});var f=V(r);n=b(f,"SECTION",{});var R=V(n);c.l(R),R.forEach(g),f.forEach(g),this.h()},h:function(){d(a,"class","my-4 text-4xl font-bold"),y(a,S,73,0,2449),y(n,S,76,2,2525),d(r,"class","card p-4"),y(r,S,75,0,2500)},m:function(t,v){Z(e,document.head,null),D(t,s,v),D(t,a,v),D(t,o,v),D(t,r,v),p(r,n),u[$].m(n,null),C=!0},p:function(t,[v]){let f=$;$=m(t),$===f?u[$].p(t,v):(Be(),L(u[f],1,1,()=>{u[f]=null}),Ie(),c=u[$],c?c.p(t,v):(c=u[$]=h[$](t),c.c()),_(c,1),c.m(n,null))},i:function(t){C||(_(e.$$.fragment,t),_(c),C=!0)},o:function(t){L(e.$$.fragment,t),L(c),C=!1},d:function(t){t&&(g(s),g(a),g(o),g(r)),W(e),u[$].d()}};return O("SvelteRegisterBlock",{block:M,id:Y.name,type:"component",source:"",ctx:l}),M}function ze(l,e,s){let a,i,o=H,r=()=>(o(),o=Ne(m,t=>s(3,i=t)),m);we(J,"user"),Ce(l,J,t=>s(1,a=t)),l.$$.on_destroy.push(()=>o());let{$$slots:n={},$$scope:$}=e;Pe("Page",n,[]);const c=ne(),C=re(),h=Re({avatar:Ae(Oe().refine(t=>"name"in t&&"size"in t&&"type"in t)),username:Te().min(3).max(32)});let u,m;const M=[];Object.keys(e).forEach(t=>{!~M.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&_e.warn(`<Page> was created with unknown prop '${t}'`)});function k(){i.username=this.value,m.set(i)}return l.$capture_state=()=>({getContextClient:re,UpdateUserDocument:ce,goto:oe,createForm:ue,validator:fe,reporter:me,ValidationMessage:X,trimNonSchema:pe,user:J,zod:Le,base:ie,MetaDescriptors:he,getToastStore:ne,toastStore:c,client:C,userSchema:h,form:u,data:m,$user:a,$data:i}),l.$inject_state=t=>{"form"in t&&s(2,u=t.form),"data"in t&&r(s(0,m=t.data))},e&&"$$inject"in e&&l.$inject_state(e.$$inject),l.$$.update=()=>{if(l.$$.dirty&3&&a&&!m){const t=ue({initialValues:{username:a.username},extend:[fe({schema:h}),me],onSubmit:v=>{console.log("submitted",v),C.mutation(ce,{user:pe(v,h),userId:a.id}).toPromise().then(f=>{f.error?(console.error(f.error.message),c.trigger({message:"Error editing user: "+f.error.message,background:"variant-filled-error",autohide:!1})):(c.trigger({message:"User updated",background:"variant-filled-success",timeout:5e3}),oe(ie+"/user/"+f.data.updateUser.id))})}});s(2,u=t.form),r(s(0,m=t.data))}},[m,a,u,i,h,k]}class Qe extends Se{constructor(e){super(e),Ee(this,e,ze,Y,ke,{userSchema:4}),O("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Y.name})}get userSchema(){return this.$$.ctx[4]}set userSchema(e){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Qe as component};
//# sourceMappingURL=26.DVoMqbWe.js.map
