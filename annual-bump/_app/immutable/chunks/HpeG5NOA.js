import{a as ke,p as De,f as Ve,m as a,az as D,a5 as p,g as u,h as l,O as E,a6 as d,k as x,L as Q,R as V,_ as U,a0 as Y,q as s,u as g,aA as qe,D as C,ab as je,r as Le,F as m,y as f,W as He,X as Ke,as as Qe,b as we,J as K,N as Ue,n as Pe,t as Ye,ar as Ze,aq as et,C as Ie,aB as tt,aC as $,a9 as de,T as pe,G as ye,z as at,ad as Ae,av as ge,A as ot}from"./aDZdp7_x.js";import{g as nt}from"./Bj1PSOzY.js";o[m]="src/lib/components/utils/TagDisplay.svelte";var rt=u(f('<span class="text-orange-500">#</span> <span class="text-neutral-300 lowercase"> </span>',1),o[m],[[21,4],[22,4]]),st=u(f(" <!>",1),o[m],[]),lt=u(f("<!> <!>",1),o[m],[]);function o(Z,_){ke(new.target),De(_,!0,o);var F={...Ve()};return a(()=>D(Z,{children:p(o,(ee,te)=>{var G=lt(),w=l(G);{let P=E(()=>_.selected?"selected-tag":"");a(()=>d(w,()=>D.Trigger,(n,I)=>{I(n,{get class(){return g(P)},onclick:b=>{b.preventDefault(),_.onclick?.()},children:p(o,(b,N)=>{var y=rt(),A=x(l(y),2),O=Q(A,!0);V(A),U(()=>Y(O,_.tag.name)),s(b,y)}),$$slots:{default:!0}})}),"component",o,15,2,{componentTag:"Tooltip.Trigger"})}var ae=x(w,2);a(()=>qe(ae,{children:p(o,(P,n)=>{var I=C(),b=l(I);a(()=>d(b,()=>D.Positioner,(N,y)=>{y(N,{children:p(o,(A,O)=>{var q=C(),oe=l(q);a(()=>d(oe,()=>D.Content,(B,ne)=>{ne(B,{class:"max-w-md card preset-filled-surface-100-900 bg-surface-100-900 p-2 shadow-xl",children:p(o,(L,me)=>{je();var J=st(),M=l(J),re=x(M);a(()=>d(re,()=>D.Arrow,(t,r)=>{r(t,{style:"--arrow-size: calc(var(--spacing) * 2); --arrow-background: var(--color-surface-100-900);",children:p(o,(i,R)=>{var T=C(),h=l(T);a(()=>d(h,()=>D.ArrowTip,(v,c)=>{c(v,{})}),"component",o,30,10,{componentTag:"Tooltip.ArrowTip"}),s(i,T)}),$$slots:{default:!0}})}),"component",o,28,8,{componentTag:"Tooltip.Arrow"}),U(()=>Y(M,`${_.tag.description??""} `)),s(L,J)}),$$slots:{default:!0}})}),"component",o,26,6,{componentTag:"Tooltip.Content"}),s(A,q)}),$$slots:{default:!0}})}),"component",o,25,4,{componentTag:"Tooltip.Positioner"}),s(P,I)}),$$slots:{default:!0}}),"component",o,24,2,{componentTag:"Portal"}),s(ee,G)}),$$slots:{default:!0}}),"component",o,14,0,{componentTag:"Tooltip"}),Le(F)}e[m]="src/lib/components/utils/TagList.svelte";var it=u(f('<div class="text-md flex flex-row flex-wrap gap-1"></div>'),e[m],[[87,6]]),ct=u(f("<!> <!>",1),e[m],[]),dt=u(f('<span class="text-orange-500">#</span> ',1),e[m],[[121,20]]),pt=u(f("<!> <!>",1),e[m],[]),gt=u(f("<!> <!>",1),e[m],[]),mt=u(f('<div class="mb-2"> </div> <div class="max-h-48 w-full max-w-full overflow-y-auto card preset-filled-surface-100-900" tabindex="-1" data-popup="popupAutocomplete"><!> <div class="text-md flex flex-row flex-wrap gap-1"></div></div>',1),e[m],[[94,4],[96,4,[[131,6]]]]),vt=u(f('<div class="tags"><!></div>'),e[m],[[84,0]]);function e(Z,_){ke(new.target),De(_,!0,e);const F=()=>(ye(P,"getAllTags"),Ie(P,"$getAllTags",te)),ee=()=>(ye(w,"t"),Ie(w,"$t",te)),[te,G]=Ye(),{t:w}=He(),ae=Ke(),P=Qe({query:nt,client:ae,variables:{limit:100}});let n=we(_,"tags",31,()=>Ze(et([]),"tags")),I=we(_,"editable",3,!1),b=K(E(()=>F().data?.getTags?.map(t=>({label:`${t.name} - ${t.description}`,value:t.id,name:t.name}))||[]),"allTags");const N=t=>{const r=F().data?.getTags?.find(i=>ge(i.id,t));n([...n(),{id:t,name:r?.name,description:r?.description}])},y=t=>{const r=n().findIndex(i=>ot(i.id,t));n([...n().slice(0,r),...n().slice(r+1)])},A=K(E(()=>tt({items:g(b),itemToString:t=>t.label,itemToValue:t=>t.value})),"collection"),O=t=>{console.log(...Ae("log",t));const r=t.itemValue;console.log(...Ae("log",n(),r,n().findIndex(i=>ge(i.id,r)))),n().findIndex(i=>ge(i.id,r))<0?N(r):y(r)};let q=K(Ue(""),"inputValue");const oe=t=>{at(q,t.inputValue,!0)};let B=K(E(()=>g(b).filter(t=>t.label.toLowerCase().includes(g(q)))),"filteredTags");var ne={get t(){return w},...Ve()},L=vt(),me=Q(L);{var J=t=>{var r=C(),i=l(r);{var R=T=>{var h=it();de(n,v=>v.id),a(()=>pe(h,21,n,v=>v.id,(v,c)=>{a(()=>o(v,{get tag(){return g(c)}}),"component",e,89,10,{componentTag:"TagDisplay"})}),"each",e,88,8),V(h),s(T,h)};a(()=>Pe(i,T=>{n()&&n().length>0&&T(R)}),"if",e,86,4)}s(t,r)},M=t=>{var r=mt(),i=l(r),R=Q(i,!0);V(i);var T=x(i,2),h=Q(T);{let c=E(()=>n().map(z=>z.id));a(()=>$(h,{class:"w-full",placeholder:"Search...",get collection(){return g(A)},onSelect:O,onInputValueChange:oe,get value(){return g(c)},openOnClick:!0,multiple:!0,allowCustomValue:!1,positioning:{placement:"top-end"},children:p(e,(z,ut)=>{var ve=gt(),ue=l(ve);a(()=>d(ue,()=>$.Control,(se,fe)=>{fe(se,{children:p(e,(W,_e)=>{var X=ct(),j=l(X);a(()=>d(j,()=>$.Input,(H,k)=>{k(H,{})}),"component",e,112,10,{componentTag:"Combobox.Input"});var le=x(j,2);a(()=>d(le,()=>$.Trigger,(H,k)=>{k(H,{})}),"component",e,113,10,{componentTag:"Combobox.Trigger"}),s(W,X)}),$$slots:{default:!0}})}),"component",e,111,8,{componentTag:"Combobox.Control"});var ze=x(ue,2);a(()=>qe(ze,{children:p(e,(se,fe)=>{var W=C(),_e=l(W);a(()=>d(_e,()=>$.Positioner,(X,j)=>{j(X,{class:"z-[1]!",children:p(e,(le,H)=>{var k=C(),Se=l(k);a(()=>d(Se,()=>$.Content,(Ee,Fe)=>{Fe(Ee,{class:"max-h-[30vh] overflow-auto",children:p(e,(Ge,ft)=>{var Te=C(),Ne=l(Te);de(()=>g(B),S=>S.value),a(()=>pe(Ne,17,()=>g(B),S=>S.value,(S,$e)=>{var xe=C(),Oe=l(xe);a(()=>d(Oe,()=>$.Item,(Be,Je)=>{Je(Be,{get item(){return g($e)},children:p(e,(Me,_t)=>{var be=pt(),he=l(be);a(()=>d(he,()=>$.ItemText,(ie,ce)=>{ce(ie,{children:p(e,(We,Tt)=>{var Ce=dt(),Xe=x(l(Ce),1,!0);U(()=>Y(Xe,g($e).label)),s(We,Ce)}),$$slots:{default:!0}})}),"component",e,120,18,{componentTag:"Combobox.ItemText"});var Re=x(he,2);a(()=>d(Re,()=>$.ItemIndicator,(ie,ce)=>{ce(ie,{})}),"component",e,123,18,{componentTag:"Combobox.ItemIndicator"}),s(Me,be)}),$$slots:{default:!0}})}),"component",e,119,16,{componentTag:"Combobox.Item"}),s(S,xe)}),"each",e,118,14),s(Ge,Te)}),$$slots:{default:!0}})}),"component",e,117,12,{componentTag:"Combobox.Content"}),s(le,k)}),$$slots:{default:!0}})}),"component",e,116,10,{componentTag:"Combobox.Positioner"}),s(se,W)}),$$slots:{default:!0}}),"component",e,115,8,{componentTag:"Portal"}),s(z,ve)}),$$slots:{default:!0}}),"component",e,100,6,{componentTag:"Combobox"})}var v=x(h,2);de(n,c=>c.id),a(()=>pe(v,21,n,c=>c.id,(c,z)=>{a(()=>o(c,{get tag(){return g(z)}}),"component",e,133,10,{componentTag:"TagDisplay"})}),"each",e,132,8),V(v),V(T),U(c=>Y(R,c),[()=>ee()("mod.tags.title")]),s(t,r)};a(()=>Pe(me,t=>{I()?t(M,!1):t(J)}),"if",e,85,2)}V(L),s(Z,L);var re=Le(ne);return G(),re}export{e as T,o as a};
//# sourceMappingURL=HpeG5NOA.js.map
