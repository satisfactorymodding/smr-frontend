{"version":3,"file":"Buq46Psw.js","sources":["../../../../../../src/lib/stores/launcher.ts"],"sourcesContent":["import { get, writable } from 'svelte/store';\nimport { browser } from '$app/environment';\nimport { io } from 'socket.io-client';\n\nexport const customProtocolCheck = writable<unknown | null>(null);\nexport const hasLauncher = writable<boolean>(false);\nexport const launcherOpen = writable<boolean>(false);\n\nconst connectToLauncher = () => {\n  new Promise(() => {\n    const ws = io('http://localhost:33642', {\n      transports: ['websocket']\n    });\n\n    ws.on('connect', () => {\n      hasLauncher.set(true);\n      launcherOpen.set(true);\n    });\n\n    ws.on('disconnect', () => {\n      launcherOpen.set(false);\n    });\n  }).catch(console.error);\n};\n\nconst open = (link: string, fallback?: () => void) => {\n  if (browser) {\n    new Promise(() => {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      get(customProtocolCheck).protocolCheck(link, () => {\n        hasLauncher.set(false);\n        if (fallback) {\n          fallback();\n        }\n      });\n    }).catch(console.error);\n  }\n};\n\nconst modLoaderLink = 'https://smm.ficsit.app/';\n\nexport const pingLauncher = () => {\n  open('smmanager://ping', () => {\n    window.open(modLoaderLink, '_blank');\n  });\n};\n\nexport const installMod = (modReference: string) => {\n  open('smmanager://install?modID=' + modReference, () => {\n    window.open(modLoaderLink, '_blank');\n  });\n};\n\nif (browser) {\n  connectToLauncher();\n}\n"],"names":["customProtocolCheck","writable","hasLauncher","launcherOpen","connectToLauncher","ws","io","open","link","fallback","get","modLoaderLink","pingLauncher","installMod","modReference"],"mappings":"kDAIO,MAAMA,EAAsBC,EAAyB,IAAI,EACnDC,EAAcD,EAAkB,EAAK,EACrCE,EAAeF,EAAkB,EAAK,EAE7CG,EAAoB,IAAM,CAC9B,IAAI,QAAQ,IAAM,CAChB,MAAMC,EAAKC,EAAG,yBAA0B,CACtC,WAAY,CAAC,WAAW,CAAA,CACzB,EAEDD,EAAG,GAAG,UAAW,IAAM,CACrBH,EAAY,IAAI,EAAI,EACpBC,EAAa,IAAI,EAAI,CACvB,CAAC,EAEDE,EAAG,GAAG,aAAc,IAAM,CACxBF,EAAa,IAAI,EAAK,CACxB,CAAC,CACH,CAAC,EAAE,MAAM,QAAQ,KAAK,CACxB,EAEMI,EAAO,CAACC,EAAcC,IAA0B,CAElD,IAAI,QAAQ,IAAM,CAGhBC,EAAIV,CAAmB,EAAE,cAAcQ,EAAM,IAAM,CACjDN,EAAY,IAAI,EAAK,EACjBO,GACFA,EAAA,CAEJ,CAAC,CACH,CAAC,EAAE,MAAM,QAAQ,KAAK,CAE1B,EAEME,EAAgB,0BAETC,EAAe,IAAM,CAChCL,EAAK,mBAAoB,IAAM,CAC7B,OAAO,KAAKI,EAAe,QAAQ,CACrC,CAAC,CACH,EAEaE,EAAcC,GAAyB,CAClDP,EAAK,6BAA+BO,EAAc,IAAM,CACtD,OAAO,KAAKH,EAAe,QAAQ,CACrC,CAAC,CACH,EAGEP,EAAA"}