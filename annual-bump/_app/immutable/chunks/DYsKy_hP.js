import{a as _e,p as ge,W as fe,X as Ne,J as wa,O as be,as as We,f as he,D as ba,h as X,m as l,n as j,C as ya,q as v,r as $e,t as xe,G as Ta,u as S,g,L as e,R as t,_ as h,a0 as u,F as m,y as f,k as o,aH as Xe,ak as je,I as Ge,b as Ya,N as le,aq as Je,at as ae,a5 as w,ap as Oe,P as Ze,z as de,aO as V,ai as T,x as p,ah as Qe,M as ca,Q as Re,a6 as W,ab as ve,ac as ce,ag as ga,a8 as Y,S as Be,T as Ke,U as Ye,A as pe}from"./CVeMU510.js";import{o as fa,a as aa,e as at,s as k,l as et,b as tt,c as rt,V as ea,v as st,r as ot}from"./Dw_6YRib.js";import{t as nt}from"./WpgWb4aa.js";import{m as it}from"./CkAV2acv.js";import{J as lt,x as ue}from"./Bj1PSOzY.js";import{T as dt}from"./CqjskO25.js";import{M as vt}from"./CJTGZGlF.js";const me=fa({name:k().min(3).max(32),mod_reference:k().min(3).max(32).regex(/^([a-zA-Z][a-zA-Z0-9_]*)$/).refine(async()=>!0),short_description:k().min(16).max(128),full_description:aa(k()),logo:aa(tt().refine(G=>"name"in G&&"size"in G&&"type"in G)),source_url:k().url().optional().or(et("")),authors:aa(fa({role:k(),user_id:k()}).array()),compatibility:aa(fa({EA:fa({state:k(),note:aa(k())}),EXP:fa({state:k(),note:aa(k())})})),hidden:at(),tagIDs:aa(k().array())});q[m]="src/lib/components/mods/ModAuthor.svelte";var ct=g(f('<p class="mr-2"> </p>'),q[m],[[27,2]]),pt=g(f('<p class="mr-2"> </p>'),q[m],[[29,2]]),ut=g(f('<div class="mr-2 grid auto-cols-max grid-flow-col gap-x-2"><div class="h-7 w-7 rounded-full bg-cover"></div> <div class="grid grid-flow-row"><span class="text-yellow-500"> </span></div></div>'),q[m],[[31,2,[[32,4],[36,4,[[37,6]]]]]]),mt=g(f('<p class="mr-2 whitespace-nowrap">Unknown User ID</p>'),q[m],[[41,2]]);function q(G,F){_e(new.target),ge(F,!0,q);const _=()=>(Ta(S(ha),"user"),ya(S(ha),"$user",pa)),s=()=>(Ta(J,"t"),ya(J,"$t",pa)),[pa,ka]=xe(),{t:J}=fe(),Ma=Ne();let ha=wa(be(()=>We({query:lt,client:Ma,variables:{user:F.id}})),"user");var ta={get t(){return J},...he()},$a=ba(),$=X($a);{var ra=H=>{var z=ct(),O=e(z);t(z),h(ua=>u(O,`${ua??""}...`),[()=>s()("loading")]),v(H,z)},Sa=H=>{var z=ba(),O=X(z);{var ua=A=>{var C=pt(),Z=e(C);t(C),h(Q=>u(Z,`${Q??""}... ${_().error.message??""}`),[()=>s()("error.oh-no")]),v(A,C)},sa=A=>{var C=ba(),Z=X(C);{var Q=L=>{var R=ut(),oa=e(R),na=o(oa,2),ia=e(na),Va=e(ia,!0);t(ia),t(na),t(R),h(()=>{Xe(oa,`background-image: url("${_().data.getUser.avatar||je+"/images/no_image.webp"}")`),u(Va,_().data.getUser.username)}),v(L,R)},Ia=L=>{var R=mt();v(L,R)};l(()=>j(Z,L=>{_().data.getUser?L(Q):L(Ia,!1)},!0),"if",q,30,0)}v(A,C)};l(()=>j(O,A=>{_().error?A(ua):A(sa,!1)},!0),"if",q,28,0)}v(H,z)};l(()=>j($,H=>{_().fetching?H(ra):H(Sa,!1)}),"if",q,26,0)}v(G,$a);var Ca=$e(ta);return ka(),Ca}a[m]="src/lib/components/mods/ModForm.svelte";var _t=g(f('<span class="validation-message"> </span>'),a[m],[[104,10]]),gt=g(f("<span> </span>"),a[m],[[114,10]]),ft=g(f('<span class="validation-message"> </span>'),a[m],[[119,10]]),bt=g(f('<span class="validation-message"> </span>'),a[m],[[131,10]]),ht=g(f('<span class="validation-message"> </span>'),a[m],[[145,12]]),$t=g(f('<div class="markdown-content right svelte-ce2kk8"><!></div>'),a[m],[[153,10]]),xt=g(f('<span class="validation-message"> </span>'),a[m],[[173,10]]),wt=g(f('<span class="validation-message"> </span>'),a[m],[[185,10]]),yt=g(f("<!> <!> <!>",1),a[m],[]),Tt=g(f('<span class="validation-message"> </span>'),a[m],[[200,10]]),kt=g(f("<!> <!> <!>",1),a[m],[]),Mt=g(f('<div class="p-2"><!></div>'),a[m],[[229,14]]),St=g(f('<button class="btn border border-primary-500 preset-tonal-primary" type="button"><span> </span></button>'),a[m],[[243,14,[[247,16]]]]),Ct=g(f('<div class="flex items-end"><!> <label class="label"><span>User ID</span> <input type="text" required class="input p-2"/></label> <!></div>'),a[m],[[227,10,[[233,12,[[234,14],[235,14]]]]]]),It=g(f('<div><!></div> <!> <div class="grid grid-flow-row gap-2"><div class="flex items-center"><h4 class="mr-4"> </h4> <button class="btn border border-primary-500 preset-tonal-primary" type="button"><span> </span></button></div> <!></div>',1),a[m],[[205,6],[219,6,[[220,8,[[221,10],[222,10,[[223,12]]]]]]]]),Vt=g(f('<form><div class="grid grid-flow-row gap-6"><div class="grid grid-flow-row gap-2"><label class="label"><span> </span> <input type="text" required class="input p-2"/></label> <!></div> <div class="grid grid-flow-row gap-2"><label class="label"><span> </span> <input type="text" required class="input p-2"/> <!></label> <!></div> <div class="grid grid-flow-row gap-2"><label class="label"><span> </span> <input type="text" required class="input p-2"/></label> <!></div> <div class="split grid gap-6 svelte-ce2kk8"><div class="grid grid-flow-row auto-rows-max gap-2"><label class="label"><span> </span> <textarea class="vertical-textarea textarea p-2" required></textarea></label> <!></div> <div class="grid grid-flow-row auto-rows-max gap-2"><span> </span> <!></div></div> <div class="grid grid-flow-row gap-2"><!></div> <div class="grid grid-flow-row gap-2"><label for="logo"> </label> <input id="logo" class="base-input" name="logo" type="file" accept="image/png,image/jpeg,image/gif" placeholder="Logo"/> <!></div> <div class="grid grid-flow-row gap-2"><label class="label"><span> </span> <input type="text" required class="input p-2"/></label> <!></div> <div class="grid grid-flow-row gap-2"><!> <!></div> <!> <div><button class="btn border border-primary-500 preset-tonal-primary" type="submit"> </button></div></div></form>'),a[m],[[95,0,[[96,2,[[97,4,[[98,6,[[99,8],[100,8]]]]],[109,4,[[110,6,[[111,8],[112,8]]]]],[124,4,[[125,6,[[126,8],[127,8]]]]],[136,4,[[137,6,[[138,8,[[139,10],[140,10]]]]],[149,6,[[150,8]]]]],[158,4],[162,4,[[163,6],[164,6]]],[178,4,[[179,6,[[180,8],[181,8]]]]],[190,4],[255,4,[[256,6]]]]]]]]);function a(G,F){_e(new.target),ge(F,!0,a);const _=()=>(Ta(J,"t"),ya(J,"$t",pa)),s=()=>(Ta($,"data"),ya($,"$data",pa)),[pa,ka]=xe(),{t:J}=fe();let Ma=Ya(F,"initialValues",19,()=>({full_description:"",mod_reference:"",name:"",short_description:"",source_url:"",hidden:!1,tagIDs:[],compatibility:{EA:{state:ue.Works,note:""},EXP:{state:ue.Works,note:""}}})),ha=Ya(F,"submitText",19,()=>_()("entry.create")),ta=Ya(F,"editing",3,!1);const{form:$a,data:$}=rt({initialValues:Ma(),extend:[st({schema:me}),ot],onSubmit:r=>F.onSubmit(nt(r,me))});let ra=wa(le(Je(s().tags)),"tags");const Sa=()=>{T($,p(s).tagIDs=S(ra).map(r=>r.id),p(s))};ae(()=>{S(ra)&&Sa()}),ae(()=>{ta()||delete s().compatibility});let Ca=wa(be(()=>s().full_description||""),"preview");const H=()=>{s().authors.push({role:"editor",user_id:"",key:""}),T($,p(s).authors=s().authors,p(s))},z=r=>{s().authors.splice(r,1),T($,p(s).authors=s().authors,p(s))};let O=wa(le(!1),"editCompatibility");ae(()=>{T($,p(s).compatibility=s().compatibility?s().compatibility:void 0,p(s))});var ua={get t(){return J},...he()},sa=Vt(),A=e(sa),C=e(A),Z=e(C),Q=e(Z),Ia=e(Q);t(Q);var L=o(Q,2);ga(L),t(Z);var R=o(Z,2);{const r=w(a,function(c,d){Y(...arguments);let i=()=>d?.().messages;i();var n=_t(),b=e(n,!0);t(n),h(()=>u(b,i()||"")),v(c,n)});l(()=>ea(R,{for:"name",children:r,$$slots:{default:!0}}),"component",a,102,6,{componentTag:"ValidationMessage"})}t(C);var oa=o(C,2),na=e(oa),ia=e(na),Va=e(ia);t(ia);var xa=o(ia,2);ga(xa);var we=o(xa,2);{var ye=r=>{var c=gt(),d=e(c,!0);t(c),h(i=>u(d,i),[()=>_()("mod.reference-warning")]),v(r,c)};l(()=>j(we,r=>{ta()||r(ye)}),"if",a,113,8)}t(na);var Te=o(na,2);{const r=w(a,function(c,d){Y(...arguments);let i=()=>d?.().messages;i();var n=ft(),b=e(n,!0);t(n),h(()=>u(b,i()||"")),v(c,n)});l(()=>ea(Te,{for:"mod_reference",children:r,$$slots:{default:!0}}),"component",a,117,6,{componentTag:"ValidationMessage"})}t(oa);var qa=o(oa,2),Aa=e(qa),La=e(Aa),ke=e(La);t(La);var ee=o(La,2);ga(ee),t(Aa);var Me=o(Aa,2);{const r=w(a,function(c,d){Y(...arguments);let i=()=>d?.().messages;i();var n=bt(),b=e(n,!0);t(n),h(()=>u(b,i()||"")),v(c,n)});l(()=>ea(Me,{for:"short_description",children:r,$$slots:{default:!0}}),"component",a,129,6,{componentTag:"ValidationMessage"})}t(qa);var Pa=o(qa,2),Ua=e(Pa),Da=e(Ua),Ea=e(Da),Se=e(Ea);t(Ea);var Fa=o(Ea,2);Be(Fa),Oe(Fa,"rows",10),t(Da);var Ce=o(Da,2);{const r=w(a,function(c,d){Y(...arguments);let i=()=>d?.().messages;i();var n=ht(),b=e(n,!0);t(n),h(()=>u(b,i()||"")),v(c,n)});l(()=>ea(Ce,{for:"full_description",children:r,$$slots:{default:!0}}),"component",a,143,8,{componentTag:"ValidationMessage"})}t(Ua);var te=o(Ua,2),Ha=e(te),Ie=e(Ha);t(Ha);var Ve=o(Ha,2);l(()=>Ze(Ve,()=>it(S(Ca)),null,(r,c)=>{var d=$t(),i=e(d);Re(i,()=>S(c)),t(d),v(r,d)}),"await",a,151,8),t(te),t(Pa);var za=o(Pa,2),qe=e(za);l(()=>dt(qe,{editable:!0,get tags(){return S(ra)},set tags(r){de(ra,r,!0)}}),"component",a,159,6,{componentTag:"TagList"}),t(za);var Na=o(za,2),Wa=e(Na),Ae=e(Wa);t(Wa);var Le=o(Wa,4);{const r=w(a,function(c,d){Y(...arguments);let i=()=>d?.().messages;i();var n=xt(),b=e(n,!0);t(n),h(()=>u(b,i()||"")),v(c,n)});l(()=>ea(Le,{for:"logo",children:r,$$slots:{default:!0}}),"component",a,171,6,{componentTag:"ValidationMessage"})}t(Na);var Xa=o(Na,2),ja=e(Xa),Ga=e(ja),Pe=e(Ga,!0);t(Ga);var re=o(Ga,2);ga(re),t(ja);var Ue=o(ja,2);{const r=w(a,function(c,d){Y(...arguments);let i=()=>d?.().messages;i();var n=wt(),b=e(n,!0);t(n),h(()=>u(b,i()||"")),v(c,n)});l(()=>ea(Ue,{for:"source_url",children:r,$$slots:{default:!0}}),"component",a,183,6,{componentTag:"ValidationMessage"})}t(Xa);var Ja=o(Xa,2),se=e(Ja);l(()=>V(se,{get checked(){return s().hidden},onCheckedChange:r=>T($,p(s).hidden=r.checked,p(s)),children:w(a,(r,c)=>{var d=yt(),i=X(d);l(()=>W(i,()=>V.Control,(I,P)=>{P(I,{children:w(a,(B,Oa)=>{var U=ba(),la=X(U);l(()=>W(la,()=>V.Thumb,(Za,Qa)=>{Qa(Za,{})}),"component",a,193,10,{componentTag:"Switch.Thumb"}),v(B,U)}),$$slots:{default:!0}})}),"component",a,192,8,{componentTag:"Switch.Control"});var n=o(i,2);l(()=>W(n,()=>V.Label,(I,P)=>{P(I,{children:w(a,(B,Oa)=>{ve();var U=ce();h(la=>u(U,la),[()=>_()("entry.hidden")]),v(B,U)}),$$slots:{default:!0}})}),"component",a,195,8,{componentTag:"Switch.Label"});var b=o(n,2);l(()=>W(b,()=>V.HiddenInput,(I,P)=>{P(I,{})}),"component",a,196,8,{componentTag:"Switch.HiddenInput"}),v(r,d)}),$$slots:{default:!0}}),"component",a,191,6,{componentTag:"Switch"});var De=o(se,2);{const r=w(a,function(c,d){Y(...arguments);let i=()=>d?.().messages;i();var n=Tt(),b=e(n,!0);t(n),h(()=>u(b,i()||"")),v(c,n)});l(()=>ea(De,{for:"hidden",children:r,$$slots:{default:!0}}),"component",a,198,6,{componentTag:"ValidationMessage"})}t(Ja);var oe=o(Ja,2);{var Ee=r=>{var c=It(),d=X(c),i=e(d);l(()=>V(i,{get checked(){return S(O)},onCheckedChange:M=>de(O,M.checked,!0),children:w(a,(M,K)=>{var N=kt(),da=X(N);l(()=>W(da,()=>V.Control,(D,E)=>{E(D,{children:w(a,(_a,Ba)=>{var x=ba(),y=X(x);l(()=>W(y,()=>V.Thumb,(va,Ka)=>{Ka(va,{})}),"component",a,208,12,{componentTag:"Switch.Thumb"}),v(_a,x)}),$$slots:{default:!0}})}),"component",a,207,10,{componentTag:"Switch.Control"});var ma=o(da,2);l(()=>W(ma,()=>V.Label,(D,E)=>{E(D,{children:w(a,(_a,Ba)=>{ve();var x=ce();h(y=>u(x,y),[()=>_()("compatibility-info.edit")]),v(_a,x)}),$$slots:{default:!0}})}),"component",a,210,10,{componentTag:"Switch.Label"});var Ra=o(ma,2);l(()=>W(Ra,()=>V.HiddenInput,(D,E)=>{E(D,{})}),"component",a,211,10,{componentTag:"Switch.HiddenInput"}),v(M,N)}),$$slots:{default:!0}}),"component",a,206,8,{componentTag:"Switch"}),t(d);var n=o(d,2);{var b=M=>{l(()=>vt(M,{get compatibilityInfo(){return s().compatibility},set compatibilityInfo(K){T($,p(s).compatibility=K,p(s))}}),"component",a,216,8,{componentTag:"ModCompatibility"})};l(()=>j(n,M=>{S(O)&&M(b)}),"if",a,215,6)}var I=o(n,2),P=e(I),B=e(P),Oa=e(B,!0);t(B);var U=o(B,2);U.__click=H;var la=e(U),Za=e(la,!0);t(la),t(U),t(P);var Qa=o(P,2);l(()=>Ke(Qa,1,()=>s().authors,Ye,(M,K,N)=>{var da=Ct(),ma=e(da);{var Ra=x=>{var y=Mt(),va=e(y);l(()=>q(va,{get id(){return s().authors[N].user_id}}),"component",a,230,16,{componentTag:"ModAuthor"}),t(y),v(x,y)};l(()=>j(ma,x=>{s().authors[N].user_id&&x(Ra)}),"if",a,228,12)}var D=o(ma,2),E=o(e(D),2);ga(E),t(D);var _a=o(D,2);{var Ba=x=>{var y=St();y.__click=()=>z(N);var va=e(y),Ka=e(va,!0);t(va),t(y),h(ze=>u(Ka,ze),[()=>_()("remove")]),v(x,y)};l(()=>j(_a,x=>{pe(S(K).role,"creator",!1)&&x(Ba)}),"if",a,242,12)}t(da),h(()=>E.disabled=pe(S(K).role,"creator")),ca(E,()=>s().authors[N].user_id,x=>T($,p(s).authors[N].user_id=x,p(s))),v(M,da)}),"each",a,226,8),t(I),h((M,K)=>{u(Oa,M),u(Za,K)},[()=>_()("authors"),()=>_()("add")]),v(r,c)};l(()=>j(oe,r=>{ta()&&r(Ee)}),"if",a,204,4)}var ne=o(oe,2),ie=e(ne),Fe=e(ie,!0);t(ie),t(ne),t(A),t(sa),Qe(sa,r=>$a?.(r)),h((r,c,d,i,n,b,I)=>{u(Ia,`${r??""} *`),u(Va,`${c??""} *`),xa.disabled=ta(),u(ke,`${d??""} *`),u(Se,`${i??""} *`),u(Ie,`${n??""}:`),u(Ae,`${b??""}:`),u(Pe,I),u(Fe,ha())},[()=>_()("entry.name"),()=>_()("mod.reference"),()=>_()("entry.short-description"),()=>_()("entry.full-description"),()=>_()("preview"),()=>_()("logo"),()=>_()("entry.source-url")]),ca(L,()=>s().name,r=>T($,p(s).name=r,p(s))),ca(xa,()=>s().mod_reference,r=>T($,p(s).mod_reference=r,p(s))),ca(ee,()=>s().short_description,r=>T($,p(s).short_description=r,p(s))),ca(Fa,()=>s().full_description,r=>T($,p(s).full_description=r,p(s))),ca(re,()=>s().source_url,r=>T($,p(s).source_url=r,p(s))),v(G,sa);var He=$e(ua);return ka(),He}Ge(["click"]);export{a as M};
//# sourceMappingURL=DYsKy_hP.js.map
