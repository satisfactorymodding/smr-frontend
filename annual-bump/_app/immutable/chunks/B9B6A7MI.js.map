{"version":3,"file":"B9B6A7MI.js","sources":["../../../../../../src/lib/components/general/FicsitCard.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { assets } from '$app/paths';\n  import { goto, preloadData } from '$app/navigation';\n  import { thumbHashToDataURL } from 'thumbhash';\n  import { fade } from 'svelte/transition';\n\n  interface Props {\n    name?: string;\n    logo?: string;\n    description?: string;\n    link?: string;\n    fake?: boolean;\n    thumbhash?: string;\n    stats?: import('svelte').Snippet;\n    tags?: import('svelte').Snippet;\n    actions?: import('svelte').Snippet;\n    outer?: import('svelte').Snippet;\n  }\n\n  let {\n    name = '',\n    logo = assets + '/images/no_image.webp',\n    description = '',\n    link = '/',\n    fake = false,\n    thumbhash = '',\n    stats,\n    tags,\n    actions,\n    outer\n  }: Props = $props();\n\n  let renderedLogo = $derived(logo || assets + '/images/no_image.webp');\n  let renderedName = $derived(name || (fake && 'Card Name'));\n  let renderedDescription = $derived(description || (fake && 'Short card description'));\n  let renderedThumbhash = $derived(thumbhash || '2/eFDQIsFmh9h4BreKeAeQqYBxd3d3J4Jw');\n  let thumbHashData = $derived(\n    (() => {\n      try {\n        return thumbHashToDataURL(\n          new Uint8Array(\n            atob(renderedThumbhash)\n              .split('')\n              .map((x) => x.charCodeAt(0))\n          )\n        );\n      } catch (e) {\n        console.error(e);\n      }\n    })()\n  );\n\n  let preloaded = false;\n  let timeoutHandle: number;\n  const onOver = () => {\n    if (preloaded) {\n      return;\n    }\n\n    timeoutHandle = setTimeout(() => {\n      preloaded = true;\n      preloadData(link);\n    }, 250) as unknown as number;\n  };\n\n  const onOut = () => {\n    if (preloaded) {\n      return;\n    }\n\n    clearTimeout(timeoutHandle);\n  };\n\n  let actionButtons: HTMLElement = $state();\n\n  let imageLoaded = $state(false);\n  let thumbnailLoaded = $state(false);\n</script>\n\n<div\n  class=\"relative h-full overflow-hidden card preset-filled-surface-100-900\"\n  onmouseover={onOver}\n  onmouseout={onOut}\n  onfocus={onOver}\n  onblur={onOut}\n  role=\"none\">\n  <div\n    class:text-neutral-500={fake}\n    class:font-flow={fake}\n    class=\"grid-max-auto grid grid-cols-1 justify-items-center sm:grid-cols-2\">\n    <div class=\"card-image-container cursor-pointer\">\n      <a\n        href={link}\n        onkeypress={() => goto(link)}\n        tabindex=\"0\"\n        class=\"relative block max-h-full min-h-full max-w-full min-w-full\">\n        {#if fake}\n          <div class=\"logo max-h-full min-h-full max-w-full min-w-full bg-neutral-500\"></div>\n        {:else}\n          <img\n            class=\"logo absolute max-h-full min-h-full max-w-full min-w-full object-contain transition-opacity delay-100 duration-200 ease-linear\"\n            class:invisible={!imageLoaded}\n            class:opacity-0={!imageLoaded}\n            src={renderedLogo}\n            alt=\"{renderedName} Logo\"\n            onload={() => (imageLoaded = true)} />\n          {#if !imageLoaded && thumbHashData}\n            <img\n              class=\"logo absolute max-h-full min-h-full max-w-full min-w-full\"\n              class:invisible={!thumbnailLoaded}\n              src={thumbHashData}\n              alt=\"{renderedName} Logo\"\n              onload={() => (thumbnailLoaded = true)}\n              in:fade={{ duration: 200 }}\n              out:fade={{ duration: 200, delay: 100 }} />\n          {/if}\n        {/if}\n      </a>\n    </div>\n    <div class=\"relative flex w-full flex-col justify-between\">\n      <div class=\"flex flex-col px-3 py-2 pb-0\">\n        <div class=\"mb-1.5\">\n          <a href={link} class=\"text-white\">\n            <span class=\"text-xl break-words\">{renderedName}</span>\n          </a>\n\n          <h5 class=\"m-0 text-sm\">\n            {#if stats}{@render stats()}{:else if fake}\n              <span class=\"font-flow\">Card stats</span>\n            {/if}\n          </h5>\n\n          {@render tags?.()}\n        </div>\n\n        <div class:font-flow={fake} style=\"word-wrap: anywhere\">\n          {renderedDescription}\n\n          <div\n            class=\"float-right\"\n            style=\"width: {(actionButtons?.clientWidth || 0) - 8}px; height: {(actionButtons?.clientHeight || 0) -\n              8}px\">\n            <!-- Placeholder for action buttons -->\n          </div>\n        </div>\n      </div>\n\n      <div\n        class=\"absolute right-0 bottom-0 flex flex-row items-center gap-1 self-end px-2 py-2 text-lg\"\n        bind:this={actionButtons}>\n        {#if !fake}\n          <a\n            href={link}\n            class=\"btn preset-tonal-surface btn-sm\"\n            aria-label=\"View {renderedName}\"\n            title=\"View {renderedName}\">\n            <span class=\"material-icons\">info</span>\n          </a>\n          {@render actions?.()}\n        {/if}\n      </div>\n    </div>\n  </div>\n\n  {@render outer?.()}\n</div>\n\n<style lang=\"postcss\">\n  .logo {\n    border-top-left-radius: 4px;\n    border-bottom-left-radius: 4px;\n  }\n\n  @media (min-width: 1024px) {\n    .grid-max-auto {\n      grid-template-columns: max-content auto;\n    }\n  }\n</style>\n"],"names":["name","logo","$.prop","$$props","assets","description","link","fake","thumbhash","renderedLogo","$.tag","$.derived","renderedName","renderedDescription","renderedThumbhash","thumbHashData","thumbHashToDataURL","$.get","x","e","$.log_if_contains_state","preloaded","timeoutHandle","onOver","preloadData","onOut","actionButtons","$.state","imageLoaded","thumbnailLoaded","$.event","img_1","$.set","$.transition","fade","$$render","consequent_1","img","consequent","alternate","consequent_3","consequent_4","$.bind_this","div_9","$$value","classes","$.set_class","div_1","$.set_style","div_8","a","goto"],"mappings":"ulDAAA,2BAoBI,IAAAA,gBAAO,EAAE,EACTC,GAAIC,EAAAC,EAAA,OAAA,EAAGC,GAAS,uBAAuB,EACvCC,uBAAc,EAAE,EAChBC,eAAO,GAAG,EACVC,eAAO,EAAK,EACZC,qBAAY,EAAE,EAOZC,GAAYC,EAAAC,EAAA,IAAYV,GAAI,GAAIG,GAAS,uBAAuB,EAAA,cAAA,EAChEQ,EAAYF,EAAAC,EAAA,IAAYX,GAAI,GAAKO,EAAI,GAAI,WAAW,EAAA,cAAA,EACpDM,GAAmBH,EAAAC,EAAA,IAAYN,GAAW,GAAKE,EAAI,GAAI,wBAAwB,EAAA,qBAAA,EAC/EO,GAAiBJ,EAAAC,EAAA,IAAYH,MAAa,oCAAoC,EAAA,mBAAA,EAC9EO,EAAaL,EACRC,EAAA,KAAA,IAAA,CACD,GAAA,CACK,OAAAK,OACD,WACF,KAAIC,EAACH,EAAiB,GACnB,MAAM,EAAE,EACR,IAAKI,GAAMA,EAAE,WAAW,CAAC,CAAA,CAAA,CAAA,CAGlC,OAASC,EAAG,CACV,QAAQ,MAAK,GAAAC,GAAA,QAACD,CAAC,CAAA,CACjB,CACF,IAAC,mBAGCE,EAAY,GACZC,EACE,MAAAC,EAAM,IAAS,CACfF,IAIJC,EAAgB,WAAiB,IAAA,CAC/BD,EAAY,GACZG,GAAYlB,EAAI,CAAA,CAClB,EAAG,KACL,EAEMmB,EAAK,IAAS,CACdJ,GAIJ,aAAaC,CAAa,CAC5B,MAEII,EAA0BhB,EAAAiB,EAAA,MAAA,EAAA,eAAA,EAE1BC,MAAqB,EAAK,EAAA,aAAA,EAC1BC,MAAyB,EAAK,EAAA,iBAAA,wCAKrBN,eACDE,sQA2BkBI,CAAe,CAAA,CAAA,cAC5Bd,CAAa,CAAA,iBACZH,CAAY,GAAA,EAAA,OAAA,IACHkB,EAAA,OAAAC,EAAA,IAAAC,EAAAH,EAAkB,EAAI,CAAA,QAC1BI,GAAA,EAAAF,EAAA,IAAAG,GAAA,KAAA,CAAA,SAAU,GAAG,EAAA,EACZD,GAAA,EAAAF,EAAA,IAAAG,GAAA,KAAA,CAAA,SAAU,IAAK,MAAO,GAAG,EAAA,wBARnC,CAAAjB,EAAAW,CAAW,KAAIb,CAAa,GAAAoB,EAAAC,CAAA,uMALdR,CAAW,iBACXA,CAAW,gBACxBnB,EAAY,CAAA,iBACXG,CAAY,GAAA,EAAA,OAAA,IACHkB,EAAA,OAAAO,EAAA,IAAAL,EAAAJ,EAAc,EAAI,CAAA,+BAThCrB,EAAI,EAAA4B,EAAAG,EAAA,EAAAH,EAAAI,GAAA,EAAA,wQA+BiChC,EAAI,GAAA4B,EAAAK,CAAA,0UAyBpClC,GAAI,6BAEQM,CAAY,GAAA,EAAA,EAAA,wBACjBA,CAAY,GAAA,EAAA,EAAA,2BALvBL,EAAI,GAAA4B,EAAAM,EAAA,uBADCC,GAAAC,EAAAC,GAAAZ,EAAAN,WAAAA,CAAa,CAAA,2FA9DJmB,EAAAC,EAAAC,EAAA,EAAA,oFAAA,KAAAF,EAAA,CAAA,mBAAAtC,EAAI,cACXA,EAAI,CAAA,CAAA,aAIXD,GAAI,aA8BCA,GAAI,UACwBM,CAAY,CAAA,mCAY7BL,EAAI,EAAA,aACvBM,EAAmB,GAAA,EAAA,GAAA,EAIFmC,GAAAC,GAAA,WAAAhC,EAAAS,CAAa,GAAE,aAAe,GAAK,CAAC,gBAAAT,EAAeS,CAAa,GAAE,cAAgB,GAChG,CAAC,IAAA,gBA1DJH,CAAM,aACPE,CAAK,EASWK,EAAA,WAAAoB,EAAA,IAAAC,GAAK7C,EAAI,CAAA,CAAA,gBAhBnC"}