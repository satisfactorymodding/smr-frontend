{"version":3,"file":"B51zPAbQ.js","sources":["../../../../../../src/lib/models/guides.ts","../../../../../../src/lib/components/guides/GuideForm.svelte"],"sourcesContent":["import * as zod from 'zod';\n\nexport type GuideData = {\n  name: string;\n  short_description: string;\n  guide: string;\n};\n\nexport const guideSchema = zod.object({\n  name: zod.string().min(3).max(32),\n  short_description: zod.string().min(16).max(128),\n  guide: zod.string()\n});\n","<script lang=\"ts\">\n  import { createForm } from 'felte';\n  import { validator } from '@felte/validator-zod';\n  import { reporter, ValidationMessage } from '@felte/reporter-svelte';\n  import type { GuideData } from '$lib/models/guides';\n  import { guideSchema } from '$lib/models/guides';\n  import { trimNonSchema } from '$lib/utils/forms';\n  import { markdown } from '$lib/utils/markdown';\n  import { getTranslate } from '@tolgee/svelte';\n\n  export const { t } = getTranslate();\n\n  interface Props {\n    onSubmit: (data: GuideData) => void;\n    initialValues?: GuideData | undefined;\n    submitIcon: string;\n    submitText?: string;\n  }\n\n  let {\n    onSubmit,\n    initialValues = {\n      name: '',\n      guide: '',\n      short_description: ''\n    },\n    submitIcon,\n    submitText = $t('entry.create')\n  }: Props = $props();\n\n  const { form, data } = createForm<GuideData>({\n    initialValues: initialValues,\n    extend: [validator({ schema: guideSchema }), reporter],\n    onSubmit: (submitted: GuideData) => onSubmit(trimNonSchema(submitted, guideSchema))\n  });\n\n  let preview = $derived(($data.guide as string) || '');\n</script>\n\n<form use:form>\n  <div class=\"grid grid-flow-row gap-6\">\n    <div class=\"grid grid-flow-row gap-2\">\n      <label class=\"label\">\n        <span>{$t('entry.name')} *</span>\n        <input type=\"text\" bind:value={$data.name} required class=\"input p-2\" />\n      </label>\n      <ValidationMessage for=\"name\">\n        {#snippet children({ messages: message })}\n          <span class=\"validation-message\">{message || ''}</span>\n        {/snippet}\n      </ValidationMessage>\n    </div>\n\n    <div class=\"grid grid-flow-row gap-2\">\n      <label class=\"label\">\n        <span>{$t('entry.short-description')} *</span>\n        <input type=\"text\" bind:value={$data.short_description} required class=\"input p-2\" />\n      </label>\n      <ValidationMessage for=\"short_description\">\n        {#snippet children({ messages: message })}\n          <span class=\"validation-message\">{message || ''}</span>\n        {/snippet}\n      </ValidationMessage>\n    </div>\n\n    <div class=\"split grid gap-6\">\n      <div class=\"grid grid-flow-row auto-rows-max gap-2\">\n        <label class=\"label\">\n          <span>{$t('guide')} *</span>\n          <textarea class=\"vertical-textarea textarea p-2\" bind:value={$data.guide} required rows={10}></textarea>\n        </label>\n        <ValidationMessage for=\"guide\">\n          {#snippet children({ messages: message })}\n            <span class=\"validation-message\">{message || ''}</span>\n          {/snippet}\n        </ValidationMessage>\n      </div>\n      <div class=\"grid grid-flow-row auto-rows-max gap-2\">\n        <span>{$t('preview')}:</span>\n        {#await markdown(preview) then previewRendered}\n          <!-- eslint-disable -->\n          <div class=\"markdown-content right\">{@html previewRendered}</div>\n        {/await}\n      </div>\n    </div>\n\n    <div>\n      <button class=\"btn border border-primary-500 preset-tonal-primary\" type=\"submit\">\n        <span class=\"material-icons pr-2\">{submitIcon}</span>\n        {submitText}</button>\n    </div>\n  </div>\n</form>\n\n<style lang=\"postcss\">\n  .split {\n    grid-template-columns: 50% 50%;\n\n    & .right {\n      max-height: 75vh;\n      overflow: auto;\n    }\n  }\n</style>\n"],"names":["guideSchema","zod.object","zod.string","t","getTranslate","initialValues","$.prop","$$props","submitText","$t","form","data","createForm","validator","reporter","submitted","trimNonSchema","preview","$.tag","$.derived","$data","message","$.template_effect","$.set_text","text_1","text_3","text_5","markdown","$.get","$$anchor","previewRendered","$.bind_value","input","$$value","$.store_mutate","$.untrack","input_1","textarea"],"mappings":"saAQO,MAAMA,GAAcC,GAAW,CACpC,KAAMC,EAAI,EAAS,IAAI,CAAC,EAAE,IAAI,EAAE,EAChC,kBAAmBA,EAAI,EAAS,IAAI,EAAE,EAAE,IAAI,GAAG,EAC/C,MAAOA,EAAI,CACb,CAAC,izCCZD,6GAUiB,CAAA,EAAAC,CAAC,EAAKC,GAAY,MAW/BC,GAAaC,EAAAC,EAAA,gBAAA,GAAA,KAAA,CACX,KAAM,GACN,MAAO,GACP,kBAAmB,EAAC,EAAA,EAGtBC,GAAUF,EAAAC,EAAA,aAAA,GAAA,IAAGE,EAAE,EAAC,cAAc,CAAA,QAGxB,KAAAC,GAAM,KAAAC,CAAI,EAAKC,GAAU,CAC/B,cAAeP,GAAa,EAC5B,QAASQ,GAAS,CAAG,OAAQb,EAAW,GAAKc,EAAQ,EACrD,SAAWC,GAAoBR,EAAA,SAAcS,GAAcD,EAAWf,EAAW,CAAA,IAG/E,IAAAiB,GAAOC,GAAAC,GAAA,IAAaC,EAAK,EAAC,OAAoB,EAAE,EAAA,SAAA,sKAWf,IAAAC,YAAV,uCACeC,EAAA,IAAAC,EAAAC,EAAAH,EAAO,GAAI,EAAE,CAAA,yPAWlB,IAAAA,YAAV,uCACeC,EAAA,IAAAC,EAAAE,EAAAJ,EAAO,GAAI,EAAE,CAAA,2NAS0C,EAAE,gEAG5D,IAAAA,YAAV,uCACeC,EAAA,IAAAC,EAAAG,EAAAL,EAAO,GAAI,EAAE,CAAA,gMAM3CM,GAAQC,EAACX,EAAO,CAAA,EAAA,KAAA,CAAAY,EAAOC,IAAe,8BAEDA,CAAe,CAAA,2PAQ3DtB,GAAU,GAAA,EAAA,EAAA,IA9CJ,IAAAC,EAAE,EAAC,YAAY,EAYf,IAAAA,EAAE,EAAC,yBAAyB,EAa1B,IAAAA,EAAE,EAAC,OAAO,EAUZ,IAAAA,EAAE,EAAC,SAAS,IAlCYsB,EAAAC,EAAA,IAAAZ,EAAK,EAAC,KAAIa,GAAAC,EAAAvB,EAAAwB,EAAVf,CAAK,EAAC,SAANA,CAAK,CAAA,CAAA,EAYLW,EAAAK,EAAA,IAAAhB,EAAK,EAAC,kBAAiBa,GAAAC,EAAAvB,EAAAwB,EAAvBf,CAAK,EAAC,sBAANA,CAAK,CAAA,CAAA,EAa2BW,EAAAM,EAAA,IAAAjB,EAAK,EAAC,MAAKa,GAAAC,EAAAvB,EAAAwB,EAAXf,CAAK,EAAC,UAANA,CAAK,CAAA,CAAA,sCAhC5E"}