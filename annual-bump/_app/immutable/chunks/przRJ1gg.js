import{a as ke,p as De,f as Ve,m as a,aC as D,a4 as p,g as v,h as l,O as E,a6 as d,k as x,L as Q,S as V,a0 as R,a1 as W,q as s,u as g,aD as Le,D as C,ab as Be,r as qe,F as m,y as f,X as He,Y as Ke,aw as Qe,b as we,J as K,N as Re,n as Pe,t as We,av as Ze,au as et,C as Ie,aE as tt,aF as T,a9 as de,U as pe,G as ye,z as at,ad as Ae,az as ge,A as ot}from"./Zigv8uwj.js";import{g as nt}from"./C2xQDKU4.js";o[m]="src/lib/components/utils/TagDisplay.svelte";var rt=v(f('<span class="text-orange-500">#</span> <span class="text-neutral-300 lowercase"> </span>',1),o[m],[[21,4],[22,4]]),st=v(f(" <!>",1),o[m],[]),lt=v(f("<!> <!>",1),o[m],[]);function o(Z,_){ke(new.target),De(_,!0,o);var F={...Ve()};return a(()=>D(Z,{children:p(o,(ee,te)=>{var G=lt(),w=l(G);{let P=E(()=>_.selected?"selected-tag":"");a(()=>d(w,()=>D.Trigger,(n,I)=>{I(n,{get class(){return g(P)},onclick:b=>{b.preventDefault(),_.onclick?.()},children:p(o,(b,N)=>{var y=rt(),A=x(l(y),2),O=Q(A,!0);V(A),R(()=>W(O,_.tag.name)),s(b,y)}),$$slots:{default:!0}})}),"component",o,15,2,{componentTag:"Tooltip.Trigger"})}var ae=x(w,2);a(()=>Le(ae,{children:p(o,(P,n)=>{var I=C(),b=l(I);a(()=>d(b,()=>D.Positioner,(N,y)=>{y(N,{children:p(o,(A,O)=>{var L=C(),oe=l(L);a(()=>d(oe,()=>D.Content,(J,ne)=>{ne(J,{class:"max-w-md card preset-filled-surface-100-900 bg-surface-100-900 p-2 shadow-xl",children:p(o,(q,me)=>{Be();var M=st(),U=l(M),re=x(U);a(()=>d(re,()=>D.Arrow,(t,r)=>{r(t,{style:"--arrow-size: calc(var(--spacing) * 2); --arrow-background: var(--color-surface-100-900);",children:p(o,(i,X)=>{var $=C(),h=l($);a(()=>d(h,()=>D.ArrowTip,(u,c)=>{c(u,{})}),"component",o,30,10,{componentTag:"Tooltip.ArrowTip"}),s(i,$)}),$$slots:{default:!0}})}),"component",o,28,8,{componentTag:"Tooltip.Arrow"}),R(()=>W(U,`${_.tag.description??""} `)),s(q,M)}),$$slots:{default:!0}})}),"component",o,26,6,{componentTag:"Tooltip.Content"}),s(A,L)}),$$slots:{default:!0}})}),"component",o,25,4,{componentTag:"Tooltip.Positioner"}),s(P,I)}),$$slots:{default:!0}}),"component",o,24,2,{componentTag:"Portal"}),s(ee,G)}),$$slots:{default:!0}}),"component",o,14,0,{componentTag:"Tooltip"}),qe(F)}e[m]="src/lib/components/utils/TagList.svelte";var it=v(f('<div class="text-md flex flex-row flex-wrap gap-1"></div>'),e[m],[[87,6]]),ct=v(f("<!> <!>",1),e[m],[]),dt=v(f('<span class="text-orange-500">#</span> ',1),e[m],[[121,20]]),pt=v(f("<!> <!>",1),e[m],[]),gt=v(f("<!> <!>",1),e[m],[]),mt=v(f('<div class="mb-2"> </div> <div class="max-h-48 w-full max-w-full overflow-y-auto card preset-filled-surface-100-900" tabindex="-1" data-popup="popupAutocomplete"><!> <div class="text-md flex flex-row flex-wrap gap-1"></div></div>',1),e[m],[[94,4],[96,4,[[131,6]]]]),ut=v(f('<div class="tags"><!></div>'),e[m],[[84,0]]);function e(Z,_){ke(new.target),De(_,!0,e);const F=()=>(ye(P,"getAllTags"),Ie(P,"$getAllTags",te)),ee=()=>(ye(w,"t"),Ie(w,"$t",te)),[te,G]=We(),{t:w}=He(),ae=Ke(),P=Qe({query:nt,client:ae,variables:{limit:100}});let n=we(_,"tags",31,()=>Ze(et([]),"tags")),I=we(_,"editable",3,!1),b=K(E(()=>F().data?.getTags?.map(t=>({label:`${t.name} - ${t.description}`,value:t.id,name:t.name}))||[]),"allTags");const N=t=>{const r=F().data?.getTags?.find(i=>ge(i.id,t));n([...n(),{id:t,name:r?.name,description:r?.description}])},y=t=>{const r=n().findIndex(i=>ot(i.id,t));n([...n().slice(0,r),...n().slice(r+1)])},A=K(E(()=>tt({items:g(b),itemToString:t=>t.label,itemToValue:t=>t.value})),"collection"),O=t=>{console.log(...Ae("log",t));const r=t.itemValue;console.log(...Ae("log",n(),r,n().findIndex(i=>ge(i.id,r)))),n().findIndex(i=>ge(i.id,r))<0?N(r):y(r)};let L=K(Re(""),"inputValue");const oe=t=>{at(L,t.inputValue,!0)};let J=K(E(()=>g(b).filter(t=>t.label.toLowerCase().includes(g(L)))),"filteredTags");var ne={get t(){return w},...Ve()},q=ut(),me=Q(q);{var M=t=>{var r=C(),i=l(r);{var X=$=>{var h=it();de(n,u=>u.id),a(()=>pe(h,21,n,u=>u.id,(u,c)=>{a(()=>o(u,{get tag(){return g(c)}}),"component",e,89,10,{componentTag:"TagDisplay"})}),"each",e,88,8),V(h),s($,h)};a(()=>Pe(i,$=>{n()&&n().length>0&&$(X)}),"if",e,86,4)}s(t,r)},U=t=>{var r=mt(),i=l(r),X=Q(i,!0);V(i);var $=x(i,2),h=Q($);{let c=E(()=>n().map(S=>S.id));a(()=>T(h,{class:"w-full",placeholder:"Search...",get collection(){return g(A)},onSelect:O,onInputValueChange:oe,get value(){return g(c)},openOnClick:!0,multiple:!0,allowCustomValue:!1,positioning:{placement:"top-end"},children:p(e,(S,vt)=>{var ue=gt(),ve=l(ue);a(()=>d(ve,()=>T.Control,(se,fe)=>{fe(se,{children:p(e,(Y,_e)=>{var j=ct(),B=l(j);a(()=>d(B,()=>T.Input,(H,k)=>{k(H,{})}),"component",e,112,10,{componentTag:"Combobox.Input"});var le=x(B,2);a(()=>d(le,()=>T.Trigger,(H,k)=>{k(H,{})}),"component",e,113,10,{componentTag:"Combobox.Trigger"}),s(Y,j)}),$$slots:{default:!0}})}),"component",e,111,8,{componentTag:"Combobox.Control"});var Se=x(ve,2);a(()=>Le(Se,{children:p(e,(se,fe)=>{var Y=C(),_e=l(Y);a(()=>d(_e,()=>T.Positioner,(j,B)=>{B(j,{class:"z-[1]!",children:p(e,(le,H)=>{var k=C(),ze=l(k);a(()=>d(ze,()=>T.Content,(Ee,Fe)=>{Fe(Ee,{class:"max-h-[30vh] overflow-auto",children:p(e,(Ge,ft)=>{var $e=C(),Ne=l($e);de(()=>g(J),z=>z.value),a(()=>pe(Ne,17,()=>g(J),z=>z.value,(z,Te)=>{var xe=C(),Oe=l(xe);a(()=>d(Oe,()=>T.Item,(Je,Me)=>{Me(Je,{get item(){return g(Te)},children:p(e,(Ue,_t)=>{var be=pt(),he=l(be);a(()=>d(he,()=>T.ItemText,(ie,ce)=>{ce(ie,{children:p(e,(Ye,$t)=>{var Ce=dt(),je=x(l(Ce),1,!0);R(()=>W(je,g(Te).label)),s(Ye,Ce)}),$$slots:{default:!0}})}),"component",e,120,18,{componentTag:"Combobox.ItemText"});var Xe=x(he,2);a(()=>d(Xe,()=>T.ItemIndicator,(ie,ce)=>{ce(ie,{})}),"component",e,123,18,{componentTag:"Combobox.ItemIndicator"}),s(Ue,be)}),$$slots:{default:!0}})}),"component",e,119,16,{componentTag:"Combobox.Item"}),s(z,xe)}),"each",e,118,14),s(Ge,$e)}),$$slots:{default:!0}})}),"component",e,117,12,{componentTag:"Combobox.Content"}),s(le,k)}),$$slots:{default:!0}})}),"component",e,116,10,{componentTag:"Combobox.Positioner"}),s(se,Y)}),$$slots:{default:!0}}),"component",e,115,8,{componentTag:"Portal"}),s(S,ue)}),$$slots:{default:!0}}),"component",e,100,6,{componentTag:"Combobox"})}var u=x(h,2);de(n,c=>c.id),a(()=>pe(u,21,n,c=>c.id,(c,S)=>{a(()=>o(c,{get tag(){return g(S)}}),"component",e,133,10,{componentTag:"TagDisplay"})}),"each",e,132,8),V(u),V($),R(c=>W(X,c),[()=>ee()("mod.tags.title")]),s(t,r)};a(()=>Pe(me,t=>{I()?t(U,!1):t(M)}),"if",e,85,2)}V(q),s(Z,q);var re=qe(ne);return G(),re}export{e as T,o as a};
//# sourceMappingURL=przRJ1gg.js.map
