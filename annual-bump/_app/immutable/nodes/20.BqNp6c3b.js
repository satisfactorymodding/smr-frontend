import{I as Y,a as Z,p as ee,J as d,X as te,f as ae,g as M,K as oe,h as k,m as n,z as G,k as x,q as c,r as re,t as se,O as p,N as ne,D as S,n as I,C as ie,L as m,u as r,F as u,y as $,G as de,ae as j,af as q,as as ce,R as l,_ as me,a0 as le,ad as ve}from"../chunks/C6V5fW-3.js";import{v as pe,w as ue}from"../chunks/Bj1PSOzY.js";import{V as ge}from"../chunks/CFOsge0N.js";import{M as fe}from"../chunks/B7wvMWpi.js";import{t as L}from"../chunks/BLzR2Xnx.js";import{B as _e}from"../chunks/DirYF3zW.js";const be=async({params:g})=>({...g}),Be=Object.freeze(Object.defineProperty({__proto__:null,load:be},Symbol.toStringTag,{value:"Module"}));o[u]="src/routes/mod/[modId]/version/[versionId]/edit/+page.svelte";var Ve=M($("<p>Loading...</p>"),o[u],[[96,6]]),he=M($("<p> </p>"),o[u],[[98,6]]),ye=M($('<div class="flex h-auto flex-wrap items-center justify-between"><h1 class="my-4 text-4xl font-bold">Edit Version</h1> <div><!> <button class="btn border border-primary-500 preset-tonal-primary"><span class="material-icons pr-2">arrow_back</span> Back to Versions</button></div></div> <div class="card preset-filled-surface-100-900 p-4"><section><!></section></div>',1),o[u],[[77,0,[[78,2],[79,2,[[87,4,[[88,6]]]]]]],[93,0,[[94,2]]]]);function o(g,f){Z(new.target),ee(f,!0,o);const e=()=>(de(r(E),"version"),ie(r(E),"$version",z)),[z,A]=se();let w=d(p(()=>f.data.modId),"modId"),v=d(p(()=>f.data.versionId),"versionId");const B=te();let E=d(p(()=>ce({query:pe,client:B,variables:{version:r(v)}})),"version");const K=async t=>B.mutation(ue,{versionId:r(v),version:t}).toPromise().then(a=>{if(a.error)console.error(...ve("error",a.error.message)),L.error({description:"Error editing version: "+a.error.message});else return L.success({description:"Version updated",duration:5e3}),j(q+"/mod/"+r(w)+"/version/"+r(v))});let N=d(p(()=>e().data?{...e().data.getVersion,logo:void 0}:void 0),"initialValues");const P=()=>{j(q+"/mod/"+r(w)+"/version/"+r(v))};let _=d(ne(!1),"backModalOpen");var R={...ae()},T=ye();oe(t=>{var a=S(),V=k(a);{var h=i=>{n(()=>fe(i,{get description(){return`Editing mod version ${e().data.getVersion.mod.name??""} ${e().data.getVersion.version??""}`},get title(){return`Edit mod version ${e().data.getVersion.mod.name??""} ${e().data.getVersion.version??""}`}}),"component",o,71,4,{componentTag:"MetaDescriptors"})};n(()=>I(V,i=>{!e().fetching&&!e().error&&e().data.getVersion&&i(h)}),"if",o,70,2)}c(t,a)});var b=k(T),O=x(m(b),2),C=m(O);n(()=>_e(C,{title:"Go Back?",body:"Going back will discard any unsaved changes. Are you sure you wish to continue?",buttonTextCancel:"Keep Editing",buttonTextConfirm:"Go Back",confirm:P,get open(){return r(_)},set open(t){G(_,t,!0)}}),"component",o,80,4,{componentTag:"BasicModal"});var J=x(C,2);J.__click=()=>G(_,!0),l(O),l(b);var D=x(b,2),F=m(D),U=m(F);{var X=t=>{var a=Ve();c(t,a)},H=t=>{var a=S(),V=k(a);{var h=s=>{var y=he(),W=m(y);l(y),me(()=>le(W,`Oh no... ${e().error.message??""}`)),c(s,y)},i=s=>{n(()=>ge(s,{onSubmit:K,get initialValues(){return r(N)},get modReference(){return e().data.getVersion.mod.mod_reference},editing:!0,submitText:"Save",submitIcon:"save"}),"component",o,100,6,{componentTag:"VersionForm"})};n(()=>I(V,s=>{e().error?s(h):s(i,!1)},!0),"if",o,97,4)}c(t,a)};n(()=>I(U,t=>{e().fetching?t(X):t(H,!1)}),"if",o,95,4)}l(F),l(D),c(g,T);var Q=re(R);return A(),Q}Y(["click"]);export{o as component,Be as universal};
//# sourceMappingURL=20.BqNp6c3b.js.map
