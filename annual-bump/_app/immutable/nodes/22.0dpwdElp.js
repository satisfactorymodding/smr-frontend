import{I as ba,a as Xe,p as Ye,b as Te,Y as xa,J as v,N as q,au as J,at as Ie,O as F,u as e,ax as Ne,X as wa,f as Qe,g as w,h as K,m as o,n as x,k as P,L as l,a0 as C,q as n,r as We,t as ya,A as f,C as ne,F as m,y,G as de,aw as Re,z as u,ae as za,az as Pe,S as r,a9 as Ce,U as ve,a1 as j,an as Ma,ai as se,ah as ce,aB as Ue,M as Ta,af as Pa,V as Ca,D as re,ac as He,K as Da}from"../chunks/Zigv8uwj.js";import{O as Sa,M as ue,H as Oa,g as $a}from"../chunks/C2xQDKU4.js";import{M as ka}from"../chunks/B_d8vhaX.js";import{u as Je}from"../chunks/CIk8Whsi.js";import{F as qa}from"../chunks/DDGmUUhT.js";import{a as Fa}from"../chunks/przRJ1gg.js";import{P as Ke}from"../chunks/6BTxjpPg.js";import{M as ja}from"../chunks/DkMqSqQ8.js";a[m]="src/lib/components/mods/ModGrid.svelte";var Ba=w(y('<option class="svelte-1salbzu"> </option>'),a[m],[[148,14]]),Ga=w(y('<p class="svelte-1salbzu"> </p>'),a[m],[[174,12]]),La=w(y('<div class="flex flex-grow flex-row flex-wrap items-center justify-center gap-1 pb-10 svelte-1salbzu"><!></div>'),a[m],[[172,8]]),Aa=w(y('<div class="flex grow flex-col items-center justify-center gap-4 sm:px-4 svelte-1salbzu"><div class="flex grow flex-row flex-wrap items-center justify-center gap-3 sm:px-4 svelte-1salbzu"><div class="svelte-1salbzu"><button type="button"><span class="svelte-1salbzu"> </span></button></div> <div class="svelte-1salbzu"><select class="select svelte-1salbzu"></select></div> <div class="svelte-1salbzu"><select class="select svelte-1salbzu"><option class="svelte-1salbzu"> </option><option class="svelte-1salbzu"> </option></select></div> <div class="input-group-divider input-group w-fit grid-cols-[1fr_auto] rounded-container svelte-1salbzu"><input class="border-0 bg-transparent p-1.5 ring-0 svelte-1salbzu" name="search"/> <button>arrow_forward</button></div></div> <!></div>'),a[m],[[133,4,[[134,6,[[135,8,[[136,10,[[142,12]]]]],[145,8,[[146,10]]],[152,8,[[153,10,[[154,12],[155,12]]]]],[159,8,[[160,10],[165,10]]]]]]]]),Va=w(y('<a class="btn self-end border border-primary-500 preset-tonal-primary svelte-1salbzu"> </a>'),a[m],[[190,6]]),Ea=w(y('<div class="self-end svelte-1salbzu"><!></div>'),a[m],[[193,6]]),Ia=w(y("<div></div>"),a[m],[[201,2]]),Na=w(y('<p class="svelte-1salbzu"> </p>'),a[m],[[209,2]]),Ra=w(y("<div></div>"),a[m],[[213,2]]),Ua=w(y('<div class="mt-5 ml-auto flex justify-end svelte-1salbzu"><div class="svelte-1salbzu"><!></div></div>'),a[m],[[221,2,[[222,4]]]]),Ha=w(y('<div class="mb-5 ml-auto flex flex-col gap-4 svelte-1salbzu"><!> <div><!> <!></div></div> <!> <!>',1),a[m],[[131,0,[[185,2]]]]);function a(ge,N){Xe(new.target),Ye(N,!0,a);const p=()=>(de(e(Se),"mods"),ne(e(Se),"$mods",oe)),i=()=>(de(he,"t"),ne(he,"$t",oe)),X=()=>(de(e(Oe),"allTags"),ne(e(Oe),"$allTags",oe)),fe=()=>(de(Je,"user"),ne(Je,"$user",oe)),[oe,Ze]=ya();let ea=Te(N,"colCount",3,4),me=Te(N,"newMod",3,!1),aa=Te(N,"showSearch",3,!1);const De=xa();let B=v(q(J(Ie.url.searchParams.get("q")||"")),"search"),_e=v(q(J(Sa.Desc)),"order"),V=v(q(J(ue.LastVersionDate)),"orderBy"),E=v(q(32),"perPage"),I=v(q(J(parseInt(Ie.url.searchParams.get("p")||"0",10)||0)),"page"),D=v(q(J([])),"selectedTags"),Se=v(F(()=>Re({query:Oa,client:De,variables:{offset:e(I)*e(E),limit:e(E),search:e(B),order:e(_e),orderBy:e(V),tagIDs:e(D).sort()}})),"mods"),Oe=v(F(()=>Re({query:$a,client:De,variables:{limit:100}})),"allTags"),le=v(F(()=>p()?.data?.getMods?.count||0),"totalMods"),_=v(q(J(e(B))),"searchField"),Y=v(F(()=>e(_).length<3),"searchDisabled"),ta=v(F(()=>e(Y)?"preset-filled-surface-500":"preset-filled-primary-500"),"searchButtonClass"),$e=v(q(void 0),"timer");Ne(()=>{clearTimeout(e($e)),u($e,setTimeout(()=>{e(_)&&!e(Y)?((f(e(B),"")||f(e(B),null))&&f(e(_),"",!1)&&f(e(_),null,!1)&&(u(V,ue.Search,!0),u(I,0)),u(B,e(_),!0)):(f(e(_),"")||f(e(_),null))&&((f(e(V),ue.Search)||!e(V))&&u(V,ue.LastVersionDate,!0),u(B,null))},250),!0)}),Ne(()=>{{const t=new URL(window.location.origin+window.location.pathname);t.searchParams.append("p",e(I).toString()),!e(Y)&&f(e(_),"",!1)&&f(e(_),null,!1)&&t.searchParams.append("q",e(_)),za(t.toString(),{keepFocus:!0})}});let ke=v(F(()=>p()&&p().fetching||p()&&!p().fetching&&e(le)>0&&!p().error),"showPagination"),qe=v(F(()=>Pe(ea(),4)?"3xl:grid-cols-4 2xl:grid-cols-3 lg:grid-cols-2 grid-cols-1":"3xl:grid-cols-3 2xl:grid-cols-2 grid-cols-1"),"gridClasses");const{t:he}=wa();let Fe=v(F(()=>[[i()("sort-order.name"),"name"],[i()("sort-order.views"),"views"],[i()("sort-order.downloads"),"downloads"],[i()("sort-order.hotness"),"hotness"],[i()("sort-order.popularity"),"popularity"],[i()("sort-order.created_at"),"created_at"],[i()("sort-order.last_version_date"),"last_version_date"],...f(e(B),"",!1)&&f(e(B),null,!1)?[[i()("sort-order.search"),"search"]]:[]]),"orderFields");const sa=t=>{if(e(D).indexOf(t)>=0){const s=e(D).indexOf(t);u(D,[...e(D).slice(0,s),...e(D).slice(s+1)],!0)}else u(D,[...e(D),t],!0)},je=t=>t.toSorted((s,c)=>s.name.localeCompare(c.name));let ie=v(q(!1),"tagsOpen");var ra={get t(){return he},...Qe()},Be=Ha(),be=K(Be),Ge=l(be);{var oa=t=>{var s=Aa(),c=l(s),g=l(c),b=l(g);let S;b.__click=()=>u(ie,!e(ie));var G=l(b),Q=l(G,!0);r(G),r(b),r(g);var W=P(g,2),Z=l(W);Ce(()=>e(Fe),d=>d[1]),o(()=>ve(Z,21,()=>e(Fe),d=>d[1],(d,$)=>{var k=Ba(),ae=l(k,!0);r(k);var U={};C(()=>{j(ae,e($)[0]),U!==(U=e($)[1])&&(k.value=(k.__value=e($)[1])??"")}),n(d,k)}),"each",a,147,12),r(Z),r(W);var z=P(W,2),M=l(z),O=l(M),we=l(O,!0);r(O),O.value=O.__value="asc";var R=P(O),L=l(R,!0);r(R),R.value=R.__value="desc",r(M),r(z);var T=P(z,2),h=l(T);Ma(h);var ee=P(h,2);r(T),r(c);var ga=P(c,2);{var fa=d=>{var $=La(),k=l($);{var ae=A=>{var H=Ga(),ye=l(H);r(H),C(()=>j(ye,`Oh no... ${X().error.message??""}`)),n(A,H)},U=A=>{var H=re(),ye=K(H);{var ma=ze=>{var Ee=re(),_a=K(Ee);Ce(()=>je(X().data.getTags),te=>te.id),o(()=>ve(_a,1,()=>je(X().data.getTags),te=>te.id,(te,Me)=>{{let ha=F(()=>e(D).indexOf(e(Me).id)>=0);o(()=>Fa(te,{get tag(){return e(Me)},get selected(){return e(ha)},onclick:()=>sa(e(Me).id)}),"component",a,177,14,{componentTag:"TagDisplay"})}}),"each",a,176,12),n(ze,Ee)};o(()=>x(ye,ze=>{X().fetching||ze(ma)},!0),"if",a,175,10)}n(A,H)};o(()=>x(k,A=>{X().error?A(ae):A(U,!1)}),"if",a,173,10)}r($),n(d,$)};o(()=>x(ga,d=>{e(ie)&&d(fa)}),"if",a,171,6)}r(s),C((d,$,k,ae,U,A)=>{S=se(b,1,"text-md btn preset-filled-surface-500 p-2 btn-sm pr-4 pl-4 svelte-1salbzu",null,S,{"preset-tonal-primary":e(ie)}),ce(b,"title",d),j(Q,$),j(we,k),j(L,ae),ce(h,"placeholder",U),se(ee,1,`material-icons ${e(ta)??""}`,"svelte-1salbzu"),ee.disabled=e(Y),ce(ee,"title",A)},[()=>i()("filter.expand-button-tooltip"),()=>i()("filter.expand-button-text"),()=>i()("ascending"),()=>i()("descending"),()=>i()("search.placeholder-text"),()=>e(Y)?i()("search.disabled"):""]),Ue(Z,()=>e(V),d=>u(V,d)),Ue(M,()=>e(_e),d=>u(_e,d)),Ta(h,()=>e(_),d=>u(_,d)),n(t,s)};o(()=>x(Ge,t=>{aa()&&t(oa)}),"if",a,132,2)}var xe=P(Ge,2);let Le;var Ae=l(xe);{var la=t=>{var s=Va(),c=l(s,!0);r(s),C(g=>{ce(s,"href",`${Pa??""}/new-mod`),j(c,g)},[()=>i()("mods.new")]),n(t,s)};o(()=>x(Ae,t=>{me()&&f(fe(),null,!1)&&t(la)}),"if",a,189,4)}var ia=P(Ae,2);{var na=t=>{var s=Ea(),c=l(s);o(()=>Ke(c,{get total(){return e(le)},get page(){return e(I)},set page(g){u(I,g,!0)},get perPage(){return e(E)},set perPage(g){u(E,g,!0)}}),"component",a,194,8,{componentTag:"Pager"}),r(s),n(t,s)};o(()=>x(ia,t=>{e(ke)&&t(na)}),"if",a,192,4)}r(xe),r(be);var Ve=P(be,2);{var da=t=>{var s=Ia();o(()=>ve(s,21,()=>Array(e(E)),Ca,(c,g)=>{o(()=>qa(c,{fake:!0}),"component",a,203,6,{componentTag:"FicsitCard"})}),"each",a,202,4),r(s),C(()=>se(s,1,`grid ${e(qe)??""} gap-4`,"svelte-1salbzu")),n(t,s)},va=t=>{var s=re(),c=K(s);{var g=S=>{var G=He();C(Q=>j(G,Q),[()=>i()("search.failed.query-too-short")]),n(S,G)},b=S=>{var G=re(),Q=K(G);{var W=z=>{var M=Na(),O=l(M);r(M),C(()=>j(O,`Oh no... ${p().error.message??""}`)),n(z,M)},Z=z=>{var M=re(),O=K(M);{var we=L=>{var T=He();C(h=>j(T,h),[()=>i()("search.results.empty")]),n(L,T)},R=L=>{var T=Ra();Ce(()=>p().data.getMods.mods,h=>h.id),o(()=>ve(T,5,()=>p().data.getMods.mods,h=>h.id,(h,ee)=>{o(()=>ka(h,{get mod(){return e(ee)}}),"component",a,215,6,{componentTag:"ModCard"})}),"each",a,214,4),r(T),C(()=>se(T,1,`grid ${e(qe)??""} gap-4`,"svelte-1salbzu")),n(L,T)};o(()=>x(O,L=>{Pe(e(le),0)?L(we):L(R,!1)},!0),"if",a,210,0)}n(z,M)};o(()=>x(Q,z=>{p().error?z(W):z(Z,!1)},!0),"if",a,208,0)}n(S,G)};o(()=>x(c,S=>{p().error&&p().error.message.includes("'Search' failed on the 'min' tag")?S(g):S(b,!1)},!0),"if",a,206,0)}n(t,s)};o(()=>x(Ve,t=>{p().fetching?t(da):t(va,!1)}),"if",a,200,0)}var ca=P(Ve,2);{var ua=t=>{var s=Ua(),c=l(s),g=l(c);o(()=>Ke(g,{get total(){return e(le)},get page(){return e(I)},set page(b){u(I,b,!0)},get perPage(){return e(E)},set perPage(b){u(E,b,!0)}}),"component",a,223,6,{componentTag:"Pager"}),r(c),r(s),n(t,s)};o(()=>x(ca,t=>{e(ke)&&t(ua)}),"if",a,220,0)}C(()=>Le=se(xe,1,"flex grow flex-row flex-wrap svelte-1salbzu",null,Le,{"justify-between":me()&&f(fe(),null,!1),"justify-end":!me()||Pe(fe(),null)})),n(ge,Be);var pa=We(ra);return Ze(),pa}ba(["click"]);pe[m]="src/routes/mods/+page.svelte";function pe(ge,N){Xe(new.target),Ye(N,!1,pe);var p={...Qe()};return Da("1wn03p2",i=>{o(()=>ja(i,{description:"Mods available from the Satisfactory Mod Repository",title:"Mods"}),"component",pe,7,2,{componentTag:"MetaDescriptors"})}),o(()=>a(ge,{showSearch:!0,newMod:!0,colCount:4}),"component",pe,10,0,{componentTag:"ModGrid"}),We(p)}export{pe as component};
//# sourceMappingURL=22.0dpwdElp.js.map
