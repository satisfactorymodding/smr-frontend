import{a as R,p as W,Y as X,J as k,ak as Z,C as A,z as C,B as ee,f as ae,g as _,K as re,k as D,h as M,m as o,q as d,r as te,t as se,G as q,u as c,N as w,n as E,L as p,A as N,F as u,y as b,ad as T,ae as oe,af as ie,D as ne,S as l,al as me,x as j,ab as de,am as ce}from"../chunks/DXyKL7ev.js";import{U as pe}from"../chunks/C2xQDKU4.js";import{o as le,s as ue,a as fe,b as ve,c as ge,v as _e,r as be}from"../chunks/cOqIQ9UF.js";import{t as Fe}from"../chunks/DsD2_0M_.js";import{u as z}from"../chunks/FxgHKTKi.js";import{M as he}from"../chunks/CVCyYPYH.js";import{t as I}from"../chunks/CvZBqrLn.js";import{F as $e}from"../chunks/C_rRi3OF.js";import{F as xe}from"../chunks/BH2B-EM1.js";a[u]="src/routes/settings/+page.svelte";var ye=_(b("<p>Please log in</p>"),a[u],[[76,6]]),Se=_(b('<form><div class="grid grid-flow-row gap-6"><!> <!> <div><button class="btn border border-primary-500 preset-tonal-primary" type="submit">Save</button></div></div></form>'),a[u],[[78,6,[[79,8,[[89,10,[[90,12]]]]]]]]),Ue=_(b('<h1 class="my-4 text-4xl font-bold">Settings</h1> <div class="card preset-filled-surface-100-900 p-4"><section><!></section></div>',1),a[u],[[71,0],[73,0,[[74,2]]]]);function a(L,P){R(new.target),W(P,!0,a);const i=()=>(q(z,"user"),A(z,"$user",f)),s=()=>(q(c(n),"data"),A(c(n),"$data",f)),[f,B]=se(),G=X(),F=le({avatar:fe(ve().refine(e=>"name"in e&&"size"in e&&"type"in e)),username:ue().min(3).max(32)});let h=k(w(void 0),"form"),n=k(w(void 0),"data");Z(()=>{if(i()&&!s()){const e=ge({initialValues:{username:i().username},extend:[_e({schema:F}),be],onSubmit:r=>{console.log(...T("log","submitted",r)),G.mutation(pe,{user:Fe(r,F),userId:i().id}).toPromise().then(t=>{t.error?(console.error(...T("error",t.error.message)),I.error({description:"Error editing user: "+t.error.message})):(I.success({description:"User updated",duration:5e3}),oe(ie+"/user/"+t.data.updateUser.id))})}});C(h,e.form,!0),ee(C(n,e.data,!0),"$data",f)}});var J={...ae()},$=Ue();re("1i19ct2",e=>{o(()=>he(e,{description:"Change your user settings",title:"Settings"}),"component",a,68,2,{componentTag:"MetaDescriptors"})});var x=D(M($),2),y=p(x),K=p(y);{var V=e=>{var r=ye();d(e,r)},Y=e=>{var r=ne(),t=M(r);{var O=v=>{var m=Se(),S=p(m),U=p(S);o(()=>$e(U,{label:"Avatar:",name:"avatar",id:"avatar",accept:"image/png,image/jpeg,image/gif",placeholder:"Avatar"}),"component",a,80,10,{componentTag:"FormFileField"});var Q=D(U,2);o(()=>xe(Q,{label:"Username",name:"username",required:!0,get value(){return s().username},set value(g){me(c(n),j(s).username=g,j(s))}}),"component",a,87,10,{componentTag:"FormField"}),de(2),l(S),l(m),ce(m,g=>c(h)?.(g)),d(v,m)};o(()=>E(t,v=>{N(s(),void 0,!1)&&v(O)},!0),"if",a,77,4)}d(e,r)};o(()=>E(K,e=>{N(i(),null)?e(V):e(Y,!1)}),"if",a,75,4)}l(y),l(x),d(L,$);var H=te(J);return B(),H}export{a as component};
//# sourceMappingURL=26.CZ_lIve-.js.map
