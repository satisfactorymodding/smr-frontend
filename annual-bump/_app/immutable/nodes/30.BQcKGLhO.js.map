{"version":3,"file":"30.BQcKGLhO.js","sources":["../../../../../../src/routes/user/[userId]/+page.ts","../../../../../../src/lib/components/users/UserInfo.svelte","../../../../../../src/lib/components/users/UserAvatar.svelte","../../../../../../src/routes/user/[userId]/+page.svelte"],"sourcesContent":["import type { PageLoad } from './$types';\nimport { queryStore } from '@urql/svelte';\nimport { GetUserDocument } from '$lib/generated';\nimport { loadWaitForNoFetch } from '$lib/utils/gql';\n\nexport const prerender = false;\n\nexport const load: PageLoad = async ({ params, parent }) => ({\n  ...params,\n  ...(await loadWaitForNoFetch({\n    user: queryStore({\n      query: GetUserDocument,\n      client: (await parent()).client,\n      variables: { user: params.userId }\n    })\n  }))\n});\n","<script lang=\"ts\">\n  import type { User } from '$lib/generated';\n  import { prettyDate } from '$lib/utils/formatting';\n  import { getTranslate } from '@tolgee/svelte';\n  import InfoCard from '$lib/components/general/InfoCard.svelte';\n\n  interface Props {\n    user: Pick<User, 'created_at'>;\n  }\n\n  let { user }: Props = $props();\n\n  export const { t } = getTranslate();\n</script>\n\n<InfoCard>\n  <span><strong>{$t('entry.created-at')}:</strong> {prettyDate(user.created_at)}</span><br />\n</InfoCard>\n","<script lang=\"ts\">\n  import { assets } from '$app/paths';\n\n  interface Props {\n    avatar: string;\n    username: string;\n  }\n\n  let { avatar, username }: Props = $props();\n\n  let userAvatar = $derived(avatar || assets + '/images/no_image.webp');\n</script>\n\n<div>\n  <img class=\"w-full max-w-full rounded-lg sm:max-w-lg\" src={userAvatar} alt=\"Avatar for {username}\" />\n</div>\n","<script lang=\"ts\">\n  import UserInfo from '$lib/components/users/UserInfo.svelte';\n  import UserAvatar from '$lib/components/users/UserAvatar.svelte';\n  import ModCard from '$lib/components/mods/ModCard.svelte';\n  import GuideCard from '$lib/components/guides/GuideCard.svelte';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n  import { user as me } from '$lib/stores/user';\n  import { base } from '$app/paths';\n  import type { PageData } from './$types';\n  import Page404 from '$lib/components/general/Page404.svelte';\n  import QueryStateHandler from '$lib/components/general/QueryStateHandler.svelte';\n\n  interface Props {\n    data: PageData;\n  }\n\n  let { data }: Props = $props();\n\n  let { user } = $derived(data);\n\n  let guidesTab = $state(false);\n</script>\n\n<svelte:head>\n  {#if !$user.fetching && !$user.error && $user.data.getUser}\n    <MetaDescriptors\n      description=\"{$user.data.getUser.username} profile\"\n      title=\"{$user.data.getUser.username} profile\" />\n  {/if}\n</svelte:head>\n\n<QueryStateHandler query={user}>\n  {#snippet empty()}\n    <Page404 />\n  {/snippet}\n\n  {#if $user.data.getUser}\n    <div class=\"xlx:grid-flow-row grid gap-6\">\n      <div class=\"flex h-auto flex-wrap items-center justify-between\">\n        <h1 class=\"text-4xl font-bold\">{$user.data.getUser.username}</h1>\n\n        <div>\n          {#if $me && $user.data.getUser.id === $me.id}\n            <a class=\"btn border border-primary-500 preset-tonal-primary\" href=\"{base}/settings\">Settings</a>\n          {/if}\n\n          <button class=\"btn border border-primary-500 preset-tonal-primary\" onclick={() => (guidesTab = !guidesTab)}>\n            {#if !guidesTab}\n              Guides\n            {:else}\n              Mods\n            {/if}\n          </button>\n        </div>\n      </div>\n      <div class=\"grid-auto-max grid auto-cols-fr gap-4\">\n        {#if !guidesTab}\n          <div class=\"grid h-fit grid-cols-1 gap-4 3xl:grid-cols-3 2xl:grid-cols-2\">\n            {#each $user.data.getUser.mods as mod (mod.mod.id)}\n              <ModCard mod={mod.mod} />\n            {/each}\n\n            {#if $user.data.getUser.mods.length === 0}\n              <!-- TODO Prettier -->\n              User has no mods\n            {/if}\n          </div>\n        {:else}\n          <div class=\"grid h-fit grid-cols-1 gap-4 3xl:grid-cols-3 2xl:grid-cols-2\">\n            {#each $user.data.getUser.guides as guide (guide.id)}\n              <GuideCard {guide} logo={$user.data.getUser.avatar} />\n            {/each}\n\n            {#if $user.data.getUser.guides.length === 0}\n              <!-- TODO Prettier -->\n              User has no guides\n            {/if}\n          </div>\n        {/if}\n        <div class=\"grid auto-rows-min grid-cols-1 gap-8\">\n          <UserAvatar avatar={$user.data.getUser.avatar} username={$user.data.getUser.username} />\n          <UserInfo user={$user.data.getUser} />\n        </div>\n      </div>\n    </div>\n  {/if}\n</QueryStateHandler>\n"],"names":["prerender","load","params","parent","loadWaitForNoFetch","queryStore","GetUserDocument","t","getTranslate","$t","prettyDate","userAvatar","$.tag","$.derived","$$props","assets","user","guidesTab","$user","$$render","consequent","base","$me","$.strict_equals","consequent_1","button","$.set","alternate","consequent_2","$.validate_each_keys","mod","$.each","node_5","$.get","consequent_3","guide","node_7","consequent_5","alternate_1","consequent_4","$.template_effect","$.set_text","text","consequent_6"],"mappings":"ytBAKO,MAAMA,GAAY,GAEZC,GAAiB,MAAO,CAAE,OAAAC,EAAQ,OAAAC,MAAc,CAC3D,GAAGD,EACH,GAAI,MAAME,GAAmB,CAC3B,KAAMC,GAAW,CACf,MAAOC,GACP,QAAS,MAAMH,EAAA,GAAU,OACzB,UAAW,CAAE,KAAMD,EAAO,MAAA,CAAO,CAClC,CAAA,CACF,CACH,2QChBA,uEAYiB,CAAA,EAAAK,CAAC,EAAKC,GAAY,6KAIlB,IAAAC,EAAE,EAAC,kBAAkB,EAAc,IAAAC,UAAgB,UAAU,yGAH9E,2KCbA,6BAUMC,EAAUC,EAAAC,GAAA,IAAAC,EAAA,QAAsBC,GAAS,uBAAuB,EAAA,YAAA,8DAITJ,CAAU,CAAA,yDAHvE,80BCXA,oHAkBQ,IAAAK,kBAAA,IAAI,EAAA,MAAA,EAENC,OAAmB,EAAK,EAAA,WAAA,4FAMV,MAAA,GAAAC,IAAM,KAAK,QAAQ,UAAQ,EAAA,wBACjC,MAAA,GAAAA,IAAM,KAAK,QAAQ,UAAQ,EAAA,mFAHjCA,EAAK,EAAC,UAAQ,CAAKA,EAAK,EAAC,OAASA,EAAK,EAAC,KAAK,SAAOC,EAAAC,CAAA,mKAOlCJ,CAAI,wKAYmDK,IAAI,EAAA,WAAA,CAAA,yBADtEC,EAAG,GAAAC,EAAIL,EAAK,EAAC,KAAK,QAAQ,GAAOI,EAAG,EAAC,EAAE,GAAAH,EAAAK,EAAA,gCAIuCC,EAAA,QAAA,IAAAC,GAAAT,KAAaA,CAAS,CAAA,oGACjGA,CAAS,EAAAE,EAAAQ,GAAA,EAAA,EAAAR,EAAAS,EAAA,uFAWRC,GAAA,IAAAX,IAAM,KAAK,QAAQ,KAAQY,GAAKA,EAAI,IAAI,EAAE,IAA1C,IAAAC,GAAAC,EAAA,EAAA,IAAAd,EAAK,EAAC,KAAK,QAAQ,KAAQY,GAAKA,EAAI,IAAI,MAAbA,IAAG,uBACrB,OAAAG,EAAAH,CAAG,EAAC,mJAGfZ,IAAM,KAAK,QAAQ,KAAK,OAAW,CAAC,GAAAC,EAAAe,CAAA,+DAOlChB,EAAK,EAAC,KAAK,QAAQ,OAAUiB,GAAOA,EAAM,EAAE,IAA5C,IAAAJ,GAAAK,EAAA,EAAA,IAAAlB,EAAK,EAAC,KAAK,QAAQ,OAAUiB,GAAOA,EAAM,MAAbA,IAAK,iDACd,OAAAjB,EAAK,EAAC,KAAK,QAAQ,0JAGzCA,IAAM,KAAK,QAAQ,OAAO,OAAW,CAAC,GAAAC,EAAAkB,CAAA,gDAjBzCpB,CAAS,EAAAE,EAAAmB,GAAA,EAAA,EAAAnB,EAAAoB,EAAA,kEAwBO,OAAArB,EAAK,EAAC,KAAK,QAAQ,uBAAkB,OAAAA,EAAK,EAAC,KAAK,QAAQ,0GAC5DA,EAAK,EAAC,KAAK,2EA1CGsB,EAAA,IAAAC,EAAAC,GAAAxB,EAAK,EAAC,KAAK,QAAQ,QAAQ,CAAA,wBAH5DA,EAAK,EAAC,KAAK,SAAOC,EAAAwB,CAAA,0IAfzB"}