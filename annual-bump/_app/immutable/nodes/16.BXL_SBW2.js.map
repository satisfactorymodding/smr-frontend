{"version":3,"file":"16.BXL_SBW2.js","sources":["../../../../../../src/routes/mod/[modId]/+page.ts","../../../../../../src/lib/components/mods/ModInfo.svelte","../../../../../../src/lib/components/mods/ModLatestVersions.svelte","../../../../../../src/lib/components/mods/ModAuthors.svelte","../../../../../../src/lib/components/mods/ModLogo.svelte","../../../../../../src/lib/components/mods/ModDescription.svelte","../../../../../../src/lib/components/mods/ModVersions.svelte","../../../../../../src/lib/utils/schema.ts","../../../../../../src/lib/components/mods/compatibility/CompatibilityGrid.svelte","../../../../../../src/lib/modals/EditCompatibilityModal.svelte","../../../../../../src/routes/mod/[modId]/+page.svelte"],"sourcesContent":["import type { PageLoad } from './$types';\nimport { queryStore } from '@urql/svelte';\nimport { GetModDocument } from '$lib/generated';\nimport { loadWaitForNoFetch } from '$lib/utils/gql';\n\nexport const prerender = false;\n\nexport const load: PageLoad = async ({ params, parent }) => ({\n  ...params,\n  ...(await loadWaitForNoFetch({\n    mod: queryStore({\n      query: GetModDocument,\n      client: (await parent()).client,\n      variables: { mod: params.modId },\n      requestPolicy: 'network-only'\n    })\n  }))\n});\n","<script lang=\"ts\">\n  import type { Mod } from '$lib/generated';\n  import { prettyDate, prettyNumber } from '$lib/utils/formatting';\n\n  import TagList from '$lib/components/utils/TagList.svelte';\n  import { getTranslate } from '@tolgee/svelte';\n  import InfoCard from '$lib/components/general/InfoCard.svelte';\n\n  interface Props {\n    mod: Pick<Mod, 'source_url' | 'created_at' | 'views' | 'downloads' | 'mod_reference' | 'compatibility' | 'tags'>;\n  }\n\n  let { mod }: Props = $props();\n\n  export const { t } = getTranslate();\n</script>\n\n<InfoCard>\n  <span\n    ><strong>{$t('entry.source')}:</strong>\n    {#if mod.source_url.length > 0}\n      <a class=\"text-yellow-500 underline\" href={mod.source_url}>{mod.source_url}</a>\n    {:else}\n      {$t('entry.source.none-provided')}\n    {/if}\n  </span><br />\n  <span><strong>{$t('entry.created-at')}:</strong> {prettyDate(mod.created_at)}</span><br />\n  <span><strong>{$t('entry.views')}:</strong> {prettyNumber(mod.views)}</span><br />\n  <span><strong>{$t('downloads')}:</strong> {prettyNumber(mod.downloads)}</span><br />\n  <span><strong>{$t('mod.reference')}:</strong> {mod.mod_reference}</span><br />\n  <TagList tags={mod.tags} />\n</InfoCard>\n","<script lang=\"ts\">\n  import { base } from '$app/paths';\n  import { prettyDate } from '$lib/utils/formatting';\n  import { getTranslate } from '@tolgee/svelte';\n  import { installMod } from '$lib/stores/launcher';\n  import VersionTargetSupportGrid from '$lib/components/versions/VersionTargetSupportGrid.svelte';\n  import VersionDependenciesGrid from '$lib/components/versions/VersionDependenciesGrid.svelte';\n  import type { Version, VersionDependency, VersionTarget } from '$lib/generated';\n  import { T } from '@tolgee/svelte';\n\n  type IVersion = Pick<Version, 'id' | 'link' | 'version' | 'created_at'> & {\n    targets?: Pick<VersionTarget, 'targetName' | 'size' | 'hash'>[];\n  } & { dependencies?: Pick<VersionDependency, 'mod_id' | 'optional' | 'condition'>[] };\n\n  type ILatestVersions = {\n    alpha?: IVersion;\n    beta?: IVersion;\n    release?: IVersion;\n  };\n\n  const stabilities = {\n    release: 'new_releases'\n  };\n\n  interface Props {\n    latestVersions: ILatestVersions;\n    modId: string;\n    modReference: string;\n  }\n\n  let { latestVersions, modId, modReference }: Props = $props();\n\n  export const { t } = getTranslate();\n</script>\n\n<div class=\"card preset-filled-surface-100-900 p-4\">\n  <section>\n    <div class=\"grid grid-flow-row gap-y-2\">\n      <h3 class=\"my-4 text-2xl font-bold\"><T keyName=\"mod.latest-versions\" defaultValue=\"Latest Versions\" /></h3>\n\n      {#each Object.keys(stabilities) as stability (stability)}\n        {#if latestVersions[stability]}\n          <div class=\"version\">\n            <div class=\"h-14 w-14 p-2.5 text-4xl\" title={`Latest ${stability} release`}>\n              <span class=\"material-icons\">{stabilities[stability]}</span>\n            </div>\n            <div class=\"grid grid-flow-row\">\n              <a\n                href=\"{base}/mod/{modId}/version/{latestVersions[stability].id}/\"\n                class=\"text-yellow-500 underline\"\n                title={$t('version.version-number.tooltip', 'Click to view patch notes for this version')}>\n                <T\n                  keyName=\"version.version-number\"\n                  defaultValue={'Version {versionNumber}'}\n                  params={{ versionNumber: latestVersions[stability].version }} /></a>\n              <div>{prettyDate(latestVersions[stability].created_at)}</div>\n            </div>\n            <div class=\"text-1xl col-span-3 h-auto w-auto p-2.5\">\n              <a\n                href=\"#top\"\n                onclick={() => installMod(modReference)}\n                title={$t('version.install.tooltip', 'Install via Satisfactory Mod Manager')}\n                class=\"text-yellow-500\">\n                <span class=\"material-icons align-middle\" style=\"font-size: 118x;\">download</span>\n                <u><T keyName=\"version.install\" defaultValue=\"Install\" /></u>\n              </a>\n            </div>\n          </div>\n          <VersionTargetSupportGrid targets={latestVersions[stability].targets} />\n          <VersionDependenciesGrid dependencies={latestVersions[stability].dependencies} />\n        {/if}\n      {/each}\n    </div>\n  </section>\n</div>\n\n<style lang=\"postcss\">\n  @reference \"../../../app.css\";\n\n  .version {\n    @apply grid grid-flow-col gap-x-4 text-lg;\n    grid-template-columns: max-content auto max-content;\n  }\n</style>\n","<script lang=\"ts\">\n  import type { User, UserMod } from '$lib/generated';\n  import { getTranslate } from '@tolgee/svelte';\n  import UserDisplay from '$lib/components/users/UserDisplay.svelte';\n\n  interface Props {\n    authors: Array<\n      Pick<UserMod, 'role'> & {\n        user?: Pick<User, 'id' | 'username' | 'avatar'>;\n      }\n    >;\n  }\n\n  let { authors }: Props = $props();\n\n  export const { t } = getTranslate();\n</script>\n\n<div class=\"card preset-filled-surface-100-900 p-4\">\n  <section>\n    <div class=\"grid grid-flow-row gap-y-2\">\n      <h3 class=\"my-4 text-2xl font-bold\">{$t('authors')}</h3>\n\n      <div class=\"grid auto-rows-min gap-y-4 text-lg\">\n        {#each authors as author (author.user.id)}\n          <UserDisplay\n            user={{ id: author.user.id, username: author.user.username, avatar: author.user.avatar }}\n            role={$t(`role.${author.role.toLowerCase()}`)} />\n        {/each}\n      </div>\n    </div>\n  </section>\n</div>\n","<script lang=\"ts\">\n  import { assets } from '$app/paths';\n  import type { CompatibilityInfoInput } from '$lib/generated';\n  import OutdatedBanner from '$lib/components/mods/compatibility/OutdatedBanner.svelte';\n\n  interface Props {\n    modLogo: string;\n    modName: string;\n    compatibility: CompatibilityInfoInput;\n  }\n\n  let { modLogo, modName, compatibility }: Props = $props();\n\n  let logo = $derived(modLogo || assets + '/images/no_image.webp');\n</script>\n\n<div class=\"relative overflow-hidden\">\n  <div class=\"w-full max-w-full sm:max-w-lg\">\n    <OutdatedBanner {compatibility} logo={true} />\n    <img class=\"rounded-lg\" src={logo} alt=\"Logo for {modName}\" />\n  </div>\n</div>\n","<script lang=\"ts\">\n  import { AnnouncementImportance, type Mod } from '$lib/generated';\n  import { markdown } from '$lib/utils/markdown';\n  import AnnouncementRow from '../announcements/AnnouncementRow.svelte';\n\n  interface Props {\n    mod: Pick<Mod, 'full_description' | 'short_description' | 'hidden'>;\n  }\n\n  let { mod }: Props = $props();\n\n  let description = $derived(mod.full_description ? markdown(mod.full_description) : mod.short_description);\n</script>\n\n<div>\n  {#if mod.hidden}\n    <div class=\"p-4\">\n      <AnnouncementRow\n        importance={AnnouncementImportance.Info}\n        message=\"This mod is hidden, which means it won't display in searches, and the Mod Manager will not display any view/download count or logo for it. A developer could choose to hide their mod for any number of reasons. Perhaps the mod is a library mod and not intended to be viewed directly, or maybe the developer doesn't want to develop the mod any more. Check the mod page for more information.\" />\n    </div>\n  {/if}\n  <div class=\"h-fit card preset-filled-surface-100-900 p-4\">\n    <section>\n      <div class=\"markdown-content break-words\">\n        {#await description then descriptionRendered}\n          <!-- eslint-disable -->\n          <p>{@html descriptionRendered}</p>\n        {/await}\n      </div>\n    </section>\n  </div>\n</div>\n","<script lang=\"ts\">\n  import { stopPropagation } from 'svelte/legacy';\n\n  import { GetModVersionsDocument } from '$lib/generated';\n  import { queryStore, getContextClient } from '@urql/svelte';\n  import { API_REST } from '$lib/core';\n  import { markdown } from '$lib/utils/markdown';\n  import { base } from '$app/paths';\n  import { installMod } from '$lib/stores/launcher';\n  import { prettyDate, prettyNumber, prettyBytes, prettyTarget } from '$lib/utils/formatting';\n  import { getTranslate } from '@tolgee/svelte';\n  import { Popover, Portal } from '@skeletonlabs/skeleton-svelte';\n\n  interface Props {\n    modId: string;\n  }\n\n  let { modId }: Props = $props();\n\n  export const { t } = getTranslate();\n\n  const client = getContextClient();\n\n  let expandedVersions = $state(new Set<string>());\n\n  // TODO Pagination\n  const versions = queryStore({\n    query: GetModVersionsDocument,\n    client,\n    variables: {\n      mod: modId,\n      limit: 100,\n      offset: 0\n    }\n  });\n\n  const toggleRow = (versionId: string) => {\n    if (expandedVersions.has(versionId)) {\n      expandedVersions.delete(versionId);\n    } else {\n      expandedVersions.add(versionId);\n    }\n    expandedVersions = expandedVersions;\n  };\n</script>\n\n<div class=\"h-fit card preset-filled-surface-100-900\">\n  {#if $versions.fetching}\n    <section class=\"p-4\">{$t('loading')}...</section>\n  {:else if $versions.error}\n    <section class=\"p-4\">{$t('error.oh-no')} {$versions.error.message}</section>\n  {:else}\n    <div class=\"table-container\">\n      <table class=\"table max-w-full\">\n        <thead>\n          <tr>\n            <th>{$t('version')}</th>\n            <th>{$t('game-versions')}</th>\n            <th>{$t('downloads')}</th>\n            <th>{$t('upload-date')}</th>\n            <th><!-- Buttons --></th>\n          </tr>\n        </thead>\n        <tbody>\n          {#each $versions.data.getMod.versions as version (version.id)}\n            <tr onclick={() => toggleRow(version.id)}>\n              <td>{version.version}</td>\n              <td>{version.game_version}</td>\n              <td>{prettyNumber(version.downloads)}</td>\n              <td>{prettyDate(version.created_at)}</td>\n              <td class=\"!overflow-visible !p-2\">\n                <div\n                  role=\"none\"\n                  class=\"grid grid-flow-col gap-4\"\n                  onclick={stopPropagation(() => {\n                    /*block table row expansion*/\n                  })}\n                  onkeypress={stopPropagation(() => {\n                    /*a11y-click-events-have-key-events*/\n                  })}>\n                  <a\n                    class=\"btn border border-primary-500 preset-tonal-primary btn-sm\"\n                    href={base + '/mod/' + modId + '/version/' + version.id}>{$t('view')}</a>\n                  {#if version.targets.length !== 0}\n                    <Popover>\n                      <Popover.Trigger\n                        class=\"btn border border-primary-500 preset-tonal-primary btn-sm\"\n                        title=\"Download a specific release target of this mod\">\n                        {$t('download')}\n                        <span class=\"material-icons\" style=\"margin: 0;\">arrow_drop_down</span>\n                      </Popover.Trigger>\n                      <Portal>\n                        <Popover.Positioner>\n                          <Popover.Content class=\"w-72 card preset-filled-surface-100-900 shadow-xl\">\n                            <nav class=\"list-nav\">\n                              <ul>\n                                <li>\n                                  <a href={API_REST + '/mod/' + modId + '/versions/' + version.id + '/download'}>\n                                    <span class=\"material-icons\">polyline</span>\n                                    <span>{$t('version.download-multi-target')}</span>\n                                  </a>\n                                </li>\n                                {#each version.targets as target, _ (target.targetName)}\n                                  <li>\n                                    <a\n                                      class=\"w-full\"\n                                      href={API_REST +\n                                        '/mod/' +\n                                        modId +\n                                        '/versions/' +\n                                        version.id +\n                                        '/' +\n                                        target.targetName +\n                                        '/download'}>\n                                      <span>{$t('download')} {prettyTarget(target.targetName)}</span>\n                                    </a>\n                                  </li>\n                                {/each}\n                              </ul>\n                            </nav>\n                          </Popover.Content>\n                        </Popover.Positioner>\n                      </Portal>\n                    </Popover>\n                  {:else}\n                    <a\n                      class=\"btn border border-primary-500 preset-tonal-primary btn-sm\"\n                      href={API_REST + '/mod/' + modId + '/versions/' + version.id + '/download'}>\n                      {$t('download')}\n                    </a>\n                  {/if}\n\n                  <button\n                    class=\"btn border border-primary-500 preset-tonal-primary btn-sm\"\n                    title=\"Install via Satisfactory Mod Manager\"\n                    onclick={() => installMod($versions.data.getMod.mod_reference)}>\n                    <span class=\"material-icons\">download</span>\n                    <span>{$t('install')}</span>\n                  </button>\n                </div>\n              </td>\n            </tr>\n\n            {#if expandedVersions.has(version.id)}\n              <tr>\n                <td colspan={6}>\n                  <div class=\"col-span-3 p-2\">{$t('size')}: {prettyBytes(version.size)}</div>\n                  <div class=\"col-span-3 p-2\">{$t('hash')}: {version.hash}</div>\n\n                  <div class=\"markdown-content col-span-6 p-2\">\n                    {#await markdown(version.changelog) then changelogRendered}\n                      <!-- eslint-disable -->\n                      {@html changelogRendered}\n                    {/await}\n                  </div>\n                </td>\n              </tr>\n            {/if}\n          {/each}\n        </tbody>\n      </table>\n    </div>\n  {/if}\n</div>\n","import type { Thing, WithContext } from 'schema-dts';\nimport type { Mod } from '$lib/generated';\nimport { assets } from '$app/paths';\n\nexport type Schema = Thing | WithContext<Thing>;\n\nexport function serializeSchema(schema: Schema) {\n  return `<script type=\"application/ld+json\">${JSON.stringify(schema)}</script>`;\n}\n\nexport const modSchema = (mod: Pick<Mod, 'name' | 'logo' | 'short_description'>): Schema => ({\n  '@context': 'https://schema.org',\n  '@type': 'CreativeWork',\n  image: mod.logo || assets + '/images/no_image.webp',\n  name: mod.name,\n  description: mod.short_description\n});\n","<script lang=\"ts\">\n  import type { CompatibilityInfoInput } from '$lib/generated';\n  import CompatibilityStateText from '$lib/components/mods/compatibility/CompatibilityStateText.svelte';\n  import { markdown } from '../../../utils/markdown';\n  import CompatibilityIcon from '$lib/components/mods/compatibility/CompatibilityIcon.svelte';\n  import CompatibilityModal from '$lib/modals/CompatibilityModal.svelte';\n  import { getTranslate } from '@tolgee/svelte';\n\n  interface Props {\n    compatibility: CompatibilityInfoInput;\n  }\n\n  let { compatibility }: Props = $props();\n\n  export const { t } = getTranslate();\n  export const noNotesText = $t('compatibility-info.no-notes');\n\n  let compatibilityOpen = $state(false);\n</script>\n\n<CompatibilityModal bind:open={compatibilityOpen} {compatibility}></CompatibilityModal>\n\n<div class=\"card preset-filled-surface-100-900 p-4\">\n  <div class=\"grid grid-flow-row gap-y-2\">\n    <h3 class=\"my-4 text-2xl font-bold\">{$t('compatibility-info.header')}</h3>\n    <p>{$t('compatibility-info.subtitle')}</p>\n    <div class=\"grid grid-flow-row\">\n      <table aria-label=\"Available Releases\" class=\"max-w-auto table !overflow-visible\">\n        <tbody>\n          <tr class=\"rounded border !border-surface-500\">\n            <td\n              ><div class=\"flex items-center justify-center\">\n                <CompatibilityIcon />{$t('compatibility-info.branch.stable')}\n              </div></td>\n            <td\n              ><div class=\"flex items-center justify-center\">\n                <CompatibilityIcon EXP={true} />{$t('compatibility-info.branch.unstable')}\n              </div></td>\n          </tr>\n          <tr class=\"rounded border !border-surface-500\">\n            <td class=\"text-center\">\n              <button\n                class=\"m-0 min-w-0\"\n                title={$t('tooltip.click-for-info')}\n                onclick={() => (compatibilityOpen = true)}>\n                <CompatibilityStateText state={compatibility?.EA?.state} />\n              </button>\n            </td>\n            <td class=\"text-center\">\n              <button\n                class=\"m-0 min-w-0\"\n                title={$t('tooltip.click-for-info')}\n                onclick={() => (compatibilityOpen = true)}>\n                <CompatibilityStateText state={compatibility?.EXP?.state} />\n              </button>\n            </td>\n          </tr>\n          <tr class=\"rounded border !border-surface-500\">\n            {#if compatibility}\n              <td>\n                <span style=\"padding: 2px; white-space:normal\">\n                  {#if compatibility?.EA?.note}\n                    {#await markdown(compatibility.EA.note) then rendered}\n                      <!-- eslint-disable-next-line svelte/no-at-html-tags -->\n                      {@html rendered}\n                    {/await}\n                  {:else}\n                    {noNotesText}\n                  {/if}\n                </span>\n              </td>\n              <td>\n                <span style=\"padding: 2px; white-space:normal\">\n                  {#if compatibility?.EXP?.note}\n                    {#await markdown(compatibility.EXP.note) then rendered}\n                      <!-- eslint-disable-next-line svelte/no-at-html-tags -->\n                      {@html rendered}\n                    {/await}\n                  {:else}\n                    {noNotesText}\n                  {/if}\n                </span>\n              </td>\n            {:else}\n              <td colspan=\"2\">\n                <span style=\"padding: 2px; white-space:normal\">\n                  {$t('compatibility-info.state.unknown.description')}\n                </span>\n              </td>\n            {/if}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n","<script lang=\"ts\">\n  import { getTranslate } from '@tolgee/svelte';\n  import EditCompatibilityForm from '$lib/components/mods/compatibility/EditCompatibilityForm.svelte';\n  import BaseModal from '$lib/components/general/BaseModal.svelte';\n  import type { ModData } from '$lib/models/mods';\n\n  interface Props {\n    mod: ModData & { id: string };\n    open: boolean;\n  }\n\n  let { mod, open = $bindable() }: Props = $props();\n\n  export const { t } = getTranslate();\n</script>\n\n<BaseModal bind:open>\n  <h2 class=\"text-2xl\">Edit Compatibility</h2>\n  <div>\n    <EditCompatibilityForm\n      modId={mod.id}\n      {mod}\n      on:fail={() => {\n        alert('Failed to update compatibility information, check browser console for more info.');\n      }}\n      on:submit={() => {\n        open = false;\n        location.reload();\n      }} />\n  </div>\n</BaseModal>\n","<script lang=\"ts\">\n  import { DeleteModDocument } from '$lib/generated';\n  import ModInfo from '$lib/components/mods/ModInfo.svelte';\n  import ModLatestVersions from '$lib/components/mods/ModLatestVersions.svelte';\n  import ModAuthors from '$lib/components/mods/ModAuthors.svelte';\n  import ModLogo from '$lib/components/mods/ModLogo.svelte';\n  import ModDescription from '$lib/components/mods/ModDescription.svelte';\n  import ModVersions from '$lib/components/mods/ModVersions.svelte';\n  import { user } from '$lib/stores/user';\n  import { goto } from '$app/navigation';\n  import { base } from '$app/paths';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n  import { modSchema, serializeSchema } from '$lib/utils/schema';\n  import CompatibilityGrid from '$lib/components/mods/compatibility/CompatibilityGrid.svelte';\n  import { getContextClient } from '@urql/svelte';\n  import type { PageData } from './$types';\n  import EditCompatibilityModal from '$lib/modals/EditCompatibilityModal.svelte';\n  import Page404 from '$lib/components/general/Page404.svelte';\n  import { getTranslate } from '@tolgee/svelte';\n  import { toaster } from '$lib/utils/toaster-svelte';\n  import BasicModal from '$lib/components/general/BasicModal.svelte';\n  import QueryStateHandler from '$lib/components/general/QueryStateHandler.svelte';\n\n  interface Props {\n    data: PageData;\n  }\n\n  let { data }: Props = $props();\n\n  const { t } = getTranslate();\n\n  let { modId, mod } = $derived(data);\n\n  const client = getContextClient();\n\n  let versionsTab = $state(false);\n\n  let canUserEdit = $derived(\n    $user?.roles?.deleteContent || $mod?.data?.mod?.authors?.findIndex((author) => author.user_id == $user?.id) >= 0\n  );\n  let canUserEditCompatibility = $derived($user?.roles?.editAnyModCompatibility || canUserEdit);\n\n  const deleteModFn = () => {\n    client\n      .mutation(DeleteModDocument, { modId: $mod.data.mod.id })\n      .toPromise()\n      .then((value) => {\n        if (value.error) {\n          console.error(value.error.message);\n          toaster.error({\n            title: 'Error deleting mod: ' + value.error.message,\n            duration: 0\n          });\n        } else {\n          toaster.success({\n            title: $t('mod.toast.mod-deleted'),\n            duration: 5000\n          });\n          goto(base + '/mods');\n        }\n      });\n  };\n\n  let deleteModalOpen = $state(false);\n  let editCompatibilityModalOpen = $state(false);\n</script>\n\n<svelte:head>\n  {#if !$mod.fetching && !$mod.error && $mod.data.mod}\n    <MetaDescriptors\n      description={$mod.data.mod.short_description}\n      title={$mod.data.mod.name}\n      image={$mod.data.mod.logo} />\n\n    <!-- eslint-disable -->\n    {@html serializeSchema(modSchema($mod.data.mod))}\n  {/if}\n</svelte:head>\n\n<QueryStateHandler query={mod}>\n  {#snippet empty()}\n    <Page404 />\n  {/snippet}\n\n  {#if $mod.data.mod}\n    <div class=\"xlx:grid-flow-row grid gap-6\">\n      <div class=\"flex h-auto flex-wrap items-center justify-between\">\n        <h1 class=\"text-4xl font-bold\">{$mod.data.mod.name}</h1>\n        <div>\n          {#if canUserEdit}\n            <button\n              class=\"btn border border-primary-500 preset-tonal-primary\"\n              onclick={() => goto(base + '/mod/' + modId + '/edit')}>\n              <span class=\"material-icons pr-2\">edit</span>\n              {$t('mod.edit')}</button>\n\n            <BasicModal\n              bind:open={deleteModalOpen}\n              title={$t('mod.modal.delete.title')}\n              body={$t('mod.modal.delete.text')}\n              buttonTextCancel=\"Cancel\"\n              buttonTextConfirm=\"Delete\"\n              confirm={deleteModFn} />\n            <button class=\"btn border border-primary-500 preset-tonal-primary\" onclick={() => (deleteModalOpen = true)}>\n              <span class=\"material-icons pr-2\">delete_forever</span>\n              {$t('mod.delete')}</button>\n            <button\n              class=\"btn border border-primary-500 preset-tonal-primary\"\n              onclick={() => goto(base + '/mod/' + modId + '/new-version')}>\n              <span class=\"material-icons pr-2\">upload_file</span>\n              {$t('mod.new-version')}</button>\n          {/if}\n          {#if canUserEditCompatibility}\n            <EditCompatibilityModal mod={$mod.data?.mod} bind:open={editCompatibilityModalOpen} />\n\n            <button\n              class=\"btn border border-primary-500 preset-tonal-primary\"\n              onclick={() => (editCompatibilityModalOpen = true)}>\n              <span class=\"material-icons\">rocket_launch</span>\n              <span class=\"material-icons pr-2\">science</span>\n              {$t('mod.edit-compatibility')}</button>\n          {/if}\n          <button\n            class=\"btn border border-primary-500 preset-tonal-primary\"\n            onclick={() => (versionsTab = !versionsTab)}>\n            {#if !versionsTab}\n              <span class=\"material-icons pr-2\" title=\"Browse all uploaded versions of this mod\">view_list</span>\n              {$t('mod.view-versions')}\n            {:else}\n              <span class=\"material-icons pr-2\" title=\"View the description page for this mod\">description</span>\n              {$t('mod.view-description')}\n            {/if}\n          </button>\n        </div>\n      </div>\n      <div class=\"grid-auto-max grid auto-cols-fr gap-4\">\n        {#if !versionsTab}\n          <ModDescription mod={$mod.data.mod} />\n        {:else}\n          <ModVersions modId={$mod.data.mod.id} />\n        {/if}\n        <div class=\"grid auto-rows-min grid-cols-1 gap-8\">\n          <div class=\"m-auto\">\n            <ModLogo\n              modLogo={$mod.data.mod.logo}\n              modName={$mod.data.mod.name}\n              compatibility={$mod.data.mod.compatibility} />\n          </div>\n          <ModLatestVersions\n            modId={$mod.data.mod.id}\n            modReference={$mod.data.mod.mod_reference}\n            latestVersions={$mod.data.mod.latestVersions} />\n          <CompatibilityGrid compatibility={$mod.data.mod.compatibility} />\n          <ModInfo mod={$mod.data.mod} />\n          <ModAuthors authors={$mod.data.mod.authors} />\n        </div>\n      </div>\n    </div>\n  {/if}\n</QueryStateHandler>\n"],"names":["prerender","load","params","parent","loadWaitForNoFetch","queryStore","GetModDocument","t","getTranslate","$.template_effect","$0","$.set_text","text_2","$t","$$render","consequent","alternate","prettyDate","prettyNumber","stabilities","$.validate_each_keys","stability","$$anchor","$$props","installMod","text","base","author","$.each","div_2","$.get","$1","$.derived","logo","$.tag","assets","description","markdown","AnnouncementImportance","$.await","node_2","descriptionRendered","client","getContextClient","expandedVersions","versions","GetModVersionsDocument","toggleRow","versionId","$.set","text_1","$versions","version","tbody","event_handler","stopPropagation","event_handler_1","text_11","target","$.set_attribute","a_2","API_REST","prettyTarget","$.strict_equals","consequent_2","button","node_9","changelogRendered","text_17","$2","prettyBytes","consequent_3","text_6","text_7","a","consequent_1","alternate_1","alternate_2","serializeSchema","schema","modSchema","mod","noNotesText","compatibilityOpen","$$value","CompatibilityGrid","button_1","node_7","rendered","node_10","open","$.prop","modId","versionsTab","canUserEdit","$user","$mod","$.equals","canUserEditCompatibility","deleteModFn","DeleteModDocument","value","$.log_if_contains_state","toaster","goto","deleteModalOpen","editCompatibilityModalOpen","$.html","button_2","button_3","text_4","button_4","text_5","consequent_4","consequent_5"],"mappings":"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"}