import{I as it,a as pt,p as vt,Y as ct,J as $,f as lt,g as u,K as mt,k as i,h as ut,m as l,a4 as T,q as m,r as gt,t as _t,N as F,O as G,n as H,u as t,L as o,a9 as ft,C as bt,U as ht,S as s,a0 as I,a1 as P,ah as yt,af as Mt,F as v,y as g,G as $t,aw as Pt,z as x,a8 as N,a7 as xt}from"../chunks/C90Be9iR.js";import{k as Dt,l as kt,m as Ut}from"../chunks/C2xQDKU4.js";import{M as wt}from"../chunks/DN0KTx-o.js";import{a as qt}from"../chunks/DomivD8e.js";import{P as O}from"../chunks/DUgkpesX.js";import{Q as At}from"../chunks/LDwLMLnf.js";e[v]="src/routes/admin/unapproved-mods/+page.svelte";var St=u(g('<div class="mb-5 ml-auto flex justify-end"><div><!></div></div>'),e[v],[[58,2,[[59,4]]]]),Tt=u(g('<section class="p-4">Loading...</section>'),e[v],[[68,6]]),zt=u(g('<section class="p-4"> </section>'),e[v],[[72,6]]),Ct=u(g('<tr><td> </td><td> </td><td> </td><td class="!p-2.5"><div class="grid grid-flow-col gap-4"><button class="btn border border-primary-500 preset-tonal-primary btn-sm">Approve</button> <button class="btn border border-primary-500 preset-tonal-primary btn-sm">Deny</button> <a class="btn border border-primary-500 preset-tonal-primary btn-sm">View</a></div></td></tr>'),e[v],[[86,10,[[87,12],[88,12],[89,12],[90,12,[[91,14,[[92,16],[95,16],[98,16]]]]]]]]),Lt=u(g('<table class="table max-w-full"><thead><tr><th>Mod</th><th>Description</th><th>Release Date</th><th></th></tr></thead><tbody></tbody></table>'),e[v],[[75,4,[[76,6,[[77,8,[[78,10],[79,10],[80,10],[81,10]]]]],[84,6]]]]),Qt=u(g('<div class="mt-5 ml-auto flex justify-end"><div><!></div></div>'),e[v],[[110,2,[[111,4]]]]),jt=u(g('<h1 class="svelte-c9dzu1">Unapproved Mods</h1> <!> <div class="card preset-filled-surface-100-900"><!></div> <!>',1),e[v],[[55,0],[65,0]]);function e(J,K){pt(new.target),vt(K,!0,e);const D=()=>($t(t(c),"mods"),bt(t(c),"$mods",R)),[R,V]=_t(),k=ct();let _=$(F(20),"perPage"),b=$(F(0),"page"),c=$(G(()=>Pt({query:Ut,client:k,variables:{filter:{offset:t(b)*t(_),limit:t(_)}}})),"mods"),y=$(G(()=>D()?.data?.getUnapprovedMods?.count),"totalMods");const Y=a=>{k.mutation(Dt,{modId:a}).toPromise().then(()=>{t(c).pause(),t(c).resume()})},B=a=>{k.mutation(kt,{modId:a}).toPromise().then(()=>{t(c).pause(),t(c).resume()})};var W={...lt()},z=jt();mt("c9dzu1",a=>{l(()=>wt(a,{description:"Unapproved mods",title:"Admin: Unapproved Mods"}),"component",e,52,2,{componentTag:"MetaDescriptors"})});var C=i(ut(z),2);{var X=a=>{var n=St(),d=o(n),p=o(d);l(()=>O(p,{get total(){return t(y)},get page(){return t(b)},set page(r){x(b,r,!0)},get perPage(){return t(_)},set perPage(r){x(_,r,!0)}}),"component",e,60,6,{componentTag:"Pager"}),s(d),s(n),m(a,n)};l(()=>H(C,a=>{t(y)&&a(X)}),"if",e,57,0)}var U=i(C,2),Z=o(U);{const a=T(e,function(d){N(...arguments);var p=Tt();m(d,p)}),n=T(e,function(d,p=xt){N(...arguments);var r=zt(),M=o(r);s(r),I(()=>P(M,`Oh no... ${p().message??""}`)),m(d,r)});l(()=>At(Z,{get query(){return t(c)},loading:a,error:n,children:T(e,(d,p)=>{var r=Lt(),M=i(o(r));ft(()=>D().data.getUnapprovedMods.mods,h=>h.id),l(()=>ht(M,5,()=>D().data.getUnapprovedMods.mods,h=>h.id,(h,f)=>{var w=Ct(),q=o(w),rt=o(q,!0);s(q);var A=i(q),st=o(A,!0);s(A);var S=i(A),ot=o(S,!0);s(S);var L=i(S),Q=o(L),j=o(Q);j.__click=()=>Y(t(f).id);var E=i(j,2);E.__click=()=>B(t(f).id);var dt=i(E,2);s(Q),s(L),s(w),I(nt=>{P(rt,t(f).name),P(st,t(f).short_description),P(ot,nt),yt(dt,"href",Mt+"/mod/"+t(f).id)},[()=>qt(t(f).created_at)]),m(h,w)}),"each",e,85,8),s(M),s(r),m(d,r)}),$$slots:{loading:!0,error:!0,default:!0}}),"component",e,66,2,{componentTag:"QueryStateHandler"})}s(U);var tt=i(U,2);{var et=a=>{var n=Qt(),d=o(n),p=o(d);l(()=>O(p,{get total(){return t(y)},get page(){return t(b)},set page(r){x(b,r,!0)},get perPage(){return t(_)},set perPage(r){x(_,r,!0)}}),"component",e,112,6,{componentTag:"Pager"}),s(d),s(n),m(a,n)};l(()=>H(tt,a=>{t(y)&&a(et)}),"if",e,109,0)}m(J,z);var at=gt(W);return V(),at}it(["click"]);export{e as component};
//# sourceMappingURL=7.BnR1cQ4U.js.map
