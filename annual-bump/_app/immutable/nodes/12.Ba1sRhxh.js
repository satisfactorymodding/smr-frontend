import{as as Me,a as re,p as se,W as he,f as oe,g as I,L as e,R as t,k as l,ab as Te,_ as H,C as J,a0 as h,q as n,r as ie,t as de,G as K,F as v,y as k,aH as Ce,ap as Ae,af as ae,I as Ee,J as U,X as Oe,D as W,K as Pe,h as L,m as d,O as te,N as qe,n as N,u as G,A as Fe,P as je,Q as Be,ae as pe,z as me,ad as Le}from"../chunks/C6V5fW-3.js";import{q as Ne,I as Se}from"../chunks/Bj1PSOzY.js";import{l as ze}from"../chunks/Bi2QyF3C.js";import{a as Ue}from"../chunks/CwkDO0EH.js";import{u as _e}from"../chunks/BRQD3YPY.js";import{m as We}from"../chunks/CkAV2acv.js";import{M as He}from"../chunks/B7wvMWpi.js";import{P as Je}from"../chunks/E4_FIZmT.js";import{t as fe}from"../chunks/BLzR2Xnx.js";import{B as Ke}from"../chunks/DirYF3zW.js";const Qe=!1,Re=async({params:m,parent:o})=>({...m,...await ze({guide:Me({query:Ne,client:(await o()).client,variables:{guide:m.guideId}})})}),gt=Object.freeze(Object.defineProperty({__proto__:null,load:Re,prerender:Qe},Symbol.toStringTag,{value:"Module"}));Q[v]="src/lib/components/guides/GuideInfo.svelte";var Xe=I(k('<div class="card preset-filled-surface-100-900 p-4"><section><div class="text-lg"><h3 class="my-4 text-2xl font-bold"> </h3> <span><strong> </strong> </span><br/></div></section></div>'),Q[v],[[15,0,[[16,2,[[17,4,[[18,6],[19,6,[[19,12]]],[19,92]]]]]]]]);function Q(m,o){re(new.target),se(o,!0,Q);const _=()=>(K(c,"t"),J(c,"$t",a)),[a,D]=de(),{t:c}=he();var M={get t(){return c},...oe()},u=Xe(),b=e(u),x=e(b),g=e(x),w=e(g,!0);t(g);var y=l(g,2),p=e(y),T=e(p);t(p);var C=l(p);t(y),Te(),t(x),t(b),t(u),H((q,s,i)=>{h(w,q),h(T,`${s??""}:`),h(C,` ${i??""}`)},[()=>_()("entry.info"),()=>_()("entry.created-at"),()=>Ue(o.guide.created_at)]),n(m,u);var f=ie(M);return D(),f}R[v]="src/lib/components/guides/GuideAuthor.svelte";var Ve=I(k('<div class="card preset-filled-surface-100-900 p-4"><section><div class="grid grid-flow-row gap-y-2"><h3 class="my-4 text-2xl font-bold"> </h3> <div class="grid auto-rows-min gap-y-4 text-lg"><div class="grid auto-cols-min grid-flow-col gap-x-4"><div class="h-14 w-14 rounded-full bg-cover"></div> <div class="grid grid-flow-row"><a class="text-yellow-500 underline"> </a> <div> </div></div></div></div></div></section></div>'),R[v],[[15,0,[[16,2,[[17,4,[[18,6],[20,6,[[21,8,[[22,10],[23,10,[[24,12],[25,12]]]]]]]]]]]]]]);function R(m,o){re(new.target),se(o,!0,R);const _=()=>(K(c,"t"),J(c,"$t",a)),[a,D]=de(),{t:c}=he();var M={get t(){return c},...oe()},u=Ve(),b=e(u),x=e(b),g=e(x),w=e(g,!0);t(g);var y=l(g,2),p=e(y),T=e(p),C=l(T,2),f=e(C),q=e(f,!0);t(f);var s=l(f,2),i=e(s,!0);t(s),t(C),t(p),t(y),t(x),t(b),t(u),H((j,$)=>{h(w,j),Ce(T,`background-image: url("${o.author.avatar}")`),Ae(f,"href",`${ae??""}/user/${o.author.id??""}/`),h(q,o.author.username),h(i,$)},[()=>_()("author"),()=>_()("role.writer")]),n(m,u);var F=ie(M);return D(),F}r[v]="src/routes/guide/[guideId]/+page.svelte";var Ye=I(k("<p>Loading...</p>"),r[v],[[58,2]]),Ze=I(k("<p> </p>"),r[v],[[60,2]]),et=I(k('<button class="btn border border-primary-500 preset-tonal-primary"><span class="material-icons pr-2">edit</span> Edit</button> <!> <button class="btn border border-primary-500 preset-tonal-primary"><span class="material-icons pr-2">delete</span> Delete</button>',1),r[v],[[68,10,[[71,12]]],[81,10,[[82,12]]]]),tt=I(k("<p><!></p>"),r[v],[[93,14]]),at=I(k('<div class="xlx:grid-flow-row grid gap-6"><div class="flex h-auto flex-wrap items-center justify-between"><h1 class="text-4xl font-bold"> </h1> <div><!></div></div> <div class="grid-auto-max grid auto-cols-fr gap-4"><div class="h-fit card preset-filled-surface-100-900 p-4"><section><div class="markdown-content break-words"><!></div></section></div> <div class="grid auto-rows-min grid-cols-1 gap-8"><!> <!></div></div></div>'),r[v],[[62,2,[[63,4,[[64,6],[66,6]]],[87,4,[[88,6,[[89,8,[[90,10]]]]],[98,6]]]]]]);function r(m,o){re(new.target),se(o,!0,r);const _=()=>(K(_e,"user"),J(_e,"$user",D)),a=()=>(K(G(u),"guide"),J(G(u),"$guide",D)),[D,c]=de();let M=U(te(()=>o.data.guideId),"guideId"),u=U(te(()=>o.data.guide),"guide");const b=Oe();let x=U(te(()=>_()?.roles?.deleteContent||Fe(_()?.id,a()?.data?.getGuide?.user?.id)),"canUserEdit");const g=()=>{b.mutation(Se,{guideId:G(M)}).toPromise().then(s=>{s.error?(console.error(...Le("error",s.error.message)),fe.error({description:"Error deleting guide: "+s.error.message})):(fe.success({description:"Guide deleted",duration:5e3}),pe(ae+"/guides"))})};let w=U(qe(!1),"deleteModalOpen");var y={...oe()},p=W();Pe(s=>{var i=W(),F=L(i);{var j=$=>{d(()=>He($,{get description(){return a().data.getGuide.short_description},get title(){return a().data.getGuide.name}}),"component",r,53,4,{componentTag:"MetaDescriptors"})};d(()=>N(F,$=>{!a().fetching&&!a().error&&a().data.getGuide&&$(j)}),"if",r,52,2)}n(s,i)});var T=L(p);{var C=s=>{var i=Ye();n(s,i)},f=s=>{var i=W(),F=L(i);{var j=A=>{var E=Ze(),X=e(E);t(E),H(()=>h(X,`Oh no... ${a().error.message??""}`)),n(A,E)},$=A=>{var E=W(),X=L(E);{var be=O=>{var V=at(),Y=e(V),Z=e(Y),we=e(Z,!0);t(Z);var ne=l(Z,2),ye=e(ne);{var $e=B=>{var S=et(),P=L(S);P.__click=()=>pe(ae+"/guide/"+G(M)+"/edit");var z=l(P,2);d(()=>Ke(z,{title:"Delete guide?",body:"Are you sure you wish to delete this guide?",buttonTextCancel:"Cancel",buttonTextConfirm:"Delete",confirm:g,get open(){return G(w)},set open(De){me(w,De,!0)}}),"component",r,74,10,{componentTag:"BasicModal"});var ke=l(z,2);ke.__click=()=>me(w,!0),n(B,S)};d(()=>N(ye,B=>{G(x)&&B($e)}),"if",r,67,8)}t(ne),t(Y);var le=l(Y,2),ee=e(le),ue=e(ee),ve=e(ue),Ge=e(ve);d(()=>je(Ge,()=>We(a().data.getGuide.guide),null,(B,S)=>{var P=tt(),z=e(P);Be(z,()=>G(S)),t(P),n(B,P)}),"await",r,91,12),t(ve),t(ue),t(ee);var ce=l(ee,2),ge=e(ce);d(()=>Q(ge,{get guide(){return a().data.getGuide}}),"component",r,99,8,{componentTag:"GuideInfo"});var Ie=l(ge,2);d(()=>R(Ie,{get author(){return a().data.getGuide.user}}),"component",r,100,8,{componentTag:"GuideAuthor"}),t(ce),t(le),t(V),H(()=>h(we,a().data.getGuide.name)),n(O,V)},xe=O=>{d(()=>Je(O,{}),"component",r,105,2,{componentTag:"Page404"})};d(()=>N(X,O=>{a().data.getGuide?O(be):O(xe,!1)},!0),"if",r,61,0)}n(A,E)};d(()=>N(F,A=>{a().error?A(j):A($,!1)},!0),"if",r,59,0)}n(s,i)};d(()=>N(T,s=>{a().fetching?s(C):s(f,!1)}),"if",r,57,0)}n(m,p);var q=ie(y);return c(),q}Ee(["click"]);export{r as component,gt as universal};
//# sourceMappingURL=12.Ba1sRhxh.js.map
