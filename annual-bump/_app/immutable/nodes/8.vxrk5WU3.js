import{I as ve,a as le,p as ce,Y as me,J as P,f as ue,g as _,K as _e,k as d,h as ge,m,a4 as S,q as u,r as fe,t as be,N as F,O as G,n as H,u as e,L as s,a9 as he,C as ye,U as $e,S as r,a0 as N,a1 as V,ah as O,af as Pe,F as l,y as g,G as Ve,a7 as xe,a8 as R,aw as De,z as x}from"../chunks/Zigv8uwj.js";import{n as qe,o as we,p as Ue}from"../chunks/C2xQDKU4.js";import{a as ke}from"../chunks/CDGGhnbA.js";import"../chunks/CIk8Whsi.js";import{M as Ae}from"../chunks/DkMqSqQ8.js";import{a as Me}from"../chunks/DomivD8e.js";import{P as z}from"../chunks/6BTxjpPg.js";import{Q as Se}from"../chunks/BN6MyBkq.js";t[l]="src/routes/admin/unapproved-versions/+page.svelte";var Te=_(g('<div class="mb-5 ml-auto flex justify-end"><div><!></div></div>'),t[l],[[59,2,[[60,4]]]]),Ce=_(g('<section class="p-4">Loading...</section>'),t[l],[[69,6]]),Ee=_(g('<section class="p-4"> </section>'),t[l],[[73,6]]),Ie=_(g('<tr><td> </td><td> </td><td> </td><td class="!p-2.5"><div class="grid grid-flow-col gap-4"><button class="btn border border-primary-500 preset-tonal-primary">Approve</button> <button class="btn border border-primary-500 preset-tonal-primary">Deny</button> <a class="btn border border-primary-500 preset-tonal-primary">Download</a> <a class="btn border border-primary-500 preset-tonal-primary">View</a></div></td></tr>'),t[l],[[87,10,[[88,12],[89,12],[90,12],[91,12,[[92,14,[[93,16],[96,16],[99,16],[104,16]]]]]]]]),Le=_(g('<table class="table max-w-full"><thead><tr><th>Mod</th><th>Version</th><th>Release Date</th><th></th></tr></thead><tbody></tbody></table>'),t[l],[[76,4,[[77,6,[[78,8,[[79,10],[80,10],[81,10],[82,10]]]]],[85,6]]]]),Qe=_(g('<div class="mt-5 ml-auto flex justify-end"><!></div>'),t[l],[[119,2]]),je=_(g('<h1 class="svelte-qyqh9t">Unapproved Versions</h1> <!> <div class="card preset-filled-surface-100-900"><!></div> <!>',1),t[l],[[56,0],[66,0]]);function t(J,K){le(new.target),ce(K,!0,t);const D=()=>(Ve(e(c),"versions"),ye(e(c),"$versions",Y)),[Y,B]=be(),q=me();let f=P(F(20),"perPage"),b=P(F(1),"page"),c=P(G(()=>De({query:Ue,client:q,variables:{filter:{offset:(e(b)-1)*e(f),limit:e(f)}}})),"versions"),y=P(G(()=>D()?.data?.getUnapprovedVersions?.count),"totalVersions");const W=a=>{q.mutation(qe,{versionId:a}).toPromise().then(()=>{e(c).pause(),e(c).resume()})},X=a=>{q.mutation(we,{versionId:a}).toPromise().then(()=>{e(c).pause(),e(c).resume()})};var Z={...ue()},T=je();_e("qyqh9t",a=>{m(()=>Ae(a,{description:"Unapproved mod versions",title:"Admin: Unapproved Versions"}),"component",t,53,2,{componentTag:"MetaDescriptors"})});var C=d(ge(T),2);{var ee=a=>{var p=Te(),n=s(p),i=s(n);m(()=>z(i,{get total(){return e(y)},get page(){return e(b)},set page(o){x(b,o,!0)},get perPage(){return e(f)},set perPage(o){x(f,o,!0)}}),"component",t,61,6,{componentTag:"Pager"}),r(n),r(p),u(a,p)};m(()=>H(C,a=>{e(y)&&a(ee)}),"if",t,58,0)}var w=d(C,2),te=s(w);{const a=S(t,function(n){R(...arguments);var i=Ce();u(n,i)}),p=S(t,function(n,i=xe){R(...arguments);var o=Ee(),$=s(o);r(o),N(()=>V($,`Oh no... ${i().message??""}`)),u(n,o)});m(()=>Se(te,{get query(){return e(c)},loading:a,error:p,children:S(t,(n,i)=>{var o=Le(),$=d(s(o));he(()=>D().data.getUnapprovedVersions.versions,h=>h.id),m(()=>$e($,5,()=>D().data.getUnapprovedVersions.versions,h=>h.id,(h,v)=>{var U=Ie(),k=s(U),oe=s(k,!0);r(k);var A=d(k),ne=s(A,!0);r(A);var M=d(A),ie=s(M,!0);r(M);var E=d(M),I=s(E),L=s(I);L.__click=()=>W(e(v).id);var Q=d(L,2);Q.__click=()=>X(e(v).id);var j=d(Q,2),de=d(j,2);r(I),r(E),r(U),N(pe=>{V(oe,e(v).mod.name),V(ne,e(v).version),V(ie,pe),O(j,"href",ke+"/mod/"+e(v).mod_id+"/versions/"+e(v).id+"/download"),O(de,"href",Pe+"/mod/"+e(v).mod_id+"/version/"+e(v).id)},[()=>Me(e(v).created_at)]),u(h,U)}),"each",t,86,8),r($),r(o),u(n,o)}),$$slots:{loading:!0,error:!0,default:!0}}),"component",t,67,2,{componentTag:"QueryStateHandler"})}r(w);var ae=d(w,2);{var re=a=>{var p=Qe(),n=s(p);m(()=>z(n,{get total(){return e(y)},get page(){return e(b)},set page(i){x(b,i,!0)},get perPage(){return e(f)},set perPage(i){x(f,i,!0)}}),"component",t,120,4,{componentTag:"Pager"}),r(p),u(a,p)};m(()=>H(ae,a=>{e(y)&&a(re)}),"if",t,118,0)}u(J,T);var se=fe(Z);return B(),se}ve(["click"]);export{t as component};
//# sourceMappingURL=8.vxrk5WU3.js.map
