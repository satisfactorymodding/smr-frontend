import{I as U,a as W,p as Y,J as G,X as Z,f as ee,g as x,K as te,h,m as s,z as D,k as y,q as d,r as ae,t as re,O as F,N as oe,D as S,n as k,C as se,L as c,u as i,F as g,y as M,G as ie,ae as q,af as j,as as ne,R as u,_ as de,a0 as ce,ad as ue}from"../chunks/C6V5fW-3.js";import{q as ge,r as pe}from"../chunks/Bj1PSOzY.js";import{G as le}from"../chunks/B51zPAbQ.js";import{M as me}from"../chunks/B7wvMWpi.js";import{t as L}from"../chunks/BLzR2Xnx.js";import{B as ve}from"../chunks/DirYF3zW.js";const fe=async({params:p})=>({...p}),Ie=Object.freeze(Object.defineProperty({__proto__:null,load:fe},Symbol.toStringTag,{value:"Module"}));a[g]="src/routes/guide/[guideId]/edit/+page.svelte";var _e=x(M("<p>Loading...</p>"),a[g],[[88,6]]),be=x(M("<p> </p>"),a[g],[[90,6]]),Ge=x(M('<div class="flex h-auto flex-wrap items-center justify-between"><h1 class="my-4 text-4xl font-bold">Edit Guide</h1> <div><!> <button class="btn border border-primary-500 preset-tonal-primary"><span class="material-icons pr-2">arrow_back</span> Back to Guide</button></div></div> <div class="card preset-filled-surface-100-900 p-4"><section><!></section></div>',1),a[g],[[69,0,[[70,2],[71,2,[[79,4,[[80,6]]]]]]],[85,0,[[86,2]]]]);function a(p,E){W(new.target),Y(E,!0,a);const r=()=>(ie(i($),"guide"),se(i($),"$guide",z)),[z,A]=re();let l=G(F(()=>E.data.guideId),"guideId");const I=Z();let $=G(F(()=>ne({query:ge,client:I,variables:{guide:i(l)}})),"guide");const K=e=>{I.mutation(pe,{guideId:i(l),guide:e}).toPromise().then(t=>{t.error?(console.error(...ue("error",t.error.message)),L.error({description:"Error editing guide: "+t.error.message})):(L.success({description:"Guide updated",duration:5e3}),q(j+"/guide/"+t.data.updateGuide.id))})},N=()=>{q(j+"/guide/"+i(l))};let m=G(oe(!1),"backModalOpen");var P={...ee()},B=Ge();te(e=>{var t=S(),f=h(t);{var _=n=>{s(()=>me(n,{get description(){return`Editing guide '${r().data.getGuide.short_description??""}'`},get title(){return`Edit guide '${r().data.getGuide.name??""}'`}}),"component",a,63,4,{componentTag:"MetaDescriptors"})};s(()=>k(f,n=>{!r().fetching&&!r().error&&r().data.getGuide&&n(_)}),"if",a,62,2)}d(e,t)});var v=h(B),T=y(c(v),2),w=c(T);s(()=>ve(w,{title:"Go Back?",body:"Going back will discard any unsaved changes. Are you sure you wish to continue?",buttonTextCancel:"Keep Editing",buttonTextConfirm:"Go Back",confirm:N,get open(){return i(m)},set open(e){D(m,e,!0)}}),"component",a,72,4,{componentTag:"BasicModal"});var J=y(w,2);J.__click=()=>D(m,!0),u(T),u(v);var O=y(v,2),C=c(O),R=c(C);{var V=e=>{var t=_e();d(e,t)},X=e=>{var t=S(),f=h(t);{var _=o=>{var b=be(),Q=c(b);u(b),de(()=>ce(Q,`Oh no... ${r().error.message??""}`)),d(o,b)},n=o=>{s(()=>le(o,{onSubmit:K,get initialValues(){return r().data.getGuide},submitText:"Save",submitIcon:"save"}),"component",a,92,6,{componentTag:"GuideForm"})};s(()=>k(f,o=>{r().error?o(_):o(n,!1)},!0),"if",a,89,4)}d(e,t)};s(()=>k(R,e=>{r().fetching?e(V):e(X,!1)}),"if",a,87,4)}u(C),u(O),d(p,B);var H=ae(P);return A(),H}U(["click"]);export{a as component,Ie as universal};
//# sourceMappingURL=13.CB4esWw-.js.map
