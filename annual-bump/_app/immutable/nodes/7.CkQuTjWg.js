import{I as ct,a as lt,p as mt,X as _t,J as k,f as ut,g as m,K as gt,k as n,h as O,m as i,q as p,r as ft,t as bt,N as R,O as J,n as U,u as t,L as s,C as ht,F as v,y as _,G as yt,as as Mt,z as $,R as r,D as Pt,_ as K,a0 as w,a9 as xt,T as Dt,ap as kt,af as Ut}from"../chunks/C6V5fW-3.js";import{k as $t,l as wt,m as At}from"../chunks/Bj1PSOzY.js";import{M as Tt}from"../chunks/B7wvMWpi.js";import{a as qt}from"../chunks/CwkDO0EH.js";import{P as S}from"../chunks/DH0mjSAS.js";a[v]="src/routes/admin/unapproved-mods/+page.svelte";var Ct=m(_('<div class="mb-5 ml-auto flex justify-end"><div><!></div></div>'),a[v],[[57,2,[[58,4]]]]),Lt=m(_('<section class="p-4">Loading...</section>'),a[v],[[66,4]]),jt=m(_('<section class="p-4"> </section>'),a[v],[[68,4]]),zt=m(_('<tr><td> </td><td> </td><td> </td><td class="!p-2.5"><div class="grid grid-flow-col gap-4"><button class="btn border border-primary-500 preset-tonal-primary btn-sm">Approve</button> <button class="btn border border-primary-500 preset-tonal-primary btn-sm">Deny</button> <a class="btn border border-primary-500 preset-tonal-primary btn-sm">View</a></div></td></tr>'),a[v],[[81,10,[[82,12],[83,12],[84,12],[85,12,[[86,14,[[87,16],[90,16],[93,16]]]]]]]]),Et=m(_('<table class="table max-w-full"><thead><tr><th>Mod</th><th>Description</th><th>Release Date</th><th></th></tr></thead><tbody></tbody></table>'),a[v],[[70,4,[[71,6,[[72,8,[[73,10],[74,10],[75,10],[76,10]]]]],[79,6]]]]),Ft=m(_('<div class="mt-5 ml-auto flex justify-end"><div><!></div></div>'),a[v],[[105,2,[[106,4]]]]),Gt=m(_('<h1 class="svelte-c9dzu1">Unapproved Mods</h1> <!> <div class="card preset-filled-surface-100-900"><!></div> <!>',1),a[v],[[54,0],[64,0]]);function a(V,X){lt(new.target),mt(X,!0,a);const u=()=>(yt(t(f),"mods"),ht(t(f),"$mods",B)),[B,H]=bt(),A=_t();let g=k(R(20),"perPage"),y=k(R(0),"page"),f=k(J(()=>Mt({query:$t,client:A,variables:{filter:{offset:t(y)*t(g),limit:t(g)}}})),"mods"),x=k(J(()=>u()?.data?.getUnapprovedMods?.count),"totalMods");const Q=e=>{A.mutation(wt,{modId:e}).toPromise().then(()=>{t(f).pause(),t(f).resume()})},W=e=>{A.mutation(At,{modId:e}).toPromise().then(()=>{t(f).pause(),t(f).resume()})};var Y={...ut()},z=Gt();gt(e=>{i(()=>Tt(e,{description:"Unapproved mods",title:"Admin: Unapproved Mods"}),"component",a,51,2,{componentTag:"MetaDescriptors"})});var E=n(O(z),2);{var Z=e=>{var o=Ct(),c=s(o),M=s(c);i(()=>S(M,{get total(){return t(x)},get page(){return t(y)},set page(d){$(y,d,!0)},get perPage(){return t(g)},set perPage(d){$(g,d,!0)}}),"component",a,59,6,{componentTag:"Pager"}),r(c),r(o),p(e,o)};i(()=>U(E,e=>{t(x)&&e(Z)}),"if",a,56,0)}var T=n(E,2),tt=s(T);{var et=e=>{var o=Lt();p(e,o)},at=e=>{var o=Pt(),c=O(o);{var M=b=>{var l=jt(),D=s(l);r(l),K(()=>w(D,`Oh no... ${u().error.message??""}`)),p(b,l)},d=b=>{var l=Et(),D=n(s(l));xt(()=>u().data.getUnapprovedMods.mods,P=>P.id),i(()=>Dt(D,5,()=>u().data.getUnapprovedMods.mods,P=>P.id,(P,h)=>{var q=zt(),C=s(q),dt=s(C,!0);r(C);var L=n(C),nt=s(L,!0);r(L);var j=n(L),it=s(j,!0);r(j);var F=n(j),G=s(F),I=s(G);I.__click=()=>Q(t(h).id);var N=n(I,2);N.__click=()=>W(t(h).id);var pt=n(N,2);r(G),r(F),r(q),K(vt=>{w(dt,t(h).name),w(nt,t(h).short_description),w(it,vt),kt(pt,"href",Ut+"/mod/"+t(h).id)},[()=>qt(t(h).created_at)]),p(P,q)}),"each",a,80,8),r(D),r(l),p(b,l)};i(()=>U(c,b=>{u().error?b(M):b(d,!1)},!0),"if",a,67,2)}p(e,o)};i(()=>U(tt,e=>{u().fetching?e(et):e(at,!1)}),"if",a,65,2)}r(T);var rt=n(T,2);{var st=e=>{var o=Ft(),c=s(o),M=s(c);i(()=>S(M,{get total(){return t(x)},get page(){return t(y)},set page(d){$(y,d,!0)},get perPage(){return t(g)},set perPage(d){$(g,d,!0)}}),"component",a,107,6,{componentTag:"Pager"}),r(c),r(o),p(e,o)};i(()=>U(rt,e=>{t(x)&&e(st)}),"if",a,104,0)}p(V,z);var ot=ft(Y);return H(),ot}ct(["click"]);export{a as component};
//# sourceMappingURL=7.CkQuTjWg.js.map
