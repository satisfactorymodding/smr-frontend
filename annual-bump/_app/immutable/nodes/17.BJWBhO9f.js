import{t as z,u as A}from"../chunks/Bj1PSOzY.js";import{l as J}from"../chunks/Bi2QyF3C.js";import{as as K,a as R,p as W,X,J as _,f as B,g as x,K as H,k as Q,h as v,m as i,q as n,r as U,t as Y,O as h,D,n as M,C as Z,L as b,F as l,y as E,G as ee,u as m,R as y,_ as te,a0 as ae,am as oe,ad as re,ae as se,af as de}from"../chunks/aDZdp7_x.js";import{M as ie}from"../chunks/C6BfHsV3.js";import{M as ne}from"../chunks/C0Ue59i3.js";import{t as S}from"../chunks/Ci59I3ld.js";const me=async({params:c,parent:s})=>({...c,...await J({mod:K({query:z,client:(await s()).client,variables:{mod:c.modId},requestPolicy:"network-only"})})}),Me=Object.freeze(Object.defineProperty({__proto__:null,load:me},Symbol.toStringTag,{value:"Module"}));o[l]="src/routes/mod/[modId]/edit/+page.svelte";var ce=x(E("<p>Loading...</p>"),o[l],[[70,6]]),le=x(E("<p> </p>"),o[l],[[72,6]]),pe=x(E('<h1 class="my-4 text-4xl font-bold">Edit Mod</h1> <div class="card preset-filled-surface-100-900 p-4"><section><!></section></div>',1),o[l],[[65,0],[67,0,[[68,2]]]]);function o(c,s){R(new.target),W(s,!0,o);const e=()=>(ee(m(p),"mod"),Z(m(p),"$mod",k)),[k,q]=Y(),w=X();let O=_(h(()=>s.data.modId),"modId"),p=_(h(()=>s.data.mod),"mod");const T=a=>{w.mutation(A,{modId:oe(m(p)).data.mod.id,mod:a}).toPromise().then(t=>{t.error?(console.error(...re("error",t.error.message)),S.error({description:"Error editing mod: "+t.error.message})):(S.success({description:"Mod updated",duration:5e3}),se(de+"/mod/"+m(O)))})};let C=_(h(()=>e().data?{...e().data.mod,logo:void 0}:void 0),"initialValues");var L={...B()},I=pe();H(a=>{var t=D(),g=v(t);{var f=d=>{i(()=>ne(d,{get description(){return`Editing mod ${e().data.mod.name??""}`},get title(){return`Edit mod ${e().data.mod.name??""}`},get image(){return e().data.mod.logo}}),"component",o,58,4,{componentTag:"MetaDescriptors"})};i(()=>M(g,d=>{!e().fetching&&!e().error&&e().data.mod&&d(f)}),"if",o,57,2)}n(a,t)});var $=Q(v(I),2),F=b($),P=b(F);{var V=a=>{var t=ce();n(a,t)},j=a=>{var t=D(),g=v(t);{var f=r=>{var u=le(),N=b(u);y(u),te(()=>ae(N,`Oh no... ${e().error.message??""}`)),n(r,u)},d=r=>{i(()=>ie(r,{onSubmit:T,get initialValues(){return m(C)},editing:!0,submitText:"Save"}),"component",o,74,6,{componentTag:"ModForm"})};i(()=>M(g,r=>{e().error?r(f):r(d,!1)},!0),"if",o,71,4)}n(a,t)};i(()=>M(P,a=>{e().fetching?a(V):a(j,!1)}),"if",o,69,4)}y(F),y($),n(c,I);var G=U(L);return q(),G}export{o as component,Me as universal};
//# sourceMappingURL=17.BJWBhO9f.js.map
