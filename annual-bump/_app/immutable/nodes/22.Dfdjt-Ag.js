import{I as ha,a as We,p as Xe,b as Te,X as xa,J as v,N as k,aq as J,ao as Ie,O as F,u as e,at as Ne,W as wa,f as Qe,g as w,h as K,m as o,n as x,k as P,L as l,_ as C,q as n,r as Ye,t as ya,A as f,C as ne,F as _,y,G as de,as as Ue,z as u,ae as za,av as Pe,R as r,a9 as Ce,T as ve,a0 as j,ag as Ma,aw as se,ap as ce,ay as Ve,M as Ta,af as Pa,U as Ca,D as re,ac as He,K as Da}from"../chunks/CVeMU510.js";import{O as Sa,M as ue,H as qa,g as Oa}from"../chunks/Bj1PSOzY.js";import{M as $a}from"../chunks/Cum7cKJ5.js";import{u as Je}from"../chunks/e5LlVFqh.js";import{F as ka}from"../chunks/CVv3LYR3.js";import{a as Fa}from"../chunks/CqjskO25.js";import{P as Ke}from"../chunks/DTZUGaN9.js";import{M as ja}from"../chunks/BAbZjgJD.js";a[_]="src/lib/components/mods/ModGrid.svelte";var Ga=w(y('<option class="svelte-1salbzu"> </option>'),a[_],[[148,14]]),Ba=w(y('<p class="svelte-1salbzu"> </p>'),a[_],[[174,12]]),La=w(y('<div class="flex flex-grow flex-row flex-wrap items-center justify-center gap-1 pb-10 svelte-1salbzu"><!></div>'),a[_],[[172,8]]),Aa=w(y('<div class="flex grow flex-col items-center justify-center gap-4 sm:px-4 svelte-1salbzu"><div class="flex grow flex-row flex-wrap items-center justify-center gap-3 sm:px-4 svelte-1salbzu"><div class="svelte-1salbzu"><button type="button"><span class="svelte-1salbzu"> </span></button></div> <div class="svelte-1salbzu"><select class="select svelte-1salbzu"></select></div> <div class="svelte-1salbzu"><select class="select svelte-1salbzu"><option class="svelte-1salbzu"> </option><option class="svelte-1salbzu"> </option></select></div> <div class="input-group-divider input-group w-fit grid-cols-[1fr_auto] rounded-container svelte-1salbzu"><input class="border-0 bg-transparent p-1.5 ring-0 svelte-1salbzu" name="search"/> <button>arrow_forward</button></div></div> <!></div>'),a[_],[[133,4,[[134,6,[[135,8,[[136,10,[[142,12]]]]],[145,8,[[146,10]]],[152,8,[[153,10,[[154,12],[155,12]]]]],[159,8,[[160,10],[165,10]]]]]]]]),Ra=w(y('<a class="btn self-end border border-primary-500 preset-tonal-primary svelte-1salbzu"> </a>'),a[_],[[190,6]]),Ea=w(y('<div class="self-end svelte-1salbzu"><!></div>'),a[_],[[193,6]]),Ia=w(y("<div></div>"),a[_],[[201,2]]),Na=w(y('<p class="svelte-1salbzu"> </p>'),a[_],[[209,2]]),Ua=w(y("<div></div>"),a[_],[[213,2]]),Va=w(y('<div class="mt-5 ml-auto flex justify-end svelte-1salbzu"><div class="svelte-1salbzu"><!></div></div>'),a[_],[[221,2,[[222,4]]]]),Ha=w(y('<div class="mb-5 ml-auto flex flex-col gap-4 svelte-1salbzu"><!> <div><!> <!></div></div> <!> <!>',1),a[_],[[131,0,[[185,2]]]]);function a(ge,N){We(new.target),Xe(N,!0,a);const p=()=>(de(e(Se),"mods"),ne(e(Se),"$mods",oe)),i=()=>(de(be,"t"),ne(be,"$t",oe)),W=()=>(de(e(qe),"allTags"),ne(e(qe),"$allTags",oe)),fe=()=>(de(Je,"user"),ne(Je,"$user",oe)),[oe,Ze]=ya();let ea=Te(N,"colCount",3,4),_e=Te(N,"newMod",3,!1),aa=Te(N,"showSearch",3,!1);const De=xa();let G=v(k(J(Ie.url.searchParams.get("q")||"")),"search"),me=v(k(J(Sa.Desc)),"order"),R=v(k(J(ue.LastVersionDate)),"orderBy"),E=v(k(32),"perPage"),I=v(k(J(parseInt(Ie.url.searchParams.get("p")||"0",10)||0)),"page"),D=v(k(J([])),"selectedTags"),Se=v(F(()=>Ue({query:qa,client:De,variables:{offset:e(I)*e(E),limit:e(E),search:e(G),order:e(me),orderBy:e(R),tagIDs:e(D).sort()}})),"mods"),qe=v(F(()=>Ue({query:Oa,client:De,variables:{limit:100}})),"allTags"),le=v(F(()=>p()?.data?.getMods?.count||0),"totalMods"),m=v(k(J(e(G))),"searchField"),X=v(F(()=>e(m).length<3),"searchDisabled"),ta=v(F(()=>e(X)?"preset-filled-surface-500":"preset-filled-primary-500"),"searchButtonClass"),Oe=v(k(void 0),"timer");Ne(()=>{clearTimeout(e(Oe)),u(Oe,setTimeout(()=>{e(m)&&!e(X)?((f(e(G),"")||f(e(G),null))&&f(e(m),"",!1)&&f(e(m),null,!1)&&(u(R,ue.Search,!0),u(I,0)),u(G,e(m),!0)):(f(e(m),"")||f(e(m),null))&&((f(e(R),ue.Search)||!e(R))&&u(R,ue.LastVersionDate,!0),u(G,null))},250),!0)}),Ne(()=>{{const t=new URL(window.location.origin+window.location.pathname);t.searchParams.append("p",e(I).toString()),!e(X)&&f(e(m),"",!1)&&f(e(m),null,!1)&&t.searchParams.append("q",e(m)),za(t.toString(),{keepFocus:!0})}});let $e=v(F(()=>p()&&p().fetching||p()&&!p().fetching&&e(le)>0&&!p().error),"showPagination"),ke=v(F(()=>Pe(ea(),4)?"3xl:grid-cols-4 2xl:grid-cols-3 lg:grid-cols-2 grid-cols-1":"3xl:grid-cols-3 2xl:grid-cols-2 grid-cols-1"),"gridClasses");const{t:be}=wa();let Fe=v(F(()=>[[i()("sort-order.name"),"name"],[i()("sort-order.views"),"views"],[i()("sort-order.downloads"),"downloads"],[i()("sort-order.hotness"),"hotness"],[i()("sort-order.popularity"),"popularity"],[i()("sort-order.created_at"),"created_at"],[i()("sort-order.last_version_date"),"last_version_date"],...f(e(G),"",!1)&&f(e(G),null,!1)?[[i()("sort-order.search"),"search"]]:[]]),"orderFields");const sa=t=>{if(e(D).indexOf(t)>=0){const s=e(D).indexOf(t);u(D,[...e(D).slice(0,s),...e(D).slice(s+1)],!0)}else u(D,[...e(D),t],!0)},je=t=>t.toSorted((s,c)=>s.name.localeCompare(c.name));let ie=v(k(!1),"tagsOpen");var ra={get t(){return be},...Qe()},Ge=Ha(),he=K(Ge),Be=l(he);{var oa=t=>{var s=Aa(),c=l(s),g=l(c),h=l(g);let S;h.__click=()=>u(ie,!e(ie));var B=l(h),Q=l(B,!0);r(B),r(h),r(g);var Y=P(g,2),Z=l(Y);Ce(()=>e(Fe),d=>d[1]),o(()=>ve(Z,21,()=>e(Fe),d=>d[1],(d,O)=>{var $=Ga(),ae=l($,!0);r($);var V={};C(()=>{j(ae,e(O)[0]),V!==(V=e(O)[1])&&($.value=($.__value=e(O)[1])??"")}),n(d,$)}),"each",a,147,12),r(Z),r(Y);var z=P(Y,2),M=l(z),q=l(M),we=l(q,!0);r(q),q.value=q.__value="asc";var U=P(q),L=l(U,!0);r(U),U.value=U.__value="desc",r(M),r(z);var T=P(z,2),b=l(T);Ma(b);var ee=P(b,2);r(T),r(c);var ga=P(c,2);{var fa=d=>{var O=La(),$=l(O);{var ae=A=>{var H=Ba(),ye=l(H);r(H),C(()=>j(ye,`Oh no... ${W().error.message??""}`)),n(A,H)},V=A=>{var H=re(),ye=K(H);{var _a=ze=>{var Ee=re(),ma=K(Ee);Ce(()=>je(W().data.getTags),te=>te.id),o(()=>ve(ma,1,()=>je(W().data.getTags),te=>te.id,(te,Me)=>{{let ba=F(()=>e(D).indexOf(e(Me).id)>=0);o(()=>Fa(te,{get tag(){return e(Me)},get selected(){return e(ba)},onclick:()=>sa(e(Me).id)}),"component",a,177,14,{componentTag:"TagDisplay"})}}),"each",a,176,12),n(ze,Ee)};o(()=>x(ye,ze=>{W().fetching||ze(_a)},!0),"if",a,175,10)}n(A,H)};o(()=>x($,A=>{W().error?A(ae):A(V,!1)}),"if",a,173,10)}r(O),n(d,O)};o(()=>x(ga,d=>{e(ie)&&d(fa)}),"if",a,171,6)}r(s),C((d,O,$,ae,V,A)=>{S=se(h,1,"text-md btn preset-filled-surface-500 p-2 btn-sm pr-4 pl-4 svelte-1salbzu",null,S,{"preset-tonal-primary":e(ie)}),ce(h,"title",d),j(Q,O),j(we,$),j(L,ae),ce(b,"placeholder",V),se(ee,1,`material-icons ${e(ta)??""}`,"svelte-1salbzu"),ee.disabled=e(X),ce(ee,"title",A)},[()=>i()("filter.expand-button-tooltip"),()=>i()("filter.expand-button-text"),()=>i()("ascending"),()=>i()("descending"),()=>i()("search.placeholder-text"),()=>e(X)?i()("search.disabled"):""]),Ve(Z,()=>e(R),d=>u(R,d)),Ve(M,()=>e(me),d=>u(me,d)),Ta(b,()=>e(m),d=>u(m,d)),n(t,s)};o(()=>x(Be,t=>{aa()&&t(oa)}),"if",a,132,2)}var xe=P(Be,2);let Le;var Ae=l(xe);{var la=t=>{var s=Ra(),c=l(s,!0);r(s),C(g=>{ce(s,"href",`${Pa??""}/new-mod`),j(c,g)},[()=>i()("mods.new")]),n(t,s)};o(()=>x(Ae,t=>{_e()&&f(fe(),null,!1)&&t(la)}),"if",a,189,4)}var ia=P(Ae,2);{var na=t=>{var s=Ea(),c=l(s);o(()=>Ke(c,{get total(){return e(le)},get page(){return e(I)},set page(g){u(I,g,!0)},get perPage(){return e(E)},set perPage(g){u(E,g,!0)}}),"component",a,194,8,{componentTag:"Pager"}),r(s),n(t,s)};o(()=>x(ia,t=>{e($e)&&t(na)}),"if",a,192,4)}r(xe),r(he);var Re=P(he,2);{var da=t=>{var s=Ia();o(()=>ve(s,21,()=>Array(e(E)),Ca,(c,g)=>{o(()=>ka(c,{fake:!0}),"component",a,203,6,{componentTag:"FicsitCard"})}),"each",a,202,4),r(s),C(()=>se(s,1,`grid ${e(ke)??""} gap-4`,"svelte-1salbzu")),n(t,s)},va=t=>{var s=re(),c=K(s);{var g=S=>{var B=He();C(Q=>j(B,Q),[()=>i()("search.failed.query-too-short")]),n(S,B)},h=S=>{var B=re(),Q=K(B);{var Y=z=>{var M=Na(),q=l(M);r(M),C(()=>j(q,`Oh no... ${p().error.message??""}`)),n(z,M)},Z=z=>{var M=re(),q=K(M);{var we=L=>{var T=He();C(b=>j(T,b),[()=>i()("search.results.empty")]),n(L,T)},U=L=>{var T=Ua();Ce(()=>p().data.getMods.mods,b=>b.id),o(()=>ve(T,5,()=>p().data.getMods.mods,b=>b.id,(b,ee)=>{o(()=>$a(b,{get mod(){return e(ee)}}),"component",a,215,6,{componentTag:"ModCard"})}),"each",a,214,4),r(T),C(()=>se(T,1,`grid ${e(ke)??""} gap-4`,"svelte-1salbzu")),n(L,T)};o(()=>x(q,L=>{Pe(e(le),0)?L(we):L(U,!1)},!0),"if",a,210,0)}n(z,M)};o(()=>x(Q,z=>{p().error?z(Y):z(Z,!1)},!0),"if",a,208,0)}n(S,B)};o(()=>x(c,S=>{p().error&&p().error.message.includes("'Search' failed on the 'min' tag")?S(g):S(h,!1)},!0),"if",a,206,0)}n(t,s)};o(()=>x(Re,t=>{p().fetching?t(da):t(va,!1)}),"if",a,200,0)}var ca=P(Re,2);{var ua=t=>{var s=Va(),c=l(s),g=l(c);o(()=>Ke(g,{get total(){return e(le)},get page(){return e(I)},set page(h){u(I,h,!0)},get perPage(){return e(E)},set perPage(h){u(E,h,!0)}}),"component",a,223,6,{componentTag:"Pager"}),r(c),r(s),n(t,s)};o(()=>x(ca,t=>{e($e)&&t(ua)}),"if",a,220,0)}C(()=>Le=se(xe,1,"flex grow flex-row flex-wrap svelte-1salbzu",null,Le,{"justify-between":_e()&&f(fe(),null,!1),"justify-end":!_e()||Pe(fe(),null)})),n(ge,Ge);var pa=Ye(ra);return Ze(),pa}ha(["click"]);pe[_]="src/routes/mods/+page.svelte";function pe(ge,N){We(new.target),Xe(N,!1,pe);var p={...Qe()};return Da(i=>{o(()=>ja(i,{description:"Mods available from the Satisfactory Mod Repository",title:"Mods"}),"component",pe,7,2,{componentTag:"MetaDescriptors"})}),o(()=>a(ge,{showSearch:!0,newMod:!0,colCount:4}),"component",pe,10,0,{componentTag:"ModGrid"}),Ye(p)}export{pe as component};
//# sourceMappingURL=22.Dfdjt-Ag.js.map
