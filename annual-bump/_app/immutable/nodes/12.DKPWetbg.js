import{aw as ye,a as R,p as W,X as ge,f as X,m as i,a4 as K,r as Y,t as V,g as P,h as O,L as t,S as a,k as m,ab as xe,a0 as Z,a1 as U,C as Q,q as $,F as f,y as A,G as j,u as d,O as C,I as we,J as F,Y as Ge,K as Ie,N as De,D as ie,n as L,ae as ne,af as de,z as ue,Q as Te,R as ke,ad as Ce,a8 as Me,A as Pe}from"../chunks/DXyKL7ev.js";import{r as Ae,J as Ee}from"../chunks/C2xQDKU4.js";import{l as Se}from"../chunks/Bi2QyF3C.js";import{a as qe}from"../chunks/DomivD8e.js";import{I as Fe,P as Oe}from"../chunks/CkrDTkB4.js";import{U as Ue}from"../chunks/BwSO8-fW.js";import{u as ce}from"../chunks/FxgHKTKi.js";import{m as Qe}from"../chunks/rlXBDvSR.js";import{M as je}from"../chunks/CVCyYPYH.js";import{t as le}from"../chunks/CvZBqrLn.js";import{B as ze}from"../chunks/DeXSY9cQ.js";import{Q as Be}from"../chunks/CK0DKWwV.js";const Ne=!1,He=async({params:l,parent:o})=>({...l,...await Se({guide:ye({query:Ae,client:(await o()).client,variables:{guide:l.guideId}})})}),dt=Object.freeze(Object.defineProperty({__proto__:null,load:He,prerender:Ne},Symbol.toStringTag,{value:"Module"}));G[f]="src/lib/components/guides/GuideInfo.svelte";var Je=P(A("<span><strong> </strong> </span><br/>",1),G[f],[[17,2,[[17,8]]],[17,88]]);function G(l,o){R(new.target),W(o,!0,G);const _=()=>(j(u,"t"),Q(u,"$t",r)),[r,h]=V(),{t:u}=ge();var b={get t(){return u},...X()};i(()=>Fe(l,{children:K(G,(y,I)=>{var g=Je(),p=O(g),v=t(p),D=t(v);a(v);var n=m(v);a(p),xe(),Z((s,x)=>{U(D,`${s??""}:`),U(n,` ${x??""}`)},[()=>_()("entry.created-at"),()=>qe(o.guide.created_at)]),$(y,g)}),$$slots:{default:!0}}),"component",G,16,0,{componentTag:"InfoCard"});var c=Y(b);return h(),c}M[f]="src/lib/components/guides/GuideAuthor.svelte";var Le=P(A('<div class="card preset-filled-surface-100-900 p-4"><section><div class="grid grid-flow-row gap-y-2"><h3 class="my-4 text-2xl font-bold"> </h3> <div class="grid auto-rows-min gap-y-4 text-lg"><!></div></div></section></div>'),M[f],[[15,0,[[16,2,[[17,4,[[18,6],[20,6]]]]]]]]);function M(l,o){R(new.target),W(o,!0,M);const _=()=>(j(u,"t"),Q(u,"$t",r)),[r,h]=V(),{t:u}=ge();var b={get t(){return u},...X()},c=Le(),y=t(c),I=t(y),g=t(I),p=t(g,!0);a(g);var v=m(g,2),D=t(v);{let s=C(()=>({id:o.author.id,username:o.author.username,avatar:o.author.avatar})),x=C(()=>_()("role.writer"));i(()=>Ue(D,{get user(){return d(s)},get role(){return d(x)}}),"component",M,21,8,{componentTag:"UserDisplay"})}a(v),a(I),a(y),a(c),Z(s=>U(p,s),[()=>_()("author")]),$(l,c);var n=Y(b);return h(),n}e[f]="src/routes/guide/[guideId]/+page.svelte";var Ke=P(A('<button class="btn border border-primary-500 preset-tonal-primary"><span class="material-icons pr-2">edit</span> Edit</button> <!> <button class="btn border border-primary-500 preset-tonal-primary"><span class="material-icons pr-2">delete</span> Delete</button>',1),e[f],[[70,12,[[73,14]]],[83,12,[[84,14]]]]),Re=P(A("<p><!></p>"),e[f],[[95,16]]),We=P(A('<div class="xlx:grid-flow-row grid gap-6"><div class="flex h-auto flex-wrap items-center justify-between"><h1 class="text-4xl font-bold"> </h1> <div><!></div></div> <div class="grid-auto-max grid auto-cols-fr gap-4"><div class="h-fit card preset-filled-surface-100-900 p-4"><section><div class="markdown-content break-words"><!></div></section></div> <div class="grid auto-rows-min grid-cols-1 gap-8"><!> <!></div></div></div>'),e[f],[[64,4,[[65,6,[[66,8],[68,8]]],[89,6,[[90,8,[[91,10,[[92,12]]]]],[100,8]]]]]]);function e(l,o){R(new.target),W(o,!0,e);const _=()=>(j(ce,"user"),Q(ce,"$user",h)),r=()=>(j(d(c),"guide"),Q(d(c),"$guide",h)),[h,u]=V();let b=F(C(()=>o.data.guideId),"guideId"),c=F(C(()=>o.data.guide),"guide");const y=Ge();let I=F(C(()=>_()?.roles?.deleteContent||Pe(_()?.id,r()?.data?.getGuide?.user?.id)),"canUserEdit");const g=()=>{y.mutation(Ee,{guideId:d(b)}).toPromise().then(n=>{n.error?(console.error(...Ce("error",n.error.message)),le.error({description:"Error deleting guide: "+n.error.message})):(le.success({description:"Guide deleted",duration:5e3}),ne(de+"/guides"))})};let p=F(De(!1),"deleteModalOpen");var v={...X()};Ie("12lmz89",n=>{var s=ie(),x=O(s);{var E=T=>{i(()=>je(T,{get description(){return r().data.getGuide.short_description},get title(){return r().data.getGuide.name}}),"component",e,54,4,{componentTag:"MetaDescriptors"})};i(()=>L(x,T=>{!r().fetching&&!r().error&&r().data.getGuide&&T(E)}),"if",e,53,2)}$(n,s)});{const n=K(e,function(s){Me(...arguments),i(()=>Oe(s,{}),"component",e,60,4,{componentTag:"Page404"})});i(()=>Be(l,{get query(){return d(c)},empty:n,children:K(e,(s,x)=>{var E=ie(),T=O(E);{var pe=z=>{var B=We(),N=t(B),H=t(N),ve=t(H,!0);a(H);var ee=m(H,2),me=t(ee);{var fe=k=>{var S=Ke(),w=O(S);w.__click=()=>ne(de+"/guide/"+d(b)+"/edit");var q=m(w,2);i(()=>ze(q,{title:"Delete guide?",body:"Are you sure you wish to delete this guide?",buttonTextCancel:"Cancel",buttonTextConfirm:"Delete",confirm:g,get open(){return d(p)},set open(be){ue(p,be,!0)}}),"component",e,76,12,{componentTag:"BasicModal"});var he=m(q,2);he.__click=()=>ue(p,!0),$(k,S)};i(()=>L(me,k=>{d(I)&&k(fe)}),"if",e,69,10)}a(ee),a(N);var te=m(N,2),J=t(te),ae=t(J),re=t(ae),_e=t(re);i(()=>Te(_e,()=>Qe(r().data.getGuide.guide),null,(k,S)=>{var w=Re(),q=t(w);ke(q,()=>d(S)),a(w),$(k,w)}),"await",e,93,14),a(re),a(ae),a(J);var oe=m(J,2),se=t(oe);i(()=>G(se,{get guide(){return r().data.getGuide}}),"component",e,101,10,{componentTag:"GuideInfo"});var $e=m(se,2);i(()=>M($e,{get author(){return r().data.getGuide.user}}),"component",e,102,10,{componentTag:"GuideAuthor"}),a(oe),a(te),a(B),Z(()=>U(ve,r().data.getGuide.name)),$(z,B)};i(()=>L(T,z=>{r().data.getGuide&&z(pe)}),"if",e,63,2)}$(s,E)}),$$slots:{empty:!0,default:!0}}),"component",e,58,0,{componentTag:"QueryStateHandler"})}var D=Y(v);return u(),D}we(["click"]);export{e as component,dt as universal};
//# sourceMappingURL=12.DKPWetbg.js.map
