import{I as H,a as K,p as L,J as s,Y as N,f as J,g as R,K as U,h as x,m as n,z as M,k as _,q as w,r as Y,t as W,O as d,N as X,D as Z,n as ee,C as te,L as c,u as e,a4 as oe,F as E,y as re,G as ae,ae as S,af as T,ad as se,aw as ne,S as m}from"../chunks/C90Be9iR.js";import{v as ie,w as de}from"../chunks/C2xQDKU4.js";import{V as ce}from"../chunks/B3mGc4Qb.js";import{M as me}from"../chunks/DN0KTx-o.js";import{t as B}from"../chunks/CTLp1XiY.js";import{B as le}from"../chunks/PJ6b_Mab.js";import{Q as pe}from"../chunks/LDwLMLnf.js";const ue=async({params:l})=>({...l}),$e=Object.freeze(Object.defineProperty({__proto__:null,load:ue},Symbol.toStringTag,{value:"Module"}));o[E]="src/routes/mod/[modId]/version/[versionId]/edit/+page.svelte";var ve=R(re('<div class="flex h-auto flex-wrap items-center justify-between"><h1 class="my-4 text-4xl font-bold">Edit Version</h1> <div><!> <button class="btn border border-primary-500 preset-tonal-primary"><span class="material-icons pr-2">arrow_back</span> Back to Versions</button></div></div> <div class="card preset-filled-surface-100-900 p-4"><section><!></section></div>',1),o[E],[[78,0,[[79,2],[80,2,[[88,4,[[89,6]]]]]]],[94,0,[[95,2]]]]);function o(l,p){K(new.target),L(p,!0,o);const t=()=>(ae(e(u),"version"),te(e(u),"$version",q)),[q,C]=W();let b=s(d(()=>p.data.modId),"modId"),i=s(d(()=>p.data.versionId),"versionId");const y=N();let u=s(d(()=>ne({query:de,client:y,variables:{version:e(i)}})),"version");const D=async r=>y.mutation(ie,{versionId:e(i),version:r}).toPromise().then(a=>{if(a.error)console.error(...se("error",a.error.message)),B.error({description:"Error editing version: "+a.error.message});else return B.success({description:"Version updated",duration:5e3}),S(T+"/mod/"+e(b)+"/version/"+e(i))});let F=s(d(()=>t().data?{...t().data.getVersion,logo:void 0}:void 0),"initialValues");const G=()=>{S(T+"/mod/"+e(b)+"/version/"+e(i))};let v=s(X(!1),"backModalOpen");var O={...J()},V=ve();U("1gcenqd",r=>{var a=Z(),z=x(a);{var A=f=>{n(()=>me(f,{get description(){return`Editing mod version ${t().data.getVersion.mod.name??""} ${t().data.getVersion.version??""}`},get title(){return`Edit mod version ${t().data.getVersion.mod.name??""} ${t().data.getVersion.version??""}`}}),"component",o,72,4,{componentTag:"MetaDescriptors"})};n(()=>ee(z,f=>{!t().fetching&&!t().error&&t().data.getVersion&&f(A)}),"if",o,71,2)}w(r,a)});var g=x(V),h=_(c(g),2),$=c(h);n(()=>le($,{title:"Go Back?",body:"Going back will discard any unsaved changes. Are you sure you wish to continue?",buttonTextCancel:"Keep Editing",buttonTextConfirm:"Go Back",confirm:G,get open(){return e(v)},set open(r){M(v,r,!0)}}),"component",o,81,4,{componentTag:"BasicModal"});var j=_($,2);j.__click=()=>M(v,!0),m(h),m(g);var k=_(g,2),I=c(k),P=c(I);n(()=>pe(P,{get query(){return e(u)},children:oe(o,(r,a)=>{n(()=>ce(r,{onSubmit:D,get initialValues(){return e(F)},get modReference(){return t().data.getVersion.mod.mod_reference},editing:!0,submitText:"Save",submitIcon:"save"}),"component",o,97,6,{componentTag:"VersionForm"})}),$$slots:{default:!0}}),"component",o,96,4,{componentTag:"QueryStateHandler"}),m(I),m(k),w(l,V);var Q=Y(O);return C(),Q}H(["click"]);export{o as component,$e as universal};
//# sourceMappingURL=20.BRIYLkxd.js.map
